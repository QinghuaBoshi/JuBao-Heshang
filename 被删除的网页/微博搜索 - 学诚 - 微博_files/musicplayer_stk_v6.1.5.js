(function(f){var c={};var i=function(k){return c[k];};var r=function(k){if(!c[k]){var m={exports:{}};try{f[k].call(m.exports,m,m.exports,r,i)}catch(e){};c[k]=m.exports;}return c[k];};return r('a');})({a:function(e,t,n,r){n("A"),n("b")},A:function(module,exports,require,include){if(!STK)var STK=function(){var e={},t="theia";e[t]={IE:/msie/i.test(navigator.userAgent),E:function(e){return typeof e=="string"?document.getElementById(e):e},C:function(e){var t;return e=e.toUpperCase(),e=="TEXT"?t=document.createTextNode(""):e=="BUFFER"?t=document.createDocumentFragment():t=document.createElement(e),t},log:function(e){}};var n=e[t];return n.register=function(n,r,i){if(!i||typeof i!="string")i=t;e[i]||(e[i]={});var s=e[i],o=n.split("."),u=s,f=null;while(f=o.shift())if(o.length)u[f]===undefined&&(u[f]={}),u=u[f];else if(u[f]===undefined)try{if(i&&i!==t){if(n==="core.util.listener")return u[f]=e[t].core.util.listener,!0;if(n==="core.util.connect")return u[f]=e[t].core.util.connect,!0}return u[f]=r(s),!0}catch(l){setTimeout(function(){},0)}return!1},n.unRegister=function(n,r){if(!r||typeof r!="string")r=t;var i=e[r],s=n.split("."),o=i,u=null;while(u=s.shift())if(s.length){if(o[u]===undefined)return!1;o=o[u]}else if(o[u]!==undefined)return delete o[u],!0;return!1},n.regShort=function(e,t){if(n[e]!==undefined)throw"["+e+"] : short : has been register";n[e]=t},n.shortRegister=function(n,r,i){if(!i||typeof i!="string")i=t;var s=e[i],o=n.split(".");if(!r)return!1;if(s[r])return!1;var u=s,f=null;while(f=o.shift())if(o.length){if(u[f]===undefined)return!1;u=u[f]}else if(u[f]!==undefined)return s[r]?!1:(s[r]=u[f],!0);return!1},n.getPKG=function(n){if(!n||typeof n!="string")n=t;return e[n]},n}();STK.register("core.ani.algorithm",function(e){var t={linear:function(e,t,n,r,i){return n*e/r+t},easeincubic:function(e,t,n,r,i){return n*(e/=r)*e*e+t},easeoutcubic:function(e,t,n,r,i){return(e/=r/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},easeinoutcubic:function(e,t,n,r,i){return i==undefined&&(i=1.70158),n*(e/=r)*e*((i+1)*e-i)+t},easeinback:function(e,t,n,r,i){return i==undefined&&(i=1.70158),n*(e/=r)*e*((i+1)*e-i)+t},easeoutback:function(e,t,n,r,i){return i==undefined&&(i=1.70158),n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},easeinoutback:function(e,t,n,r,i){return i==undefined&&(i=1.70158),(e/=r/2)<1?n/2*e*e*(((i*=1.525)+1)*e-i)+t:n/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t}};return{addAlgorithm:function(e,n){if(t[e])throw"[core.ani.tweenValue] this algorithm :"+e+"already exist";t[e]=n},compute:function(e,n,r,i,s,o,u){if(typeof t[e]!="function")throw"[core.ani.tweenValue] this algorithm :"+e+"do not exist";return t[e](i,n,r,s,o,u)}}}),STK.register("core.func.empty",function(){return function(){}}),STK.register("core.obj.parseParam",function(e){return function(e,t,n){var r,i={};t=t||{};for(r in e)i[r]=e[r],t[r]!=null&&(n?e.hasOwnProperty[r]&&(i[r]=t[r]):i[r]=t[r]);return i}}),STK.register("core.ani.tweenArche",function(e){return function(t,n){var r,i,s,o,u,f,l,c;i={},r=e.core.obj.parseParam({animationType:"linear",distance:1,duration:500,callback:e.core.func.empty,algorithmParams:{},extra:5,delay:25},n);var h=function(){s=+(new Date)-o,s<r.duration?(u=e.core.ani.algorithm.compute(r.animationType,0,r.distance,s,r.duration,r.extra,r.algorithmParams),t(u),f=setTimeout(h,r.delay)):(c="stop",r.callback())};return c="stop",i.getStatus=function(){return c},i.play=function(){return o=+(new Date),u=null,h(),c="play",i},i.stop=function(){return clearTimeout(f),c="stop",i},i.resume=function(){return l&&(o+=+(new Date)-l,h()),i},i.pause=function(){return clearTimeout(f),l=+(new Date),c="pause",i},i.destroy=function(){clearTimeout(f),l=0,c="stop"},i}}),STK.register("core.dom.getStyle",function(e){function t(){return"y"in t?t.y:t.y="filters"in e.C("div")}return function(e,n){if(!t()){n=="float"&&(n="cssFloat");try{var r=document.defaultView.getComputedStyle(e,"")}catch(i){}return e.style[n]||r?r[n]:null}switch(n){case"opacity":var s=100;try{s=e.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(i){try{s=e.filters("alpha").opacity}catch(i){}}return s/100;case"float":n="styleFloat";default:var o=e.currentStyle?e.currentStyle[n]:null;return e.style[n]||o}}}),STK.register("core.util.browser",function(e){var t=navigator.userAgent.toLowerCase(),n=window.external||"",r,i,s,o,u,a=function(e){var t=0;return parseFloat(e.replace(/\./g,function(){return t++==1?"":"."}))};try{/windows|win32/i.test(t)?u="windows":/macintosh/i.test(t)?u="macintosh":/rhino/i.test(t)&&(u="rhino"),(i=t.match(/applewebkit\/([^\s]*)/))&&i[1]?(r="webkit",o=a(i[1])):(i=t.match(/presto\/([\d.]*)/))&&i[1]?(r="presto",o=a(i[1])):(i=t.match(/msie\s([^;]*)/))?(r="trident",o=1,(i=t.match(/trident\/([\d.]*)/))&&i[1]&&(o=a(i[1]))):/gecko/.test(t)&&(r="gecko",o=1,(i=t.match(/rv:([\d.]*)/))&&i[1]&&(o=a(i[1]))),/world/.test(t)?s="world":/360se/.test(t)?s="360":/maxthon/.test(t)||typeof n.max_version=="number"?s="maxthon":/tencenttraveler\s([\d.]*)/.test(t)?s="tt":/se\s([\d.]*)/.test(t)&&(s="sogou")}catch(f){}var l={OS:u,CORE:r,Version:o,EXTRA:s?s:!1,IE:/msie/.test(t),OPERA:/opera/.test(t),MOZ:/gecko/.test(t)&&!/(compatible|webkit)/.test(t),IE5:/msie 5 /.test(t),IE55:/msie 5.5/.test(t),IE6:/msie 6/.test(t),IE7:/msie 7/.test(t),IE8:/msie 8/.test(t),IE9:/msie 9/.test(t),SAFARI:!/chrome\/([\d.]*)/.test(t)&&/\/([\da-f.]*) safari/.test(t),CHROME:/chrome\/([\d.]*)/.test(t),IPAD:/\(ipad/i.test(t),IPHONE:/\(iphone/i.test(t),ITOUCH:/\(itouch/i.test(t),MOBILE:/mobile/i.test(t)};return l}),STK.register("core.dom.cssText",function(e){var t=function(e){var t=0,n=[],r="close",i=!1,s=null,o=function(r){n.push({type:"info",content:e.slice(0,t)}),n.push({type:"sign",content:e.slice(t,t+1)}),e=e.slice(t+1),t=0};while(e){var u=e.charAt(t);switch(u){case":":if(!i&&r==="close"){n.push({type:"attr",content:e.slice(0,t)}),n.push({type:"sign",content:e.slice(t,t+1)}),e=e.slice(t+1),t=0,r="open";break}t+=1;break;case";":if(!i){r==="open"&&(n.push({type:"info",content:e.slice(0,t)}),n.push({type:"sign",content:e.slice(t,t+1)})),e=e.slice(t+1),t=0,r="close";break}t+=1;break;case'"':case"'":i?u===s&&(i=!i,s=null):(i=!i,s=u),t+=1;break;case" ":case"!":case",":case"(":case")":o(u);break;case"":n.push({type:"info",content:e.slice(0,t)}),e="",t=0;break;default:t+=1}}return n},n=function(e){var t={},n;for(var r=0,i=e.length;r<i;r+=1)if(e[r].type==="attr")n=e[r].content,t[n]="";else{if(e[r].type==="sign"&&e[r].content===";"){n=null;continue}if(e[r].type==="sign"&&e[r].content===":")continue;n!==null,t[n]+=e[r].content}return t},r={webkit:"-webkit-",presto:"-o-",trident:"-ms-",gecko:"-moz-"}[e.core.util.browser.CORE],i=["transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","animation","animation-delay","animation-direction","animation-duration","animation-iteration-count","animation-name","animation-play-state","animation-timing-function"],s=function(e){for(var t=0,n=i.length;t<n;t+=1)if(e===i[t])return!0;return!1};return function(e){var i=n(t(e||"")),o=function(e,t){return e=e.toLowerCase(),i[e]=t,s(e)&&(i[r+e]=t),u},u={push:o,remove:function(e){return e=e.toLowerCase(),i[e]&&delete i[e],s(e)&&i[r+e]&&delete i[r+e],u},merge:function(e){var r=n(t(e||""));for(var i in r)o(i,r[i])},getCss:function(){var e=[];for(var t in i)e.push(t+":"+i[t]);return e.join(";")}};return u}}),STK.register("core.func.getType",function(e){return function(e){var t;return((t=typeof e)=="object"?e==null&&"null"||Object.prototype.toString.call(e).slice(8,-1):t).toLowerCase()}}),STK.register("core.arr.isArray",function(e){return function(e){return Object.prototype.toString.call(e)==="[object Array]"}}),STK.register("core.arr.foreach",function(e){var t=function(e,t){var n=[];for(var r=0,i=e.length;r<i;r+=1){var s=t(e[r],r);if(s===!1)break;s!==null&&(n[r]=s)}return n},n=function(e,t){var n={};for(var r in e){var i=t(e[r],r);if(i===!1)break;i!==null&&(n[r]=i)}return n};return function(r,i){return e.core.arr.isArray(r)||r.length&&r[0]!==undefined?t(r,i):typeof r=="object"?n(r,i):null}}),STK.register("core.arr.indexOf",function(e){return function(e,t){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}}),STK.register("core.arr.inArray",function(e){return function(t,n){return e.core.arr.indexOf(t,n)>-1}}),STK.register("core.dom.isNode",function(e){return function(e){return e!=undefined&&Boolean(e.nodeName)&&Boolean(e.nodeType)}}),STK.register("core.json.merge",function(e){var t=function(t){return t===undefined?!0:t===null?!0:e.core.arr.inArray(typeof t,["number","string","function","boolean"])?!0:e.core.dom.isNode(t)?!0:!1},n=function(r,i,s){if(t(s))r[i]=s;else{if(e.core.arr.isArray(s)){e.core.arr.isArray(r[i])||(r[i]=[]);for(var o=0,u=s.length;o<u;o+=1)n(r[i],o,s[o]);return}if(typeof s=="object"){if(t(r[i])||e.core.arr.isArray(r[i]))r[i]={};for(var f in s)n(r[i],f,s[f]);return}}},r=function(e,t,r){var i={};if(r){for(var s in e)n(i,s,e[s]);for(var s in t)n(i,s,t[s])}else{for(var s in e)i[s]=e[s];for(var s in t)i[s]=t[s]}return i};return function(t,n,i){var s=e.core.obj.parseParam({isDeep:!1},i);return r(t,n,s.isDeep)}}),STK.register("core.util.color",function(e){var t=/^#([a-fA-F0-9]{3,8})$/,n=/^rgb[a]?\s*\((\s*([0-9]{1,3})\s*,){2,3}(\s*([0-9]{1,3})\s*)\)$/,r=/([0-9]{1,3})/ig,i=/([a-fA-F0-9]{2})/ig,s=e.core.arr.foreach,o=function(e){var o=[],u=[];return t.test(e)?(u=e.match(t),u[1].length<=4?o=s(u[1].split(""),function(e,t){return parseInt(e+e,16)}):u[1].length<=8&&(o=s(u[1].match(i),function(e,t){return parseInt(e,16)})),o):n.test(e)?(u=e.match(r),o=s(u,function(e,t){return parseInt(e,10)}),o):!1};return function(e,t){var n=o(e);if(!n)return!1;var r={};return r.getR=function(){return n[0]},r.getG=function(){return n[1]},r.getB=function(){return n[2]},r.getA=function(){return n[3]},r}}),STK.register("core.ani.tween",function(e){var t=e.core.ani.tweenArche,n=e.core.arr.foreach,r=e.core.dom.getStyle,i=e.core.func.getType,s=e.core.obj.parseParam,o=e.core.json.merge,u=e.core.util.color,a=function(e){var t=/(-?\d\.?\d*)([a-z%]*)/i.exec(e),n=[0,"px"];return t&&(t[1]&&(n[0]=t[1]-0),t[2]&&(n[1]=t[2])),n},f=function(e){for(var t=0,n=e.length;t<n;t+=1){var r=e.charCodeAt(t);if(r>64&&r<90){var i=e.substr(0,t),s=e.substr(t,1),o=e.slice(t+1);return i+"-"+s.toLowerCase()+o}}return e},l=function(e,t,n){var s=r(e,n);if(i(s)==="undefined"||s==="auto")n==="height"&&(s=e.offsetHeight),n==="width"&&(s=e.offsetWidth);var o={start:s,end:t,unit:"",key:n,defaultColor:!1};if(i(t)==="number"){var f=[0,"px"];i(s)==="number"?f[0]=s:f=a(s),o.start=f[0],o.unit=f[1]}if(i(t)==="string"){var l,c;l=u(t),l&&(c=u(s),c||(c=u("#fff")),o.start=c,o.end=l,o.defaultColor=!0)}return e=null,o},c={opacity:function(e,t,n,r){var i=e*(n-t)+t;return{filter:"alpha(opacity="+i*100+")",opacity:Math.max(Math.min(1,i),0),zoom:"1"}},defaultColor:function(e,t,n,r,i){var s=Math.max(0,Math.min(255,Math.ceil(e*(n.getR()-t.getR())+t.getR()))),o=Math.max(0,Math.min(255,Math.ceil(e*(n.getG()-t.getG())+t.getG()))),u=Math.max(0,Math.min(255,Math.ceil(e*(n.getB()-t.getB())+t.getB()))),a={};return a[f(i)]="#"+(s<16?"0":"")+s.toString(16)+(o<16?"0":"")+o.toString(16)+(u<16?"0":"")+u.toString(16),a},"default":function(e,t,n,r,i){var s=e*(n-t)+t,o={};return o[f(i)]=s+r,o}};return function(r,i){var u,a,f,h,p,d,v,m,y,w;i=i||{},a=s({animationType:"linear",duration:500,algorithmParams:{},extra:5,delay:25},i),a.distance=1;var E,S;a.callback=function(){return S=i.end||e.core.func.empty,E=i.tween||e.core.func.empty,function(){h(1),v(),S(r)}}(),f=o(c,i.propertys||{}),d=null,p={},y=[],h=function(e){var t=[],i=n(p,function(t,n){var r;f[n]?r=f[n]:t.defaultColor?r=f.defaultColor:r=f["default"];var i=r(e,t.start,t.end,t.unit,t.key);for(var s in i)d.push(s,i[s]);try{E(e)}catch(o){}});r.style.cssText=d.getCss()},v=function(){var e;while(e=y.shift())try{e.fn();if(e.type==="play")break;if(e.type==="destroy")break}catch(t){}},w=t(h,a);var x=function(e){w.getStatus()!=="play"?r=e:y.push({fn:x,type:"setNode"})},T=function(t){w.getStatus()!=="play"?(p=n(t,function(e,t){return l(r,e,t)}),d=e.core.dom.cssText(r.style.cssText+(i.staticStyle||"")),w.play()):y.push({fn:function(){T(t)},type:"play"})},N=function(){w.getStatus()!=="play"?(w.destroy(),r=null,u=null,a=null,f=null,h=null,p=null,d=null,v=null,m=null,y=null):y.push({fn:N,type:"destroy"})};return u={},u.play=function(e){return T(e),u},u.stop=function(){return w.stop(),u},u.pause=function(){return w.pause(),u},u.resume=function(){return w.resume(),u},u.finish=function(e){return T(e),N(),u},u.setNode=function(e){return x(e),u},u.destroy=function(){return N(),u},u}}),STK.register("core.dom.hasClassName",function(e){return function(e,t){return(new RegExp("(^|\\s)"+t+"($|\\s)")).test(e.className)}}),STK.register("core.str.trim",function(e){return function(e){if(typeof e!="string")throw"trim need a string as parameter";var t=e.length,n=0,r=/(\u3000|\s|\t|\u00A0)/;while(n<t){if(!r.test(e.charAt(n)))break;n+=1}while(t>n){if(!r.test(e.charAt(t-1)))break;t-=1}return e.slice(n,t)}}),STK.register("core.dom.addClassName",function(e){return function(t,n){t.nodeType===1&&(e.core.dom.hasClassName(t,n)||(t.className=e.core.str.trim(t.className)+" "+n))}}),STK.register("core.dom.removeClassName",function(e){return function(t,n){t.nodeType===1&&e.core.dom.hasClassName(t,n)&&(t.className=t.className.replace(new RegExp("(^|\\s)"+n+"($|\\s)")," "))}}),STK.register("core.evt.addEvent",function(e){return function(t,n,r){return t=e.E(t),t==null?!1:typeof r!="function"?!1:(t.addEventListener?t.addEventListener(n,r,!1):t.attachEvent?t.attachEvent("on"+n,r):t["on"+n]=r,!0)}}),STK.register("core.evt.removeEvent",function(e){return function(t,n,r){return t=e.E(t),t==null?!1:typeof r!="function"?!1:(t.removeEventListener?t.removeEventListener(n,r,!1):t.detachEvent&&t.detachEvent("on"+n,r),t["on"+n]=null,!0)}}),STK.register("core.ani.transition",function(e){var t=function(){var e=document.createElement("style"),t="STK_transition_"+ +(new Date),n=null,r={};e.setAttribute("type","text/css"),e.setAttribute("id",t),document.head.appendChild(e);for(var i=0,s=document.styleSheets.length;i<s;i+=1)if(document.styleSheets[i].ownerNode.id===t){n=document.styleSheets[i];break}return r.getCssSheet=function(){return n},r.addRule=function(e,t){var r=n.rules||n.cssRules;n.addRule?n.addRule(e,t,r.length):n.insertRule&&n.insertRule(e+" {"+t+"}",r.length)},r.destory=function(){document.head.removeChild(e),e=null,n=null,t=null},r};return function(n,r){var i=e.core.obj.parseParam({target:"",duration:500,timingFn:[0,0,1,1],callback:function(){}},r),s="all "+i.duration+"ms cubic-bezier("+i.timingFn.join(",")+")",o=e.core.dom.cssText(n.style.cssText),u="test",f=t();o.merge(i.target),o.push("transition",s),f.addRule("."+u,o.getCss()),e.core.evt.addEvent(n,"transitionend",function(){e.core.evt.removeEvent(n,"transitionend",arguments.callee),n.style.cssText=o.remove("transition").getCss(),e.core.dom.removeClassName(n,u),f.destory(),s=null,o=null,u=null,f=null,i.callback(n),i=null}),e.core.dom.addClassName(n,u),n.style.cssText=""}}),STK.register("core.arr.findout",function(e){return function(t,n){if(!e.core.arr.isArray(t))throw"the findout function needs an array as first parameter";var r=[];for(var i=0,s=t.length;i<s;i+=1)t[i]===n&&r.push(i);return r}}),STK.register("core.arr.clear",function(e){return function(t){if(!e.core.arr.isArray(t))throw"the clear function needs an array as first parameter";var n=[];for(var r=0,i=t.length;r<i;r+=1)e.core.arr.findout([undefined,null,""],t[r]).length||n.push(t[r]);return n}}),STK.register("core.arr.copy",function(e){return function(t){if(!e.core.arr.isArray(t))throw"the copy function needs an array as first parameter";return t.slice(0)}}),STK.register("core.arr.hasby",function(e){return function(t,n){if(!e.core.arr.isArray(t))throw"the hasBy function needs an array as first parameter";var r=[];for(var i=0,s=t.length;i<s;i+=1)n(t[i],i)&&r.push(i);return r}}),STK.register("core.arr.unique",function(e){return function(t){if(!e.core.arr.isArray(t))throw"the unique function needs an array as first parameter";var n=[];for(var r=0,i=t.length;r<i;r+=1)e.core.arr.indexOf(t[r],n)===-1&&n.push(t[r]);return n}}),STK.register("core.dom.addHTML",function(e){return function(e,t){if(e.insertAdjacentHTML)e.insertAdjacentHTML("BeforeEnd",t);else{var n=e.ownerDocument.createRange();n.setStartBefore(e);var r=n.createContextualFragment(t);e.appendChild(r)}}}),STK.register("core.dom.sizzle",function(e){function t(e,t,n,r,i,s){for(var o=0,u=r.length;o<u;o++){var f=r[o];if(f){f=f[e];var l=!1;while(f){if(f.sizcache===n){l=r[f.sizset];break}if(f.nodeType===1){s||(f.sizcache=n,f.sizset=o);if(typeof t!="string"){if(f===t){l=!0;break}}else if(a.filter(t,[f]).length>0){l=f;break}}f=f[e]}r[o]=l}}}function n(e,t,n,r,i,s){for(var o=0,u=r.length;o<u;o++){var a=r[o];if(a){a=a[e];var f=!1;while(a){if(a.sizcache===n){f=r[a.sizset];break}a.nodeType===1&&!s&&(a.sizcache=n,a.sizset=o);if(a.nodeName.toLowerCase()===t){f=a;break}a=a[e]}r[o]=f}}}var r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,i=0,s=Object.prototype.toString,o=!1,u=!0;[0,0].sort(function(){return u=!1,0});var a=function(e,t,n,i){n=n||[],t=t||document;var o=t;if(t.nodeType!==1&&t.nodeType!==9)return[];if(!e||typeof e!="string")return n;var u=[],c,h,d,v,y=!0,w=a.isXML(t),E=e,S,x,T,N;do{r.exec(""),c=r.exec(E);if(c){E=c[3],u.push(c[1]);if(c[2]){v=c[3];break}}}while(c);if(u.length>1&&l.exec(e))if(u.length===2&&f.relative[u[0]])h=m(u[0]+u[1],t);else{h=f.relative[u[0]]?[t]:a(u.shift(),t);while(u.length)e=u.shift(),f.relative[e]&&(e+=u.shift()),h=m(e,h)}else{!i&&u.length>1&&t.nodeType===9&&!w&&f.match.ID.test(u[0])&&!f.match.ID.test(u[u.length-1])&&(S=a.find(u.shift(),t,w),t=S.expr?a.filter(S.expr,S.set)[0]:S.set[0]);if(t){S=i?{expr:u.pop(),set:p(i)}:a.find(u.pop(),u.length!==1||u[0]!=="~"&&u[0]!=="+"||!t.parentNode?t:t.parentNode,w),h=S.expr?a.filter(S.expr,S.set):S.set,u.length>0?d=p(h):y=!1;while(u.length)x=u.pop(),T=x,f.relative[x]?T=u.pop():x="",T==null&&(T=t),f.relative[x](d,T,w)}else d=u=[]}d||(d=h),d||a.error(x||e);if(s.call(d)==="[object Array]")if(!y)n.push.apply(n,d);else if(t&&t.nodeType===1)for(N=0;d[N]!=null;N++)d[N]&&(d[N]===!0||d[N].nodeType===1&&a.contains(t,d[N]))&&n.push(h[N]);else for(N=0;d[N]!=null;N++)d[N]&&d[N].nodeType===1&&n.push(h[N]);else p(d,n);return v&&(a(v,o,n,i),a.uniqueSort(n)),n};a.uniqueSort=function(e){if(v){o=u,e.sort(v);if(o)for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)}return e},a.matches=function(e,t){return a(e,null,null,t)},a.find=function(e,t,n){var r;if(!e)return[];for(var i=0,s=f.order.length;i<s;i++){var o=f.order[i],u;if(u=f.leftMatch[o].exec(e)){var a=u[1];u.splice(1,1);if(a.substr(a.length-1)!=="\\"){u[1]=(u[1]||"").replace(/\\/g,""),r=f.find[o](u,t,n);if(r!=null){e=e.replace(f.match[o],"");break}}}}return r||(r=t.getElementsByTagName("*")),{set:r,expr:e}},a.filter=function(e,t,n,r){var i=e,s=[],o=t,u,l,c=t&&t[0]&&a.isXML(t[0]);while(e&&t.length){for(var h in f.filter)if((u=f.leftMatch[h].exec(e))!=null&&u[2]){var p=f.filter[h],d,v,m=u[1];l=!1,u.splice(1,1);if(m.substr(m.length-1)==="\\")continue;o===s&&(s=[]);if(f.preFilter[h]){u=f.preFilter[h](u,o,n,s,r,c);if(!u)l=d=!0;else if(u===!0)continue}if(u)for(var y=0;(v=o[y])!=null;y++)if(v){d=p(v,u,y,o);var b=r^!!d;n&&d!=null?b?l=!0:o[y]=!1:b&&(s.push(v),l=!0)}if(d!==undefined){n||(o=s),e=e.replace(f.match[h],"");if(!l)return[];break}}if(e===i){if(l!=null)break;a.error(e)}i=e}return o},a.error=function(e){throw"Syntax error, unrecognized expression: "+e};var f={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(e,t){var n=typeof t=="string",r=n&&!/\W/.test(t),i=n&&!r;r&&(t=t.toLowerCase());for(var s=0,o=e.length,u;s<o;s++)if(u=e[s]){while((u=u.previousSibling)&&u.nodeType!==1);e[s]=i||u&&u.nodeName.toLowerCase()===t?u||!1:u===t}i&&a.filter(t,e,!0)},">":function(e,t){var n=typeof t=="string",r,i=0,s=e.length;if(n&&!/\W/.test(t)){t=t.toLowerCase();for(;i<s;i++){r=e[i];if(r){var o=r.parentNode;e[i]=o.nodeName.toLowerCase()===t?o:!1}}}else{for(;i<s;i++)r=e[i],r&&(e[i]=n?r.parentNode:r.parentNode===t);n&&a.filter(t,e,!0)}},"":function(e,r,s){var o=i++,u=t,a;typeof r=="string"&&!/\W/.test(r)&&(r=r.toLowerCase(),a=r,u=n),u("parentNode",r,o,e,a,s)},"~":function(e,r,s){var o=i++,u=t,a;typeof r=="string"&&!/\W/.test(r)&&(r=r.toLowerCase(),a=r,u=n),u("previousSibling",r,o,e,a,s)}},find:{ID:function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return n.length===0?null:n}},TAG:function(e,t){return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(/\\/g,"")+" ";if(s)return e;for(var o=0,u;(u=t[o])!=null;o++)u&&(i^(u.className&&(" "+u.className+" ").replace(/[\t\n]/g," ").indexOf(e)>=0)?n||r.push(u):n&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(e,t){return e[1].toLowerCase()},CHILD:function(e){if(e[1]==="nth"){var t=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}return e[0]=i++,e},ATTR:function(e,t,n,r,i,s){var o=e[1].replace(/\\/g,"");return!s&&f.attrMap[o]&&(e[1]=f.attrMap[o]),e[2]==="~="&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,n,i,s){if(e[1]==="not"){if(!((r.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var o=a.filter(e[3],t,n,!0^s);return n||i.push.apply(i,o),!1}e[3]=a(e[3],null,null,t)}else if(f.match.POS.test(e[0])||f.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&e.type!=="hidden"},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!a(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||e.nodeName.toLowerCase()==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=f.filters[i];if(s)return s(e,n,t,r);if(i==="contains")return(e.textContent||e.innerText||a.getText([e])||"").indexOf(t[3])>=0;if(i==="not"){var o=t[3];for(var u=0,l=o.length;u<l;u++)if(o[u]===e)return!1;return!0}a.error("Syntax error, unrecognized expression: "+i)},CHILD:function(e,t){var n=t[1],r=e;switch(n){case"only":case"first":while(r=r.previousSibling)if(r.nodeType===1)return!1;if(n==="first")return!0;r=e;case"last":while(r=r.nextSibling)if(r.nodeType===1)return!1;return!0;case"nth":var i=t[2],s=t[3];if(i===1&&s===0)return!0;var o=t[0],u=e.parentNode;if(u&&(u.sizcache!==o||!e.nodeIndex)){var a=0;for(r=u.firstChild;r;r=r.nextSibling)r.nodeType===1&&(r.nodeIndex=++a);u.sizcache=o}var f=e.nodeIndex-s;return i===0?f===0:f%i===0&&f/i>=0}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=f.attrHandle[n]?f.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],o=t[4];return r==null?s==="!=":s==="="?i===o:s==="*="?i.indexOf(o)>=0:s==="~="?(" "+i+" ").indexOf(o)>=0:o?s==="!="?i!==o:s==="^="?i.indexOf(o)===0:s==="$="?i.substr(i.length-o.length)===o:s==="|="?i===o||i.substr(0,o.length+1)===o+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],s=f.setFilters[i];if(s)return s(e,n,t,r)}}};a.selectors=f;var l=f.match.POS,c=function(e,t){return"\\"+(t-0+1)};for(var h in f.match)f.match[h]=new RegExp(f.match[h].source+/(?![^\[]*\])(?![^\(]*\))/.source),f.leftMatch[h]=new RegExp(/(^(?:.|\r|\n)*?)/.source+f.match[h].source.replace(/\\(\d+)/g,c));var p=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(d){p=function(e,t){var n=t||[],r=0;if(s.call(e)==="[object Array]")Array.prototype.push.apply(n,e);else if(typeof e.length=="number")for(var i=e.length;r<i;r++)n.push(e[r]);else for(;e[r];r++)n.push(e[r]);return n}}var v;document.documentElement.compareDocumentPosition?v=function(e,t){if(!e.compareDocumentPosition||!t.compareDocumentPosition)return e==t&&(o=!0),e.compareDocumentPosition?-1:1;var n=e.compareDocumentPosition(t)&4?-1:e===t?0:1;return n===0&&(o=!0),n}:"sourceIndex"in document.documentElement?v=function(e,t){if(!e.sourceIndex||!t.sourceIndex)return e==t&&(o=!0),e.sourceIndex?-1:1;var n=e.sourceIndex-t.sourceIndex;return n===0&&(o=!0),n}:document.createRange&&(v=function(e,t){if(!e.ownerDocument||!t.ownerDocument)return e==t&&(o=!0),e.ownerDocument?-1:1;var n=e.ownerDocument.createRange(),r=t.ownerDocument.createRange();n.setStart(e,0),n.setEnd(e,0),r.setStart(t,0),r.setEnd(t,0);var i=n.compareBoundaryPoints(Range.START_TO_END,r);return i===0&&(o=!0),i}),a.getText=function(e){var t="",n;for(var r=0;e[r];r++)n=e[r],n.nodeType===3||n.nodeType===4?t+=n.nodeValue:n.nodeType!==8&&(t+=a.getText(n.childNodes));return t},function(){var e=document.createElement("div"),t="script"+(new Date).getTime();e.innerHTML="<a name='"+t+"'/>";var n=document.documentElement;n.insertBefore(e,n.firstChild),document.getElementById(t)&&(f.find.ID=function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r?r.id===e[1]||typeof r.getAttributeNode!="undefined"&&r.getAttributeNode("id").nodeValue===e[1]?[r]:undefined:[]}},f.filter.ID=function(e,t){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}),n.removeChild(e),n=e=null}(),function(){var e=document.createElement("div");e.appendChild(document.createComment("")),e.getElementsByTagName("*").length>0&&(f.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++)n[i].nodeType===1&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!="undefined"&&e.firstChild.getAttribute("href")!=="#"&&(f.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),document.querySelectorAll&&function(){var e=a,t=document.createElement("div");t.innerHTML="<p class='TEST'></p>";if(!t.querySelectorAll||t.querySelectorAll(".TEST").length!==0){a=function(t,n,r,i){n=n||document;if(!i&&n.nodeType===9&&!a.isXML(n))try{return p(n.querySelectorAll(t),r)}catch(s){}return e(t,n,r,i)};for(var n in e)a[n]=e[n];t=null}}(),function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!e.getElementsByClassName&&e.getElementsByClassName("e").length!==0){e.lastChild.className="e";if(e.getElementsByClassName("e").length===1)return;f.order.splice(1,0,"CLASS"),f.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!="undefined"&&!n)return t.getElementsByClassName(e[1])},e=null}}(),a.contains=document.compareDocumentPosition?function(e,t){return!!(e.compareDocumentPosition(t)&16)}:function(e,t){return e!==t&&(e.contains?e.contains(t):!0)},a.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1};var m=function(e,t){var n=[],r="",i,s=t.nodeType?[t]:t;while(i=f.match.PSEUDO.exec(e))r+=i[0],e=e.replace(f.match.PSEUDO,"");e=f.relative[e]?e+"*":e;for(var o=0,u=s.length;o<u;o++)a(e,s[o],n);return a.filter(r,n)};return a}),STK.register("core.dom.builder",function(e){return function(t,n){var r=typeof t=="string",i=t;r&&(i=e.C("div"),i.innerHTML=t);var s,o;o=e.core.dom.sizzle("[node-type]",i),s={};for(var u=0,f=o.length;u<f;u+=1){var l=o[u].getAttribute("node-type");s[l]||(s[l]=[]),s[l].push(o[u])}var c=t;if(r){c=e.C("buffer");while(i.childNodes[0])c.appendChild(i.childNodes[0])}return{box:c,list:s}}}),STK.register("core.dom.setStyle",function(e){function t(){return"y"in t?t.y:t.y="filters"in e.C("div")}return function(e,n,r){if(t())switch(n){case"opacity":e.style.filter="alpha(opacity="+r*100+")";if(!e.currentStyle||!e.currentStyle.hasLayout)e.style.zoom=1;break;case"float":n="styleFloat";default:e.style[n]=r}else n=="float"&&(n="cssFloat"),e.style[n]=r}}),STK.register("core.dom.insertAfter",function(e){return function(e,t){var n=t.parentNode;n.lastChild==t?n.appendChild(e):n.insertBefore(e,t.nextSibling)}}),STK.register("core.dom.insertBefore",function(e){return function(e,t){var n=t.parentNode;n.insertBefore(e,t)}}),STK.register("core.dom.trimNode",function(e){return function(e){var t=e.childNodes;for(var n=t.length-1;n>=0;n-=1)t[n]&&(t[n].nodeType==3||t[n].nodeType==8)&&e.removeChild(t[n])}}),STK.register("core.dom.removeNode",function(e){return function(t){t=e.E(t)||t;try{t.parentNode.removeChild(t)}catch(n){}}}),STK.register("core.evt.fireEvent",function(e){return function(t,n){var r=e.E(t);if(r.addEventListener){var i=document.createEvent("HTMLEvents");i.initEvent(n,!0,!0),r.dispatchEvent(i)}else r.fireEvent("on"+n)}}),STK.register("core.util.scrollPos",function(e){return function(e){e=e||document;var t=e.documentElement,n=e.body;return{top:Math.max(window.pageYOffset||0,t.scrollTop,n.scrollTop),left:Math.max(window.pageXOffset||0,t.scrollLeft,n.scrollLeft)}}}),STK.register("core.dom.position",function(e){var t=function(t){var n,r,i,s,o,u;return n=t.getBoundingClientRect(),r=e.core.util.scrollPos(),i=t.ownerDocument.body,s=t.ownerDocument.documentElement,o=s.clientTop||i.clientTop||0,u=s.clientLeft||i.clientLeft||0,{l:parseInt(n.left+r.left-u,10)||0,t:parseInt(n.top+r.top-o,10)||0}},n=function(t,n){var r,i;r=[t.offsetLeft,t.offsetTop],i=t.offsetParent;if(i!==t&&i!==n)while(i)r[0]+=i.offsetLeft,r[1]+=i.offsetTop,i=i.offsetParent;if(e.core.util.browser.OPERA!=-1||e.core.util.browser.SAFARI!=-1&&t.style.position=="absolute")r[0]-=document.body.offsetLeft,r[1]-=document.body.offsetTop;t.parentNode?i=t.parentNode:i=null;while(i&&!/^body|html$/i.test(i.tagName)&&i!==n)i.style.display.search(/^inline|table-row.*$/i)&&(r[0]-=i.scrollLeft,r[1]-=i.scrollTop),i=i.parentNode;return{l:parseInt(r[0],10),t:parseInt(r[1],10)}};return function(r,i){if(r==document.body)return!1;if(r.parentNode==null)return!1;if(r.style.display=="none")return!1;var s=e.core.obj.parseParam({parent:null},i);if(r.getBoundingClientRect){if(s.parent){var o=t(r),u=t(s.parent);return{l:o.l-u.l,t:o.t-u.t}}return t(r)}return n(r,s.parent||document.body)}}),STK.register("core.dom.setXY",function(e){return function(t,n){var r=e.core.dom.getStyle(t,"position");r=="static"&&(e.core.dom.setStyle(t,"position","relative"),r="relative");var i=e.core.dom.position(t);if(i!=0){var s={l:parseInt(e.core.dom.getStyle(t,"left"),10),t:parseInt(e.core.dom.getStyle(t,"top"),10)};isNaN(s.l)&&(s.l=r=="relative"?0:t.offsetLeft),isNaN(s.t)&&(s.t=r=="relative"?0:t.offsetTop),n.l!=null&&(t.style.left=n.l-i.l+s.l+"px"),n.t!=null&&(t.style.top=n.t-i.t+s.t+"px")}}}),STK.register("core.str.encodeHTML",function(e){return function(e){if(typeof e!="string")throw"encodeHTML need a string as parameter";return e.replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\'/g,"&#39;").replace(/\u00A0/g,"&nbsp;").replace(/(\u0020|\u000B|\u2028|\u2029|\f)/g,"&#32;")}}),STK.register("core.str.decodeHTML",function(e){return function(e){if(typeof e!="string")throw"decodeHTML need a string as parameter";return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#39;/g,"'").replace(/&nbsp;/g,"聽").replace(/&#32;/g," ").replace(/&amp;/g,"&")}}),STK.register("core.dom.cascadeNode",function(e){return function(t){var n={},r=t.style.display||"";r=r==="none"?"":r;var i=[];return n.setStyle=function(i,s){return e.core.dom.setStyle(t,i,s),i==="display"&&(r=s==="none"?"":s),n},n.insertAfter=function(r){return e.core.dom.insertAfter(r,t),n},n.insertBefore=function(r){return e.core.dom.insertBefore(r,t),n},n.addClassName=function(r){return e.core.dom.addClassName(t,r),n},n.removeClassName=function(r){return e.core.dom.removeClassName(t,r),n},n.trimNode=function(){return e.core.dom.trimNode(t),n},n.removeNode=function(){return e.core.dom.removeNode(t),n},n.on=function(r,s){for(var o=0,u=i.length;o<u;o+=1)if(i[o].fn===s&&i[o].type===r)return n;return i.push({fn:s,type:r}),e.core.evt.addEvent(t,r,s),n},n.unon=function(r,s){for(var o=0,u=i.length;o<u;o+=1)if(i[o].fn===s&&i[o].type===r){e.core.evt.removeEvent(t,s,r),i.splice(o,1);break}return n},n.fire=function(r){return e.core.evt.fireEvent(r,t),n},n.appendChild=function(e){return t.appendChild(e),n},n.removeChild=function(e){return t.removeChild(e),n},n.toggle=function(){return t.style.display==="none"?t.style.display=r:t.style.display="none",n},n.show=function(){return t.style.display==="none"&&(r==="none"?t.style.display="":t.style.display=r),n},n.hidd=function(){return t.style.display!=="none"&&(t.style.display="none"),n},n.hide=n.hidd,n.scrollTo=function(e,r){return e==="left"&&(t.scrollLeft=r),e==="top"&&(t.scrollTop=r),n},n.replaceChild=function(e,r){return t.replaceChild(e,r),n},n.position=function(n){return n!==undefined&&e.core.dom.setXY(t,n),e.core.dom.position(t)},n.setPosition=function(r){return r!==undefined&&e.core.dom.setXY(t,r),n},n.getPosition=function(n){return e.core.dom.position(t)},n.html=function(e){return e!==undefined&&(t.innerHTML=e),t.innerHTML},n.setHTML=function(e){return e!==undefined&&(t.innerHTML=e),n},n.getHTML=function(){return t.innerHTML},n.text=function(n){return n!==undefined&&(t.innerHTML=e.core.str.encodeHTML(n)),e.core.str.decodeHTML(t.innerHTML)},n.ttext=n.text,n.setText=function(r){return r!==undefined&&(t.innerHTML=e.core.str.encodeHTML(r)),n},n.getText=function(){return e.core.str.decodeHTML(t.innerHTML)},n.get=function(n){return n==="node"?t:e.core.dom.getStyle(t,n)},n.getStyle=function(n){return e.core.dom.getStyle(t,n)},n.getOriginNode=function(){return t},n.destroy=function(){for(var n=0,s=i;n<s;n+=1)e.core.evt.removeEvent(t,i[n].fn,i[n].type);r=null,i=null,t=null},n}}),STK.register("core.dom.contains",function(e){return function(e,t){if(e===t)return!1;if(e.compareDocumentPosition)return(e.compareDocumentPosition(t)&16)===16;if(e.contains&&t.nodeType===1)return e.contains(t);while(t=t.parentNode)if(e===t)return!0;return!1}}),STK.register("core.dom.dir",function(e){var t={parent:"parentNode",next:"nextSibling",prev:"previousSibling"},n=function(n,r){r=e.core.obj.parseParam({dir:"parent",expr:undefined,endpoint:document,matchAll:!1},r);var i=t[r.dir],s=r.expr,o=r.endpoint,u=!!r.matchAll;if(!n)throw"core.dom.dir: el is undefined.";if(!i)throw"core.dom.dir: spec.dir is undefined.";var f=[],l=n[i];while(l){if(l.nodeType==1)if(!s||e.core.dom.sizzle.matches(s,[l]).length>0){f.push(l);if(!u)break}if(l==o)break;l=l[i]}return f};return n.parent=function(e,t){return t=t||{},t.dir="parent",n(e,t)},n.prev=function(e,t){return t=t||{},t.dir="prev",n(e,t)},n.next=function(e,t){return t=t||{},t.dir="next",n(e,t)},n}),STK.register("core.dom.firstChild",function(e){var t=e.core.dom.dir;return function(e){if(e.firstElementChild)return e.firstElementChild;var n=e.firstChild;return n&&n.nodeType!=1&&(n=t.next(n)[0]),n}}),STK.register("core.util.hideContainer",function(e){var t,n=function(){t||(t=e.C("div"),t.style.cssText="position:absolute;top:-9999px;left:-9999px;",document.getElementsByTagName("head")[0].appendChild(t))},r={appendChild:function(r){e.core.dom.isNode(r)&&(n(),t.appendChild(r))},removeChild:function(n){e.core.dom.isNode(n)&&t&&t.removeChild(n)}};return r}),STK.register("core.dom.getSize",function(e){var t=function(t){if(!e.core.dom.isNode(t))throw"core.dom.getSize need Element as first parameter";return{width:t.offsetWidth,height:t.offsetHeight}},n=function(e){var n=null;return e.style.display==="none"?(e.style.visibility="hidden",e.style.display="",n=t(e),e.style.display="none",e.style.visibility="visible"):n=t(e),n};return function(t){var r={};return t.parentNode?r=n(t):(e.core.util.hideContainer.appendChild(t),r=n(t),e.core.util.hideContainer.removeChild(t)),r}}),STK.register("core.dom.insertHTML",function(e){return function(t,n,r){t=e.E(t)||document.body,r=r?r.toLowerCase():"beforeend";if(t.insertAdjacentHTML){switch(r){case"beforebegin":return t.insertAdjacentHTML("BeforeBegin",n),t.previousSibling;case"afterbegin":return t.insertAdjacentHTML("AfterBegin",n),t.firstChild;case"beforeend":return t.insertAdjacentHTML("BeforeEnd",n),t.lastChild;case"afterend":return t.insertAdjacentHTML("AfterEnd",n),t.nextSibling}throw'Illegal insertion point -> "'+r+'"'}var i=t.ownerDocument.createRange(),s;switch(r){case"beforebegin":return i.setStartBefore(t),s=i.createContextualFragment(n),t.parentNode.insertBefore(s,t),t.previousSibling;case"afterbegin":if(t.firstChild)return i.setStartBefore(t.firstChild),s=i.createContextualFragment(n),t.insertBefore(s,t.firstChild),t.firstChild;return t.innerHTML=n,t.firstChild;case"beforeend":if(t.lastChild)return i.setStartAfter(t.lastChild),s=i.createContextualFragment(n),t.appendChild(s),t.lastChild;return t.innerHTML=n,t.lastChild;case"afterend":return i.setStartAfter(t),s=i.createContextualFragment(n),t.parentNode.insertBefore(s,t.nextSibling),t.nextSibling}throw'Illegal insertion point -> "'+r+'"'}}),STK.register("core.dom.insertElement",function(e){return function(t,n,r){t=e.E(t)||document.body,r=r?r.toLowerCase():"beforeend";switch(r){case"beforebegin":t.parentNode.insertBefore(n,t);break;case"afterbegin":t.insertBefore(n,t.firstChild);break;case"beforeend":t.appendChild(n);break;case"afterend":t.nextSibling?t.parentNode.insertBefore(n,t.nextSibling):t.parentNode.appendChild(n)}}}),STK.register("core.dom.ready",function(e){var t=[],n=!1,r=e.core.func.getType,i=e.core.util.browser,s=e.core.evt.addEvent,o=function(){return!n&&document.readyState==="complete"?!0:n},u=function(){if(n!=1){n=!0;for(var e=0,i=t.length;e<i;e++)if(r(t[e])==="function")try{t[e].call()}catch(s){}t=[]}},a=function(){if(o())u();else{try{document.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,25);return}u()}},f=function(){o()?u():setTimeout(arguments.callee,25)},l=function(){s(document,"DOMContentLoaded",u)},c=function(){s(window,"load",u)};return o()||(e.IE&&window===window.top&&a(),l(),f(),c()),function(e){o()?r(e)==="function"&&e.call():t.push(e)}}),STK.register("core.dom.isDomReady",function(e){var t=!1;return e.core.dom.ready(function(){t=!0}),function(){return t}}),STK.register("core.dom.lastChild",function(e){var t=e.core.dom.dir;return function(e){if(e.lastElementChild)return e.lastElementChild;var n=e.lastChild;return n&&n.nodeType!=1&&(n=t.prev(n)[0]),n}}),STK.register("core.dom.neighbor",function(e){var t=function(t,n,r){return e.core.dom.dir(t,{dir:n,expr:r})[0]},n=function(n){var r=n,i={getCurrent:function(){return r},setCurrent:function(e){return e&&(r=e),i},finish:function(){var e=r;return r=null,e},parent:function(e){return r=t(r,"parent",e)||r,i},child:function(t){return r=(t?e.core.dom.sizzle(t,r)[0]:e.core.dom.firstChild(r))||r,i},firstChild:function(t){return r=e.core.dom.firstChild(r)||r,i},lastChild:function(t){return r=e.core.dom.lastChild(r)||r,i},prev:function(e){return r=t(r,"prev",e)||r,i},next:function(e){return r=t(r,"next",e)||r,i},destroy:function(){r=null}};return i};return n}),STK.register("core.dom.next",function(e){return function(e){var t=e.nextSibling;while(t&&t.nodeType!==1)t=t.nextSibling;return t}}),STK.register("core.dom.prev",function(e){return function(e){var t=e.previousSibling;while(t&&t.nodeType!==1)t=t.previousSibling;return t}}),STK.register("core.dom.replaceNode",function(e){return function(e,t){if(e==null||t==null)throw"replaceNode need node as paramster";t.parentNode.replaceChild(e,t)}}),STK.register("core.dom.selector",function(e){var t=function(t,n,r,i){var s=[];if(typeof t=="string"){var o=e.core.dom.sizzle(t,n,r,i);for(var u=0,f=o.length;u<f;u+=1)s[u]=o[u]}else if(e.core.dom.isNode(t))n?e.core.dom.contains(n,t)&&(s=[t]):s=[t];else if(e.core.arr.isArray(t))if(n)for(var u=0,f=t.length;u<f;u+=1)e.core.dom.contains(n,t[u])&&s.push(t[u]);else s=t;return s};return function(n,r,i,s){var o=t.apply(window,arguments);return o.on=function(t,n){for(var r=0,i=o.length;r<i;r+=1)e.core.evt.addEvent(o[r],t,n);return o},o.css=function(t,n){for(var r=0,i=o.length;r<i;r+=1)e.core.dom.setStyle(o[r],t,n);return o},o.show=function(){for(var e=0,t=o.length;e<t;e+=1)o[e].style.display="";return o},o.hidd=function(){for(var e=0,t=o.length;e<t;e+=1)o[e].style.display="none";return o},o.hide=o.hidd,o}}),STK.register("core.dom.selectText",function(e){return function(e,t){var n=t.start,r=t.len||0;e.focus();if(e.setSelectionRange)e.setSelectionRange(n,n+r);else if(e.createTextRange){var i=e.createTextRange();i.collapse(1),i.moveStart("character",n),i.moveEnd("character",r),i.select()}}}),STK.register("core.dom.setStyles",function(e){return function(t,n,r){if(!e.core.arr.isArray(t))var t=[t];for(var i=0,s=t.length;i<s;i++)e.core.dom.setStyle(t[i],n,r);return t}}),STK.register("core.dom.textSelectArea",function(e){return function(e){var t={start:0,len:0};if(typeof e.selectionStart=="number")t.start=e.selectionStart,t.len=e.selectionEnd-e.selectionStart;else if(typeof document.selection!="undefined"){var n=document.selection.createRange();if(e.tagName==="INPUT")var r=e.createTextRange();else if(e.tagName==="TEXTAREA"){var r=n.duplicate();r.moveToElementText(e)}r.setEndPoint("EndToStart",n),t.start=r.text.length,t.len=n.text.length;var i=0;r.moveEnd("character",e.value.length-t.start),r.moveStart("character",t.start);for(var s=t.start;s<e.value.length;s+=1){if(!(r.compareEndPoints("StartToStart",n)<0))break;r.moveStart("character",1),i+=2}t.start+=i,n=null,r=null}return t}}),STK.register("core.dom.toggleClassName",function(e){return function(t,n){e.core.dom.hasClassName(t,n)?e.core.dom.removeClassName(t,n):e.core.dom.addClassName(t,n)}}),STK.register("core.util.getUniqueKey",function(e){var t=(new Date).getTime().toString(),n=1;return function(){return t+n++}}),STK.register("core.dom.uniqueID",function(e){return function(t){return t&&(t.uniqueID||(t.uniqueID=e.core.util.getUniqueKey()))}}),STK.register("core.evt.custEvent",function(e){var t="__custEventKey__",n=1,r={},i=function(e,n){var i=typeof e=="number"?e:e[t];return i&&r[i]&&{obj:typeof n=="string"?r[i][n]:r[i],key:i}},s={},o=function(e,t,n,r,s){if(e&&typeof t=="string"&&n){var o=i(e,t);if(!o||!o.obj)throw"custEvent ("+t+") is undefined !";return o.obj.push({fn:n,data:r,once:s}),o.key}},u=function(t,n,r,s){var o=!0,u=function(){o=!1};if(t&&typeof n=="string"){var a=i(t,n),f;if(a&&(f=a.obj)){r=typeof r!="undefined"&&[].concat(r)||[];for(var l=f.length-1;l>-1&&f[l];l--){var c=f[l].fn,h=f[l].once;if(c&&c.apply)try{c.apply(t,[{obj:t,type:n,data:f[l].data,preventDefault:u}].concat(r)),h&&f.splice(l,1)}catch(p){e.log("[error][custEvent]"+p.message,p,p.stack)}}return o&&e.core.func.getType(s)==="function"&&s(),a.key}}},a={define:function(e,i){if(e&&i){var s=typeof e=="number"?e:e[t]||(e[t]=n++),o=r[s]||(r[s]={});i=[].concat(i);for(var u=0;u<i.length;u++)o[i[u]]||(o[i[u]]=[]);return s}},undefine:function(e,n){if(e){var i=typeof e=="number"?e:e[t];if(i&&r[i])if(n){n=[].concat(n);for(var s=0;s<n.length;s++)n[s]in r[i]&&delete r[i][n[s]]}else delete r[i]}},add:function(e,t,n,r){return o(e,t,n,r,!1)},once:function(e,t,n,r){return o(e,t,n,r,!0)},remove:function(t,n,r){if(t){var s=i(t,n),o,u;if(s&&(o=s.obj)){if(e.core.arr.isArray(o))if(r){var a=0;while(o[a]){if(o[a].fn===r)break;a++}o.splice(a,1)}else o.splice(0,o.length);else for(var a in o)o[a]=[];return s.key}}},fire:function(e,t,n,r){return u(e,t,n,r)},hook:function(e,i,o){if(!(!e||!i||!o)){var l=[],p=e[t],v=p&&r[p],m,g=i[t]||(i[t]=n++),y;if(v){y=s[p+"_"+g]||(s[p+"_"+g]={});var w=function(e){var t=!0;u(i,y[e.type].type,Array.prototype.slice.apply(arguments,[1,arguments.length]),function(){t=!1}),t&&e.preventDefault()};for(var E in o){var S=o[E];!y[E]&&(m=v[E])&&(m.push({fn:w,data:undefined}),y[E]={fn:w,type:S},l.push(S))}a.define(i,l)}}},unhook:function(e,n,r){if(!(!e||!n||!r)){var i=e[t],o=n[t],u=s[i+"_"+o];if(u)for(var l in r){var c=r[l];u[l]&&a.remove(e,l,u[l].fn)}}},destroy:function(){r={},n=1,s={}}};return a}),STK.register("core.json.queryToJson",function(e){return function(t,n){var r=e.core.str.trim(t).split("&"),i={},s=function(e){return n?decodeURIComponent(e):e};for(var o=0,u=r.length;o<u;o++)if(r[o]){var f=r[o].split("="),l=f[0],c=f[1];f.length<2&&(c=l,l="$nullName"),i[l]?(e.core.arr.isArray(i[l])!=1&&(i[l]=[i[l]]),i[l].push(s(c))):i[l]=s(c)}return i}}),STK.register("core.evt.getEvent",function(e){return function(){return document.addEventListener?function(){var e=arguments.callee,t;do{t=e.arguments[0];if(t&&(t.constructor==Event||t.constructor==MouseEvent||t.constructor==KeyboardEvent))return t}while(e=e.caller);return t}:function(e,t,n){return window.event}}()}),STK.register("core.evt.fixEvent",function(e){var t="clientX clientY pageX pageY screenX screenY".split(" ");return function(t){t=t||e.core.evt.getEvent(),t.target||(t.target=t.srcElement||document);if(t.pageX==null&&t.clientX!=null){var n=document.documentElement,r=document.body;t.pageX=t.clientX+(n.scrollLeft||r&&r.scrollLeft||0)-(n.clientLeft||r&&r.clientLeft||0),t.pageY=t.clientY+(n.scrollTop||r&&r.scrollTop||0)-(n.clientTop||r&&r.clientTop||0)}return!t.which&&t.button&&(t.button&1?t.which=1:t.button&4?t.which=2:t.button&2&&(t.which=3)),t.relatedTarget===undefined&&(t.relatedTarget=t.fromElement||t.toElement),t.layerX==null&&t.offsetX!=null&&(t.layerX=t.offsetX,t.layerY=t.offsetY),t}}),STK.register("core.obj.isEmpty",function(e){return function(e,t){for(var n in e)if(t||e.hasOwnProperty(n))return!1;return!0}}),STK.register("core.evt.delegatedEvent",function(e){var t=function(t,n){for(var r=0,i=t.length;r<i;r+=1)if(e.core.dom.contains(t[r],n))return!0;return!1};return function(n,r){if(!e.core.dom.isNode(n))throw"core.evt.delegatedEvent need an Element as first Parameter";r||(r=[]),e.core.arr.isArray(r)&&(r=[r]);var i={},s=function(t){var n=e.core.evt.fixEvent(t),r=n.target,i=t.type;o(r,i,n)},o=function(s,o,u){var f=null,l=function(){var t,r,i;return t=s.getAttribute("action-target"),t&&(r=e.core.dom.sizzle(t,n),r.length&&(i=u.target=r[0])),l=e.core.func.empty,i},h=function(){var t=l()||s;return i[o]&&i[o][f]?i[o][f]({evt:u,el:t,box:n,data:e.core.json.queryToJson(t.getAttribute("action-data")||"")}):!0};if(t(r,s))return!1;if(!e.core.dom.contains(n,s))return!1;while(s&&s!==n){if(s.nodeType===1){f=s.getAttribute("action-type");if(f&&h()===!1)break}s=s.parentNode}},u={};return u.add=function(t,r,o){i[r]||(i[r]={},e.core.evt.addEvent(n,r,s));var u=i[r];u[t]=o},u.remove=function(t,r){i[r]&&(delete i[r][t],e.core.obj.isEmpty(i[r])&&(delete i[r],e.core.evt.removeEvent(n,r,s)))},u.pushExcept=function(e){r.push(e)},u.removeExcept=function(e){if(!e)r=[];else for(var t=0,n=r.length;t<n;t+=1)r[t]===e&&r.splice(t,1)},u.clearExcept=function(e){r=[]},u.fireAction=function(t,r,s,o){var u="";o&&o.actionData&&(u=o.actionData),i[r]&&i[r][t]&&i[r][t]({evt:s,el:null,box:n,data:e.core.json.queryToJson(u),fireFrom:"fireAction"})},u.fireInject=function(t,r,s){var o=t.getAttribute("action-type"),u=t.getAttribute("action-data");o&&i[r]&&i[r][o]&&i[r][o]({evt:s,el:t,box:n,data:e.core.json.queryToJson(u||""),fireFrom:"fireInject"})},u.fireDom=function(e,t,n){o(e,t,n||{})},u.destroy=function(){for(var t in i){for(var r in i[t])delete i[t][r];delete i[t],e.core.evt.removeEvent(n,t,s)}},u}}),STK.register("core.evt.getActiveElement",function(e){return function(){try{var t=e.core.evt.getEvent();return document.activeElement?document.activeElement:t.explicitOriginalTarget}catch(n){return document.body}}}),STK.register("core.evt.hasEvent",function(e){var t={};return function(n,r){if(typeof r!="string")throw new Error("[STK.core.evt.hasEvent] tagName is not a String!");r=r.toLowerCase(),n="on"+n;if(t[r]&&t[r][n]!==undefined)return t[r][n];var i=e.C(r),s=n in i;return s||(i.setAttribute(n,"return;"),s=typeof i[n]=="function"),t[r]||(t[r]={}),t[r][n]=s,i=null,s}}),STK.register("core.evt.hitTest",function(e){function t(t){var n=STK.E(t),r=e.core.dom.position(n),i={left:r.l,top:r.t,right:r.l+n.offsetWidth,bottom:r.t+n.offsetHeight};return i}return function(n,r){var i=t(n);if(r==null)r=e.core.evt.getEvent();else{if(r.nodeType==1){var s=t(r);return i.right>s.left&&i.left<s.right&&i.bottom>s.top&&i.top<s.bottom?!0:!1}if(r.clientX==null)throw"core.evt.hitTest: ["+r+":oEvent] is not a valid value"}var o=e.core.util.scrollPos(),u=r.clientX+o.left,f=r.clientY+o.top;return u>=i.left&&u<=i.right&&f>=i.top&&f<=i.bottom}}),STK.register("core.evt.stopEvent",function(e){return function(t){return t=t||e.core.evt.getEvent(),t.preventDefault?(t.preventDefault(),t.stopPropagation()):(t.cancelBubble=!0,t.returnValue=!1),!1}}),STK.register("core.evt.preventDefault",function(e){return function(t){t=t||e.core.evt.getEvent(),t.preventDefault?t.preventDefault():t.returnValue=!1}}),STK.register("core.evt.hotKey",function(e){var t=e.core.dom.uniqueID,n={reg1:/^keypress|keydown|keyup$/,keyMap:{27:"esc",9:"tab",32:"space",10:"enter",13:"enter",8:"backspace",145:"scrollclock",20:"capslock",144:"numlock",19:"pause",45:"insert",36:"home",46:"delete",35:"end",33:"pageup",34:"pagedown",37:"left",38:"up",39:"right",40:"down",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",191:"/",17:"ctrl",16:"shift",109:"-",107:"=",219:"[",221:"]",220:"\\",222:"'",187:"=",188:",",189:"-",190:".",191:"/",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",110:".",111:"/"},keyEvents:{}};n.preventDefault=function(){this.returnValue=!1},n.handler=function(e){e=e||window.event,e.target||(e.target=e.srcElement||document),!e.which&&(e.charCode||e.charCode===0?e.charCode:e.keyCode)&&(e.which=e.charCode||e.keyCode),e.preventDefault||(e.preventDefault=n.preventDefault);var r=t(this),i,s;if(r&&(i=n.keyEvents[r])&&(s=i[e.type])){var o;switch(e.type){case"keypress":if(e.ctrlKey||e.altKey)return;e.which==13&&(o=n.keyMap[13]),e.which==32&&(o=n.keyMap[32]),e.which>=33&&e.which<=126&&(o=String.fromCharCode(e.which));break;case"keyup":case"keydown":n.keyMap[e.which]&&(o=n.keyMap[e.which]),o||(e.which>=48&&e.which<=57?o=String.fromCharCode(e.which):e.which>=65&&e.which<=90&&(o=String.fromCharCode(e.which+32))),o&&e.type=="keydown"&&(i.linkedKey+=i.linkedKey?">"+o:o,e.altKey&&(o="alt+"+o),e.shiftKey&&(o="shift+"+o),e.ctrlKey&&(o="ctrl+"+o))}var u=/^select|textarea|input$/.test(e.target.nodeName.toLowerCase());if(o){var a=[],f=!1;i.linkedKey&&i.linkKeyStr&&(i.linkKeyStr.indexOf(" "+i.linkedKey)!=-1?(i.linkKeyStr.indexOf(" "+i.linkedKey+" ")!=-1&&(a=a.concat(s[i.linkedKey]),i.linkedKey=""),f=!0):i.linkedKey=""),f||(a=a.concat(s[o]));for(var l=0;l<a.length;l++)a[l]&&(!a[l].disableInInput||!u)&&a[l].fn.apply(this,[e,a[l].key])}}};var r=function(t,r,i,s){var o={};if(!e.core.dom.isNode(t)||e.core.func.getType(i)!=="function")return o;if(typeof r!="string"||!(r=r.replace(/\s*/g,"")))return o;s||(s={}),s.disableInInput||(s.disableInInput=!1),s.type||(s.type="keypress"),s.type=s.type.replace(/\s*/g,"");if(!n.reg1.test(s.type)||s.disableInInput&&/^select|textarea|input$/.test(t.nodeName.toLowerCase()))return o;if(r.length>1||s.type!="keypress")r=r.toLowerCase();if(!/(^(\+|>)$)|(^([^\+>]+)$)/.test(r)){var u="";if(/((ctrl)|(shift)|(alt))\+(\+|([^\+]+))$/.test(r))r.indexOf("ctrl+")!=-1&&(u+="ctr+"),r.indexOf("shift+")!=-1&&(u+="shift+"),r.indexOf("alt+")!=-1&&(u+="alt+"),u+=r.match(/\+(([^\+]+)|(\+))$/)[1];else{if(!(!/(^>)|(>$)|>>/.test(r)&&r.length>2))return o;o.linkFlag=!0}s.type="keydown"}return o.keys=r,o.fn=i,o.opt=s,o},i={add:function(s,o,u,f){if(e.core.arr.isArray(o))for(var l=0;l<o.length;l++)i.add(s,o[l],u,f);else{var h=r(s,o,u,f);if(!h.keys)return;o=h.keys,u=h.fn,f=h.opt;var p=h.linkFlag,v=t(s);n.keyEvents[v]||(n.keyEvents[v]={linkKeyStr:"",linkedKey:""}),n.keyEvents[v].handler||(n.keyEvents[v].handler=function(){n.handler.apply(s,arguments)}),p&&n.keyEvents[v].linkKeyStr.indexOf(" "+o+" ")==-1&&(n.keyEvents[v].linkKeyStr+=" "+o+" ");var m=f.type;n.keyEvents[v][m]||(n.keyEvents[v][m]={},e.core.evt.addEvent(s,m,n.keyEvents[v].handler)),n.keyEvents[v][m][o]||(n.keyEvents[v][m][o]=[]),n.keyEvents[v][m][o].push({fn:u,disableInInput:f.disableInInput,key:o})}},remove:function(s,o,u,f){if(e.core.arr.isArray(o))for(var l=0;l<o.length;l++)i.remove(s,o[l],u,f);else{var h=r(s,o,u,f);if(!h.keys)return;o=h.keys,u=h.fn,f=h.opt;var p=h.linkFlag,v=t(s),m,g,y,w=f.type;if(v&&(m=n.keyEvents[v])&&(g=m[w])&&m.handler&&(y=g[o])){for(var l=0;l<y.length;)y[l].fn===u?y.splice(l,1):l++;y.length<1&&delete g[o];var E=!1;for(var S in g){E=!0;break}E||(e.core.evt.removeEvent(s,w,m.handler),delete m[w]),p&&m.linkKeyStr&&(m.linkKeyStr=m.linkKeyStr.replace(" "+o+" ",""))}}}};return i}),STK.register("core.evt.eventName",function(e){var t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};return function(n){if(n==="mousewheel")return"onmousewheel"in document?"mousewheel":"DOMMouseScroll";if(n==="transitionend"){var r=e.C("div");for(var i in t)if(i in r.style)return t[i]}return n}}),STK.register("core.func.bind",function(e){return function(t,n,r){return r=e.core.arr.isArray(r)?r:[r],function(){return n.apply(t,r)}}}),STK.register("core.func.memorize",function(e){return function(e,t){if(typeof e!="function")throw"core.func.memorize need a function as first parameter";t=t||{};var n={};return t.timeout&&setInterval(function(){n={}},t.timeout),function(){var r=Array.prototype.join.call(arguments,"_");return r in n||(n[r]=e.apply(t.context||{},arguments)),n[r]}}}),STK.register("core.func.methodBefore",function(e){return function(){var t=!1,n=[],r={};return r.add=function(r,i){var s=e.core.obj.parseParam({args:[],pointer:window,top:!1},i);return s.top==1?n.unshift([r,s.args,s.pointer]):n.push([r,s.args,s.pointer]),!t},r.start=function(){var e,r,i,s,o;if(t!=1){t=!0;for(e=0,r=n.length;e<r;e++)i=n[e][0],s=n[e][1],o=n[e][2],i.apply(o,s)}},r.reset=function(){n=[],t=!1},r.getList=function(){return n},r}}),STK.register("core.func.timedChunk",function(e){var t={process:function(e){typeof e=="function"&&e()},context:{},callback:null,delay:25,execTime:50};return function(n,r){if(!e.core.arr.isArray(n))throw"core.func.timedChunk need an array as first parameter";var i=n.concat(),s=e.core.obj.parseParam(t,r),o=null,u=function(){var e=+(new Date);do s.process.call(s.context,i.shift());while(i.length>0&&+(new Date)-e<s.execTime);i.length<=0?s.callback&&s.callback(n):setTimeout(arguments.callee,s.delay)};o=setTimeout(u,s.delay)}}),STK.register("core.io.getXHR",function(e){return function(){var e=!1;try{e=new XMLHttpRequest}catch(t){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(n){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(r){e=!1}}}return e}}),STK.register("core.str.parseURL",function(e){return function(e){var t=/^(?:([A-Za-z]+):(\/{0,3}))?([0-9.\-A-Za-z]+\.[0-9A-Za-z]+)?(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,n=["url","scheme","slash","host","port","path","query","hash"],r=t.exec(e),i={};for(var s=0,o=n.length;s<o;s+=1)i[n[s]]=r[s]||"";return i}}),STK.register("core.json.jsonToQuery",function(e){var t=function(t,n){return t=t==null?"":t,t=e.core.str.trim(t.toString()),n?encodeURIComponent(t):t};return function(e,n){var r=[];if(typeof e=="object")for(var i in e){if(i==="$nullName"){r=r.concat(e[i]);continue}if(e[i]instanceof Array)for(var s=0,o=e[i].length;s<o;s++)r.push(i+"="+t(e[i][s],n));else typeof e[i]!="function"&&r.push(i+"="+t(e[i],n))}return r.length?r.join("&"):""}}),STK.register("core.util.URL",function(e){return function(t,n){var r=e.core.obj.parseParam({isEncodeQuery:!1,isEncodeHash:!1},n||{}),i={},s=e.core.str.parseURL(t),o=e.core.json.queryToJson(s.query),u=e.core.json.queryToJson(s.hash);return i.setParam=function(e,t){return o[e]=t,this},i.getParam=function(e){return o[e]},i.setParams=function(e){for(var t in e)i.setParam(t,e[t]);return this},i.setHash=function(e,t){return u[e]=t,this},i.getHash=function(e){return u[e]},i.valueOf=i.toString=function(){var t=[],n=e.core.json.jsonToQuery(o,r.isEncodeQuery),i=e.core.json.jsonToQuery(u,r.isEncodeQuery);return s.scheme!=""&&(t.push(s.scheme+":"),t.push(s.slash)),s.host!=""&&(t.push(s.host),s.port!=""&&(t.push(":"),t.push(s.port))),t.push("/"),t.push(s.path),n!=""&&t.push("?"+n),i!=""&&t.push("#"+i),t.join("")},i}}),STK.register("core.json.strToJson",function(e){var t,n,r={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},i,s=function(e){throw{name:"SyntaxError",message:e,at:t,text:i}},o=function(e){return e&&e!==n&&s("Expected '"+e+"' instead of '"+n+"'"),n=i.charAt(t),t+=1,n},u=function(){var e,t="";n==="-"&&(t="-",o("-"));while(n>="0"&&n<="9")t+=n,o();if(n==="."){t+=".";while(o()&&n>="0"&&n<="9")t+=n}if(n==="e"||n==="E"){t+=n,o();if(n==="-"||n==="+")t+=n,o();while(n>="0"&&n<="9")t+=n,o()}e=+t;if(!isNaN(e))return e;s("Bad number")},a=function(){var e,t,i="",u;if(n==='"')while(o()){if(n==='"')return o(),i;if(n==="\\"){o();if(n==="u"){u=0;for(t=0;t<4;t+=1){e=parseInt(o(),16);if(!isFinite(e))break;u=u*16+e}i+=String.fromCharCode(u)}else{if(typeof r[n]!="string")break;i+=r[n]}}else i+=n}s("Bad string")},f=function(){while(n&&n<=" ")o()},l=function(){switch(n){case"t":return o("t"),o("r"),o("u"),o("e"),!0;case"f":return o("f"),o("a"),o("l"),o("s"),o("e"),!1;case"n":return o("n"),o("u"),o("l"),o("l"),null}s("Unexpected '"+n+"'")},c,h=function(){var e=[];if(n==="["){o("["),f();if(n==="]")return o("]"),e;while(n){e.push(c()),f();if(n==="]")return o("]"),e;o(","),f()}}s("Bad array")},p=function(){var e,t={};if(n==="{"){o("{"),f();if(n==="}")return o("}"),t;while(n){e=a(),f(),o(":"),Object.hasOwnProperty.call(t,e)&&s('Duplicate key "'+e+'"'),t[e]=c(),f();if(n==="}")return o("}"),t;o(","),f()}}s("Bad object")};return c=function(){f();switch(n){case"{":return p();case"[":return h();case'"':return a();case"-":return u();default:return n>="0"&&n<="9"?u():l()}},function(e,r){if(window.JSON&&window.JSON.parse)return window.JSON.parse(e,r);var o;return i=e,t=0,n=" ",o=c(),f(),n&&s("Syntax error"),typeof r=="function"?function u(e,t){var n,i,s=e[t];if(s&&typeof s=="object")for(n in s)Object.hasOwnProperty.call(s,n)&&(i=u(s,n),i!==undefined?s[n]=i:delete s[n]);return r.call(e,t,s)}({"":o},""):o}}),STK.register("core.io.ajax",function($){return function(oOpts){var opts=$.core.obj.parseParam({url:"",charset:"UTF-8",timeout:3e4,args:{},onComplete:null,onTimeout:$.core.func.empty,uniqueID:null,onFail:$.core.func.empty,method:"get",asynchronous:!0,header:{},isEncode:!1,responseType:"json"},oOpts);if(opts.url=="")throw"ajax need url in parameters object";var tm,trans=$.core.io.getXHR(),cback=function(){if(trans.readyState==4){clearTimeout(tm);var data="";if(opts.responseType==="xml")data=trans.responseXML;else if(opts.responseType==="text")data=trans.responseText;else try{trans.responseText&&typeof trans.responseText=="string"?data=eval("("+trans.responseText+")"):data={}}catch(exp){data=opts.url+"return error : data error"}trans.status==200?opts.onComplete!=null&&opts.onComplete(data):trans.status!=0&&opts.onFail!=null&&opts.onFail(data,trans)}else opts.onTraning!=null&&opts.onTraning(trans)};trans.onreadystatechange=cback,opts.header["Content-Type"]||(opts.header["Content-Type"]="application/x-www-form-urlencoded"),opts.header["X-Requested-With"]||(opts.header["X-Requested-With"]="XMLHttpRequest");if(opts.method.toLocaleLowerCase()=="get"){var url=$.core.util.URL(opts.url,{isEncodeQuery:opts.isEncode});url.setParams(opts.args),url.setParam("__rnd",(new Date).valueOf()),trans.open(opts.method,url.toString(),opts.asynchronous);try{for(var k in opts.header)trans.setRequestHeader(k,opts.header[k])}catch(exp){}trans.send("")}else{trans.open(opts.method,opts.url,opts.asynchronous);try{for(var k in opts.header)trans.setRequestHeader(k,opts.header[k])}catch(exp){}trans.send($.core.json.jsonToQuery(opts.args,opts.isEncode))}return opts.timeout&&(tm=setTimeout(function(){try{trans.abort(),opts.onTimeout({},trans),opts.onFail({},trans)}catch(e){}},opts.timeout)),trans}}),STK.register("core.io.scriptLoader",function(e){var t={},n={url:"",charset:"UTF-8",timeout:3e4,args:{},onComplete:e.core.func.empty,onTimeout:e.core.func.empty,isEncode:!1,uniqueID:null};return function(r){var i,s,o=e.core.obj.parseParam(n,r);if(o.url=="")throw"scriptLoader: url is null";var u=o.uniqueID||e.core.util.getUniqueKey();return i=t[u],i!=null&&e.IE!=1&&(e.core.dom.removeNode(i),i=null),i==null&&(i=t[u]=e.C("script")),i.charset=o.charset,i.id="scriptRequest_script_"+u,i.type="text/javascript",o.onComplete!=null&&(e.IE?i.onreadystatechange=function(){if(i.readyState.toLowerCase()=="loaded"||i.readyState.toLowerCase()=="complete"){try{clearTimeout(s),document.getElementsByTagName("head")[0].removeChild(i),i.onreadystatechange=null}catch(e){}o.onComplete()}}:i.onload=function(){try{clearTimeout(s),e.core.dom.removeNode(i)}catch(t){}o.onComplete()}),i.src=e.core.util.URL(o.url,{isEncodeQuery:o.isEncode}).setParams(o.args).toString(),document.getElementsByTagName("head")[0].appendChild(i),o.timeout>0&&(s=setTimeout(function(){try{document.getElementsByTagName("head")[0].removeChild(i)}catch(e){}o.onTimeout()},o.timeout)),i}}),STK.register("core.io.jsonp",function(e){return function(t){var n=e.core.obj.parseParam({url:"",charset:"UTF-8",timeout:3e4,args:{},onComplete:null,onTimeout:null,responseName:null,isEncode:!1,varkey:"callback"},t),r=-1,i=n.responseName||"STK_"+e.core.util.getUniqueKey();n.args[n.varkey]=i;var s=n.onComplete,o=n.onTimeout;return window[i]=function(e){r!=2&&s!=null&&(r=1,s(e))},n.onComplete=null,n.onTimeout=function(){r!=1&&o!=null&&(r=2,o())},e.core.io.scriptLoader(n)}}),STK.register("core.util.templet",function(e){return function(e,t){return e.replace(/#\{(.+?)\}/ig,function(){var e=arguments[1].replace(/\s/ig,""),n=arguments[0],r=e.split("||");for(var i=0,s=r.length;i<s;i+=1){if(/^default:.*$/.test(r[i])){n=r[i].replace(/^default:/,"");break}if(t[r[i]]!==undefined){n=t[r[i]];break}}return n})}}),STK.register("core.io.getIframeTrans",function(e){var t='<iframe id="#{id}" name="#{id}" height="0" width="0" frameborder="no"></iframe>';return function(n){var r,i,s;return i=e.core.obj.parseParam({id:"STK_iframe_"+e.core.util.getUniqueKey()},n),s={},r=e.C("DIV"),r.innerHTML=e.core.util.templet(t,i),e.core.util.hideContainer.appendChild(r),s.getId=function(){return i.id},s.destroy=function(){r.innerHTML="";try{r.getElementsByTagName("iframe")[0].src="about:blank"}catch(t){}e.core.util.hideContainer.removeChild(r),r=null},s}}),STK.register("core.io.require",function(e){var t="//js.t.sinajs.cn/STK/js/",n=function(e,t){var n=t.split("."),r=e,i=null;while(i=n.shift()){r=r[i];if(r===undefined)return!1}return!0},r=[],i=function(t){return e.core.arr.indexOf(t,r)!==-1?!1:(r.push(t),e.core.io.scriptLoader({url:t,callback:function(){e.core.arr.foreach(r,function(e,n){if(e===t)return r.splice(n,1),!1})}}),!1)},s=function(r,s,o){var u=null;for(var f=0,l=r.length;f<l;f+=1){var h=r[f];typeof h=="string"?n(e,h)||i(t+h.replace(/\./ig,"/")+".js"):n(window,h.NS)||i(h.url)}var p=function(){for(var t=0,i=r.length;t<i;t+=1){var f=r[t];if(typeof f=="string"){if(!n(e,f))return u=setTimeout(p,25),!1}else if(!n(window,f.NS))return u=setTimeout(p,25),!1}clearTimeout(u),s.apply({},[].concat(o))};u=setTimeout(p,25)};return s.setBaseURL=function(e){if(typeof e!="string")throw"[STK.kit.extra.require.setBaseURL] need string as frist parameter";t=e},s}),STK.register("core.io.ijax",function(e){return function(t){var n,r,i,s,o,u,f;n=e.core.obj.parseParam({url:"",form:null,args:{},uniqueID:null,timeout:3e4,onComplete:e.core.func.empty,onTimeout:e.core.func.empty,onFail:e.core.func.empty,asynchronous:!0,isEncode:!0,abaurl:null,responseName:null,varkey:"callback",abakey:"callback"},t),f={};if(n.url=="")throw"ijax need url in parameters object";if(!n.form)throw"ijax need form in parameters object";return r=e.core.io.getIframeTrans(),i=n.responseName||"STK_ijax_"+e.core.util.getUniqueKey(),u={},u[n.varkey]=i,n.abaurl&&(n.abaurl=e.core.util.URL(n.abaurl).setParams(u),u={},u[n.abakey]=n.abaurl.toString()),n.url=e.core.util.URL(n.url,{isEncodeQuery:n.isEncode}).setParams(u).setParams(n.args),o=function(){window[i]=null,r.destroy(),r=null,clearTimeout(s)},s=setTimeout(function(){try{n.onTimeout(),n.onFail()}catch(e){}finally{o()}},n.timeout),window[i]=function(e,t){try{n.onComplete(e,t)}catch(r){}finally{o()}},n.form.action=n.url.toString(),n.form.target=r.getId(),n.form.submit(),f.abort=o,f}}),STK.register("core.json.clone",function(e){function t(e){var n;if(e instanceof Array){n=[];var r=e.length;while(r--)n[r]=t(e[r]);return n}if(e instanceof Object){n={};for(var i in e)n[i]=t(e[i]);return n}return e}return t}),STK.register("core.json.include",function(e){return function(e,t){for(var n in t)if(typeof t[n]=="object")if(t[n]instanceof Array){if(!(e[n]instanceof Array))return!1;if(t[n].length!==e[n].length)return!1;for(var r=0,i=t[n].length;r<i;r+=1)if(!arguments.callee(t[n][r],e[n][r]))return!1}else{if(typeof e[n]!="object")return!1;if(!arguments.callee(t[n],e[n]))return!1}else if(typeof t[n]=="number"||typeof t[n]=="string"){if(t[n]!==e[n])return!1}else if(t[n]!==undefined&&t[n]!==null){if(e[n]===undefined||e[n]===null)return!1;if(!t[n].toString||!e[n].toString)throw"json1[k] or json2[k] do not have toString method";if(t[n].toString()!==e[n].toString())return!1}return!0}}),STK.register("core.json.compare",function(e){return function(t,n){return e.core.json.include(t,n)&&e.core.json.include(n,t)?!0:!1}}),STK.register("core.json.jsonToStr",function(e){function t(e,r){var i,s,a,l,c=o,p,d=r[e];d&&typeof d=="object"&&typeof d.toJSON=="function"&&(d=d.toJSON(e)),typeof f=="function"&&(d=f.call(r,e,d));switch(typeof d){case"string":return n(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";o+=u,p=[];if(Object.prototype.toString.apply(d)==="[object Array]"){l=d.length;for(i=0;i<l;i+=1)p[i]=t(i,d)||"null";return a=p.length===0?"[]":o?"[\n"+o+p.join(",\n"+o)+"\n"+c+"]":"["+p.join(",")+"]",o=c,a}if(f&&typeof f=="object"){l=f.length;for(i=0;i<l;i+=1)s=f[i],typeof s=="string"&&(a=t(s,d),a&&p.push(n(s)+(o?": ":":")+a))}else for(s in d)Object.hasOwnProperty.call(d,s)&&(a=t(s,d),a&&p.push(n(s)+(o?": ":":")+a));return a=p.length===0?"{}":o?"{\n"+o+p.join(",\n"+o)+"\n"+c+"}":"{"+p.join(",")+"}",o=c,a}}function n(e){return s.lastIndex=0,s.test(e)?'"'+e.replace(s,function(e){var t=a[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function r(e){return e<10?"0"+e:e}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+r(this.getUTCMonth()+1)+"-"+r(this.getUTCDate())+"T"+r(this.getUTCHours())+":"+r(this.getUTCMinutes())+":"+r(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var i=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o,u,a={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},f;return function(e,n,r){if(window.JSON&&window.JSON.stringify)return window.JSON.stringify(e,n,r);var i;o="",u="";if(typeof r=="number")for(i=0;i<r;i+=1)u+=" ";else typeof r=="string"&&(u=r);f=n;if(!n||typeof n=="function"||typeof n=="object"&&typeof n.length=="number")return t("",{"":e});throw new Error("JSON.stringify")}}),STK.register("core.obj.beget",function(e){var t=function(){};return function(e){return t.prototype=e,new t}}),STK.register("core.obj.cascade",function(e){return function(e,t){for(var n=0,r=t.length;n<r;n+=1){if(typeof e[t[n]]!="function")throw"cascade need function list as the second paramsters";e[t[n]]=function(t){return function(){return t.apply(e,arguments),e}}(e[t[n]])}}}),STK.register("core.obj.clear",function(e){return function(e){var t,n={};for(t in e)e[t]!=null&&(n[t]=e[t]);return n}}),STK.register("core.obj.cut",function(e){return function(t,n){var r={};if(!e.core.arr.isArray(n))throw"core.obj.cut need array as second parameter";for(var i in t)e.core.arr.inArray(i,n)||(r[i]=t[i]);return r}}),STK.register("core.obj.sup",function(e){return function(e,t){var n={};for(var r=0,i=t.length;r<i;r+=1){if(typeof e[t[r]]!="function")throw"super need function list as the second paramsters";n[t[r]]=function(t){return function(){return t.apply(e,arguments)}}(e[t[r]])}return n}}),STK.register("core.str.bLength",function(e){return function(e){if(!e)return 0;var t=e.match(/[^\x00-\xff]/g);return e.length+(t?t.length:0)}}),STK.register("core.str.dbcToSbc",function(e){return function(e){return e.replace(/[\uff01-\uff5e]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}).replace(/\u3000/g," ")}}),STK.register("core.str.parseHTML",function(e){return function(e){var t=/[^<>]+|<(\/?)([A-Za-z0-9]+)([^<>]*)>/g,n,r,i=[];while(n=t.exec(e)){var s=[];for(r=0;r<n.length;r+=1)s.push(n[r]);i.push(s)}return i}}),STK.register("core.str.leftB",function(e){return function(t,n){var r=t.replace(/\*/g," ").replace(/[^\x00-\xff]/g,"**");return t=t.slice(0,r.slice(0,n).replace(/\*\*/g," ").replace(/\*/g,"").length),e.core.str.bLength(t)>n&&n>0&&(t=t.slice(0,t.length-1)),t}}),STK.register("core.str.queryString",function(e){return function(t,n){var r=e.core.obj.parseParam({source:window.location.href.toString(),split:"&"},n),i=(new RegExp("(^|)"+t+"=([^\\"+r.split+"]*)(\\"+r.split+"|$)","gi")).exec(r.source),s;return(s=i)?s[2]:null}}),STK.register("core.util.cookie",function(e){var t={set:function(t,n,r){var i=[],s,o,u=e.core.obj.parseParam({expire:null,path:"/",domain:null,secure:null,encode:!0},r);u.encode==1&&(n=escape(n)),i.push(t+"="+n),u.path!=null&&i.push("path="+u.path),u.domain!=null&&i.push("domain="+u.domain),u.secure!=null&&i.push(u.secure),u.expire!=null&&(s=new Date,o=s.getTime()+u.expire*36e5,s.setTime(o),i.push("expires="+s.toGMTString())),document.cookie=i.join(";")},get:function(e){e=e.replace(/([\.\[\]\$])/g,"\\$1");var t=new RegExp(e+"=([^;]*)?;","i"),n=document.cookie+";",r=n.match(t);return r?r[1]||"":""},remove:function(e,n){n=n||{},n.expire=-10,t.set(e,"",n)}};return t}),STK.register("core.util.connect",function(e){var t={},n={},r=0,i=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s=function(){return++r+""+(new Date).getTime()},o=function(t,r,s,o){if(!i(n,t))return!1;var u=n[t];if(!i(u.callback,r))return!1;var f=u.callback[r].onSuccess,l=u.callback[r].onError,h=e.core.json.jsonToStr(o||{});return setTimeout(function(){var t=e.core.json.strToJson(h);s?(t.type="error",l(t,r)):f(t,r)},0),delete u.callback[r],!0};return t.request=function(t){var r=t.sid;if(!r||typeof r!="string")return-1;if(!i(n,r))return-1;var u=n[r],l=s(),h=e.core.json.jsonToStr(t.data||{});u.callback[l]={onSuccess:t.onSuccess||e.core.func.empty,onError:t.onError||e.core.func.empty};var p=function(e){o(r,l,e.error,e.data)};return setTimeout(function(){u.handle(p,e.core.json.strToJson(h),l)},0),l},t.create=function(t){if(!t)return!1;var r=t.sid;if(!r||typeof r!="string")return!1;if(i(n,r))return!1;var s=t.handle;return typeof s!="function"?!1:(n[r]={handle:s,onAbort:t.onAbort||e.core.func.empty,callback:{}},!0)},t.abort=function(e){if(!e)return!1;for(var t in n){var r=n[t];if(i(r.callback,e))return setTimeout(function(){r.onAbort(e)},0),delete r.callback[e],!0}return!1},t.destory=function(e){if(!e||typeof e!="string")return!1;if(!i(n,e))return!1;for(var t in n[e].callback)try{n[e].callback[t].onError({type:"destroy"},t)}catch(r){}return delete n[e],!0},t}),STK.register("core.util.drag",function(e){var t=function(e){return e.cancelBubble=!0,!1},n=function(t,n){return t.clientX=n.clientX,t.clientY=n.clientY,t.pageX=n.clientX+e.core.util.scrollPos().left,t.pageY=n.clientY+e.core.util.scrollPos().top,t};return function(r,i){if(!e.core.dom.isNode(r))throw"core.util.drag need Element as first parameter";var s=e.core.obj.parseParam({actRect:[],actObj:{}},i),o={},u=e.core.evt.custEvent.define(s.actObj,"dragStart"),f=e.core.evt.custEvent.define(s.actObj,"dragEnd"),l=e.core.evt.custEvent.define(s.actObj,"draging"),h=function(r){var i=n({},r);return document.body.onselectstart=function(){return!1},e.core.evt.addEvent(document,"mousemove",p),e.core.evt.addEvent(document,"mouseup",d),e.core.evt.addEvent(document,"click",t,!0),r.preventDefault&&(r.preventDefault(),r.stopPropagation()),e.core.evt.custEvent.fire(u,"dragStart",i),!1},p=function(t){var r=n({},t);t.cancelBubble=!0,e.core.evt.custEvent.fire(u,"draging",r)},d=function(r){var i=n({},r);document.body.onselectstart=function(){return!0},e.core.evt.removeEvent(document,"mousemove",p),e.core.evt.removeEvent(document,"mouseup",d),e.core.evt.removeEvent(document,"click",t,!0),e.core.evt.custEvent.fire(u,"dragEnd",i)};return e.core.evt.addEvent(r,"mousedown",h),o.destroy=function(){e.core.evt.removeEvent(r,"mousedown",h),s=null},o.getActObj=function(){return s.actObj},o}}),STK.register("core.util.easyTemplate",function(e){var t=function(e,n){if(!e)return"";e!==t.template&&(t.template=e,t.aStatement=t.parsing(t.separate(e)));var r=t.aStatement,i=function(e){return e&&(n=e),arguments.callee};return i.toString=function(){return(new Function(r[0],r[1]))(n)},i};return t.separate=function(e){var t=/\\'/g,n=e.replace(/(<(\/?)#(.*?(?:\(.*?\))*)>)|(')|([\r\n\t])|(\$\{([^\}]*?)\})/g,function(e,n,r,i,s,o,u,a){if(n)return"{|}"+(r?"-":"+")+i+"{|}";if(s)return"\\'";if(o)return"";if(u)return"'+("+a.replace(t,"'")+")+'"});return n},t.parsing=function(e){var t,n,r,i,s,o,u,a=["var aRet = [];"];u=e.split(/\{\|\}/);var f=/\s/;while(u.length){r=u.shift();if(!r)continue;s=r.charAt(0);if(s!=="+"&&s!=="-"){r="'"+r+"'",a.push("aRet.push("+r+");");continue}i=r.split(f);switch(i[0]){case"+et":t=i[1],n=i[2],a.push('aRet.push("<!--'+t+' start-->");');break;case"-et":a.push('aRet.push("<!--'+t+' end-->");');break;case"+if":i.splice(0,1),a.push("if"+i.join(" ")+"{");break;case"+elseif":i.splice(0,1),a.push("}else if"+i.join(" ")+"{");break;case"-if":a.push("}");break;case"+else":a.push("}else{");break;case"+list":a.push("if("+i[1]+".constructor === Array){with({i:0,l:"+i[1]+".length,"+i[3]+"_index:0,"+i[3]+":null}){for(i=l;i--;){"+i[3]+"_index=(l-i-1);"+i[3]+"="+i[1]+"["+i[3]+"_index];");break;case"-list":a.push("}}}");break;default:}}return a.push('return aRet.join("");'),[n,a.join("")]},t}),STK.register("core.util.htmlParser",function(e){var t=function(e){var t={},n=e.split(",");for(var r=0;r<n.length;r++)t[n[r]]=!0;return t},n=/^<(\w+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,r=/^<\/(\w+)[^>]*>/,i=/([\w|\-]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,s=t("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),o=t("address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul"),u=t("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),a=t("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),f=t("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),l=t("script,style"),c=function(e,t){var c,p,v,m=[],y=e,b=function(n,r,l,c){if(o[r])while(m.last()&&u[m.last()])w("",m.last());a[r]&&m.last()==r&&w("",r),c=s[r]||!!c,c||m.push(r);var p=[];if(n==="textarea"){var d=e.match(/^(.*)<\/textarea[^>]*>/);p.push({name:"text",value:e.slice(0,d[0].length)}),e=e.substring(d[0].length)}t.start&&typeof t.start=="function"&&(l.replace(i,function(e,t){var n=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:f[t]?t:"";p.push({name:t,value:n,escaped:n.replace(/(^|[^\\])"/g,'$1\\"')})}),t.start(r,p,c))},w=function(e,n){if(!n)var r=0;else for(var r=m.length-1;r>=0;r--)if(m[r]==n)break;if(r>=0){for(var i=m.length-1;i>=r;i--)t.end&&typeof t.end=="function"&&t.end(m[i]);m.length=r}};m.last=function(){return this[this.length-1]};while(e){p=!0;if(!m.last()||!l[m.last()]){e.indexOf("<!--")===0?(c=e.indexOf("-->"),c>=0&&(t.comment&&typeof t.comment=="function"&&t.comment(e.substring(4,c)),e=e.substring(c+3),p=!1)):e.indexOf("</")===0?(v=e.match(r),v&&(e=e.substring(v[0].length),v[0].replace(r,w),p=!1)):e.indexOf("<")===0&&(v=e.match(n),v&&(e=e.substring(v[0].length),v[0].replace(n,b),p=!1));if(p){c=e.indexOf("<");var E=c<0?e:e.substring(0,c);e=c<0?"":e.substring(c),t.chars&&typeof t.chars=="function"&&t.chars(E)}}else e=e.replace(new RegExp("(.*)</"+m.last()+"[^>]*>"),function(e,n){return n=n.replace(/<!--(.*?)-->/g,"$1").replace(/<!\[CDATA\[(.*?)]]>/g,"$1"),t.chars&&typeof t.chars=="function"&&t.chars(n),""}),w("",m.last());if(e==y)throw"Parse Error: "+e;y=e}w()};return c}),STK.register("core.util.nameValue",function(e){return function(t){var n=t.getAttribute("name"),r=t.getAttribute("type"),i=t.tagName,s={name:n,value:""},o=function(t){t===!1?s=!1:s.value?s.value=[e.core.str.trim(t||"")].concat(s.value):s.value=e.core.str.trim(t||"")};if(!!t.disabled||!n)return!1;switch(i){case"INPUT":r=="radio"||r=="checkbox"?t.checked?o(t.value):o(!1):r=="reset"||r=="submit"||r=="image"?o(!1):o(t.value);break;case"SELECT":if(t.multiple){var u=t.options;for(var f=0,l=u.length;f<l;f++)u[f].selected&&o(u[f].value)}else o(t.value);break;case"TEXTAREA":o(t.value||t.getAttribute("value")||!1);break;case"BUTTON":default:o(t.value||t.getAttribute("value")||t.innerHTML||!1)}return s}}),STK.register("core.util.htmlToJson",function(e){return function(t,n,r){var i={};n=n||["INPUT","TEXTAREA","BUTTON","SELECT"];if(!t||!n)return!1;var s=e.core.util.nameValue;for(var o=0,u=n.length;o<u;o++){var f=t.getElementsByTagName(n[o]);for(var l=0,c=f.length;l<c;l++){var h=s(f[l]);if(!h||r&&h.value==="")continue;i[h.name]?i[h.name]instanceof Array?i[h.name]=i[h.name].concat(h.value):i[h.name]=[i[h.name]].concat(h.value):i[h.name]=h.value}}return i}}),STK.register("core.util.jobsM",function(e){return function(){var t=[],n={},r=!1,i={},s=function(t){var r=t.name,i=t.func,s=+(new Date);if(!n[r])try{i(e),i[r]=!0}catch(o){e.log("[error][jobs]"+r)}},o=function(t){t.length?(e.core.func.timedChunk(t,{process:s,callback:arguments.callee}),t.splice(0,t.length)):r=!1};return i.register=function(e,n){t.push({name:e,func:n})},i.start=function(){if(r)return!0;r=!0,o(t)},i.load=function(){},e.core.dom.ready(i.start),i}()}),STK.register("core.util.language",function(e){return function(e,t){var n=[];for(var r=2,i=arguments.length;r<i;r+=1)n.push(arguments[r]);return e.replace(/#L\{((.*?)(?:[^\\]))\}/ig,function(){var e=arguments[1],r;return t&&t[e]!==undefined?r=t[e]:r=e,n.length&&(r=r.replace(/(\%s)/ig,function(){var e=n.shift();return e!==undefined?e:arguments[0]})),r})}}),STK.register("core.util.listener",function(e){return function(){var e={},t=[],n,r=function(){if(t.length!=0){clearTimeout(n);var e=t.splice(0,1)[0];try{e.func.apply(e.func,[].concat(e.data))}catch(i){}n=setTimeout(r,25)}};return{register:function(t,n,r){e[t]=e[t]||{},e[t][n]=e[t][n]||[],e[t][n].push(r)},fire:function(n,i,s){var o,u,f;if(e[n]&&e[n][i]&&e[n][i].length>0){o=e[n][i],o.data_cache=s;for(u=0,f=o.length;u<f;u++)t.push({channel:n,evt:i,func:o[u],data:s});r()}},remove:function(t,n,r){if(e[t]&&e[t][n])for(var i=0,s=e[t][n].length;i<s;i++)if(e[t][n][i]===r){e[t][n].splice(i,1);break}},list:function(){return e},cache:function(t,n){if(e[t]&&e[t][n])return e[t][n].data_cache}}}()}),STK.register("core.util.pageletM",function(e){var t="",n="";typeof $CONFIG!="undefined"&&(t=$CONFIG.jsPath||t,n=$CONFIG.cssPath||n);var r=e.core.arr.indexOf,i={},s,o={},u={},a={},f={},l,c;e.IE&&(l={},c=function(){var t,n,r;for(t in l)if(l[t].length<31){r=e.E(t);break}return r||(t="style_"+e.core.util.getUniqueKey(),r=document.createElement("style"),r.setAttribute("type","text/css"),r.setAttribute("id",t),document.getElementsByTagName("head")[0].appendChild(r),l[t]=[]),{styleID:t,styleSheet:r.styleSheet||r.sheet}});var h=function(t,n){a[t]={cssURL:n};if(e.IE){var r=c();r.styleSheet.addImport(n),l[r.styleID].push(t),a[t].styleID=r.styleID}else{var i=e.C("link");i.setAttribute("rel","Stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("charset","utf-8"),i.setAttribute("href",n),i.setAttribute("id",t),document.getElementsByTagName("head")[0].appendChild(i)}},p={},d=function(t,n){var r=e.E(t);if(r){n(r),p[t]&&delete p[t];for(var i in p)d(i,p[i])}else p[t]=n},v=function(t){if(e.IE){var n=a[t].styleID,s=l[n],o=e.E(n),u;(u=r(t,s))>-1&&((o.styleSheet||o.sheet).removeImport(u),s.splice(u,1))}else e.core.dom.removeNode(e.E(t));delete i[a[t].cssURL],delete a[t]},m=function(t,r,i){for(var s in f)e.E(s)||delete f[s];f[t]={js:{},css:{}};if(i)for(var s=0,o=i.length;s<o;++s)f[t].css[n+i[s]]=1},g=function(){for(var e in a){var t=!1,n=a[e].cssURL;for(var r in f)if(f[r].css[n]){t=!0;break}t||v(e)}},y=function(e,t){var n=i[e]||(i[e]={loaded:!1,list:[]});return n.loaded?(t(e),!1):(n.list.push(t),n.list.length>1?!1:!0)},b=function(e){var t=i[e].list;if(t){for(var n=0;n<t.length;n++)t[n](e);i[e].loaded=!0,delete i[e].list}},w=function(t){var r=t.url,i=t.load_ID,s=t.complete,o=t.pid,u=n+r,a="css_"+e.core.util.getUniqueKey();if(!!y(u,s)){h(a,u);var f=e.C("div");f.id=i,e.core.util.hideContainer.appendChild(f);var l=3e3,c=function(){parseInt(e.core.dom.getStyle(f,"height"))==42?(e.core.util.hideContainer.removeChild(f),b(u)):--l>0?setTimeout(c,10):(e.log(u+"timeout!"),e.core.util.hideContainer.removeChild(f),b(u),v(a),h(a,u))};setTimeout(c,50)}},E=function(n,r){var s=t+n;!y(s,r)||e.core.io.scriptLoader({url:s,onComplete:function(){b(s)},onTimeout:function(){e.log(s+"timeout!"),delete i[s]}})},S=function(e,t){o[e]||(o[e]=t)},x=function(t){if(t)if(o[t])try{u[t]||(u[t]=o[t](e))}catch(n){e.log(t,n,n.stack)}else e.log("start:ns="+t+" ,have not been registed");else{var r=[];for(t in o)r.push(t);e.core.func.timedChunk(r,{process:function(t){try{u[t]||(u[t]=o[t](e))}catch(n){e.log(t,n,n.stack)}}})}},T=function(t){var n=1,r,i,s,o,u,a,f;t=t||{},i=t.pid,s=t.html,u=t.js?[].concat(t.js):[],o=t.css?[].concat(t.css):[];if(i==undefined)e.log("node pid["+i+"] is undefined");else{m(i,u,o),a=function(){--n>0||d(i,function(e){s!=undefined&&(e.innerHTML=s),u.length>0&&f(),g()})},f=function(e){u.length>0&&E(u.shift(),f);if(e&&e.indexOf("/pl/")!=-1){var t=e.replace(/^.*?\/(pl\/.*)\.js\??.*$/,"$1").replace(/\//g,".");N(t),x(t)}};if(o.length>0){n+=o.length;for(var l=0,c;c=o[l];l++)w({url:c,load_ID:"js_"+c.replace(/^\/?(.*)\.css\??.*$/i,"$1").replace(/\//g,"_"),complete:a,pid:i})}a()}},N=function(t){if(t){if(u[t]){e.log("destroy:"+t);try{u[t].destroy()}catch(n){e.log(n,n.stack)}delete u[t]}}else{for(t in u){e.log("destroy:"+t);try{u[t]&&u[t].destroy&&u[t].destroy()}catch(n){e.log(t,n,n.stack)}}u={}}},C={register:S,start:x,view:T,clear:N,destroy:function(){C.clear(),i={},u={},o={},s=undefined}};return e.core.dom.ready(function(){e.core.evt.addEvent(window,"unload",function(){e.core.evt.removeEvent(window,"unload",arguments.callee),C.destroy()})}),C}),STK.register("core.util.winSize",function(e){return function(e){var t,n,r;return e?r=e.document:r=document,r.compatMode==="CSS1Compat"?(t=r.documentElement.clientWidth,n=r.documentElement.clientHeight):self.innerHeight?(e?r=e.self:r=self,t=r.innerWidth,n=r.innerHeight):r.documentElement&&r.documentElement.clientHeight?(t=r.documentElement.clientWidth,n=r.documentElement.clientHeight):r.body&&(t=r.body.clientWidth,n=r.body.clientHeight),{width:t,height:n}}}),STK.register("core.util.pageSize",function(e){return function(t){var n;t?n=t.document:n=document;var r=n.compatMode=="CSS1Compat"?n.documentElement:n.body,i,s,o,u;window.innerHeight&&window.scrollMaxY?(i=r.scrollWidth,s=window.innerHeight+window.scrollMaxY):r.scrollHeight>r.offsetHeight?(i=r.scrollWidth,s=r.scrollHeight):(i=r.offsetWidth,s=r.offsetHeight);var f=e.core.util.winSize(t);return s<f.height?o=f.height:o=s,i<f.width?u=f.width:u=i,{page:{width:u,height:o},win:{width:f.width,height:f.height}}}}),STK.register("core.util.queue",function(e){return function(){var e={},t=[];return e.add=function(n){return t.push(n),e},e.get=function(){return t.length>0?t.shift():!1},e}}),STK.register("core.util.timer",function(e){return function(){var e={},t={},n=0,r=null,i=!1,s=25,o=function(){for(var n in t)t[n].pause||t[n].fun();return e};return e.add=function(r){if(typeof r!="function")throw"The timer needs add a function as a parameters";var i=""+(new Date).getTime()+Math.random()*Math.pow(10,17);return t[i]={fun:r,pause:!1},n<=0&&e.start(),n++,i},e.remove=function(r){return t[r]&&(delete t[r],n--),n<=0&&e.stop(),e},e.pause=function(n){return t[n]&&(t[n].pause=!0),e},e.play=function(n){return t[n]&&(t[n].pause=!1),e},e.stop=function(){return clearInterval(r),r=null,e},e.start=function(){return r=setInterval(o,s),e},e.loop=o,e.get=function(e){if(e==="delay")return s;if(e==="functionList")return t},e.set=function(e,t){e==="delay"&&typeof t=="number"&&(s=Math.max(25,Math.min(t,200)))},e}()}),STK.register("core.util.scrollTo",function(e){return function(t,n){if(!e.core.dom.isNode(t))throw"core.dom.isNode need element as the first parameter";var r=e.core.obj.parseParam({box:document.documentElement,top:0,step:2,onMoveStop:null},n);r.step=Math.max(2,Math.min(10,r.step));var i=[],s=e.core.dom.position(t),o;r.box==document.documentElement?o={t:0}:o=e.core.dom.position(r.box);var u=Math.max(0,(s?s.t:0)-(o?o.t:0)-r.top),f=r.box===document.documentElement?r.box.scrollTop||document.body.scrollTop||window.pageYOffset:r.box.scrollTop;while(Math.abs(f-u)>r.step&&f!==0)i.push(Math.round(f+(u-f)*r.step/10)),f=i[i.length-1];i.length||i.push(u);var l=e.core.util.timer.add(function(){i.length?r.box===document.documentElement?window.scrollTo(0,i.shift()):r.box.scrollTop=i.shift():(r.box===document.documentElement?window.scrollTo(0,u):r.box.scrollTop=u,e.core.util.timer.remove(l),typeof r.onMoveStop=="function"&&r.onMoveStop())})}}),STK.register("core.util.stack",function(e){return function(){var e={},t=[];return e.add=function(n){return t.push(n),e},e.get=function(){return t.length>0?t.pop():!1},e}}),STK.register("core.util.swf",function(e){function t(t,n){var r=e.core.obj.parseParam({id:"swf_"+parseInt(Math.random()*1e4,10),width:1,height:1,attrs:{},paras:{},flashvars:{},html:""},n);if(t==null)throw"swf: [sURL] 鏈畾涔�";var i,s=[],o=[];for(i in r.attrs)o.push(i+'="'+r.attrs[i]+'" ');var u=[];for(i in r.flashvars)u.push(i+"="+r.flashvars[i]);r.paras.flashvars=u.join("&");if(e.IE){s.push('<object width="'+r.width+'" height="'+r.height+'" id="'+r.id+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" '),s.push(o.join("")),s.push('><param name="movie" value="'+t+'" />');for(i in r.paras)s.push('<param name="'+i+'" value="'+r.paras[i]+'" />');s.push("</object>")}else{s.push('<embed width="'+r.width+'" height="'+r.height+'" id="'+r.id+'" src="'+t+'" type="application/x-shockwave-flash" '),s.push(o.join(""));for(i in r.paras)s.push(i+'="'+r.paras[i]+'" ');s.push(" />")}return r.html=s.join(""),r}var n={};return n.create=function(n,r,i){var s=e.E(n);if(s==null)throw"swf: ["+n+"] 鏈壘鍒�";var o=t(r,i);return s.innerHTML=o.html,e.E(o.id)},n.html=function(e,n){var r=t(e,n);return r.html},n.check=function(){var t=-1;if(e.IE)try{var n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");t=n.GetVariable("$version")}catch(r){}else navigator.plugins["Shockwave Flash"]&&(t=navigator.plugins["Shockwave Flash"].description);return t},n}),STK.register("core.util.storage",function(e){var t=window.localStorage;if(t)return{get:function(e){return unescape(t.getItem(e))},set:function(e,n,r){t.setItem(e,escape(n))},del:function(e){t.removeItem(e)},clear:function(){t.clear()},getAll:function(){var e=t.length,n=null,r=[];for(var i=0;i<e;i++)n=t.key(i),r.push(n+"="+this.getKey(n));return r.join("; ")}};if(window.ActiveXObject){var n=document.documentElement,r="localstorage";try{n.addBehavior("#default#userdata"),n.save("localstorage")}catch(i){}return{set:function(e,t){n.setAttribute(e,t),n.save(r)},get:function(e){return n.load(r),n.getAttribute(e)},del:function(e){n.removeAttribute(e),n.save(r)}}}return{get:function(e){var t=document.cookie.split("; "),n=t.length,r=[];for(var i=0;i<n;i++){r=t[i].split("=");if(e===r[0])return unescape(r[1])}return null},set:function(e,t,n){n&&n instanceof Date||(n=new Date,n.setDate(n.getDate()+1)),document.cookie=e+"="+escape(t)+"; expires="+n.toGMTString()},del:function(e){document.cookie=e+"=''; expires=Fri, 31 Dec 1999 23:59:59 GMT;"},clear:function(){var e=document.cookie.split("; "),t=e.length,n=[];for(var r=0;r<t;r++)n=e[r].split("="),this.deleteKey(n[0])},getAll:function(){return unescape(document.cookie.toString())}}}),function(){var e=STK.core,t={tween:"core.ani.tween",tweenArche:"core.ani.tweenArche",arrCopy:"core.arr.copy",arrClear:"core.arr.clear",hasby:"core.arr.hasby",unique:"core.arr.unique",foreach:"core.arr.foreach",isArray:"core.arr.isArray",inArray:"core.arr.inArray",arrIndexOf:"core.arr.indexOf",findout:"core.arr.findout",domNext:"core.dom.next",domPrev:"core.dom.prev",isNode:"core.dom.isNode",addHTML:"core.dom.addHTML",insertHTML:"core.dom.insertHTML",setXY:"core.dom.setXY",contains:"core.dom.contains",position:"core.dom.position",trimNode:"core.dom.trimNode",insertAfter:"core.dom.insertAfter",insertBefore:"core.dom.insertBefore",removeNode:"core.dom.removeNode",replaceNode:"core.dom.replaceNode",Ready:"core.dom.ready",setStyle:"core.dom.setStyle",setStyles:"core.dom.setStyles",getStyle:"core.dom.getStyle",addClassName:"core.dom.addClassName",hasClassName:"core.dom.hasClassName",removeClassName:"core.dom.removeClassName",builder:"core.dom.builder",cascadeNode:"core.dom.cascadeNode",selector:"core.dom.selector",sizzle:"core.dom.sizzle",addEvent:"core.evt.addEvent",custEvent:"core.evt.custEvent",removeEvent:"core.evt.removeEvent",fireEvent:"core.evt.fireEvent",fixEvent:"core.evt.fixEvent",getEvent:"core.evt.getEvent",stopEvent:"core.evt.stopEvent",delegatedEvent:"core.evt.delegatedEvent",preventDefault:"core.evt.preventDefault",hotKey:"core.evt.hotKey",memorize:"core.func.memorize",bind:"core.func.bind",getType:"core.func.getType",methodBefore:"core.func.methodBefore",timedChunk:"core.func.timedChunk",funcEmpty:"core.func.empty",ajax:"core.io.ajax",jsonp:"core.io.jsonp",ijax:"core.io.ijax",scriptLoader:"core.io.scriptLoader",require:"core.io.require",jsonInclude:"core.json.include",jsonCompare:"core.json.compare",jsonClone:"core.json.clone",jsonToQuery:"core.json.jsonToQuery",queryToJson:"core.json.queryToJson",jsonToStr:"core.json.jsonToStr",strToJson:"core.json.strToJson",objIsEmpty:"core.obj.isEmpty",beget:"core.obj.beget",cascade:"core.obj.cascade",objSup:"core.obj.sup",parseParam:"core.obj.parseParam",bLength:"core.str.bLength",dbcToSbc:"core.str.dbcToSbc",leftB:"core.str.leftB",trim:"core.str.trim",encodeHTML:"core.str.encodeHTML",decodeHTML:"core.str.decodeHTML",parseURL:"core.str.parseURL",parseHTML:"core.str.parseHTML",queryString:"core.str.queryString",htmlToJson:"core.util.htmlToJson",cookie:"core.util.cookie",drag:"core.util.drag",timer:"core.util.timer",jobsM:"core.util.jobsM",listener:"core.util.listener",winSize:"core.util.winSize",pageSize:"core.util.pageSize",templet:"core.util.templet",queue:"core.util.queue",stack:"core.util.stack",swf:"core.util.swf",URL:"core.util.URL",scrollPos:"core.util.scrollPos",scrollTo:"core.util.scrollTo",getUniqueKey:"core.util.getUniqueKey",storage:"core.util.storage",pageletM:"core.util.pageletM"};for(var n in t)STK.shortRegister(t[n],n,"theia");var r="theia_1_1"}(),typeof module!="undefined"&&module.exports&&(module.exports=STK)},b:function(e,t,n,r){var i=n("B"),s=n("c"),o=n("W"),u=window.$CONFIG&&window.$CONFIG.version||i.getUniqueKey(),a=s();o("//img.t.sinajs.cn/t6/style/css/module/pagecard/PCD_mplayer.css?version="+u,"js_style_css_module_pagecard_PCD_mplayer",function(){document.body.appendChild(a.box)}),window.WEIBO_MUSIC_PLAYER=a},B:function(e,t,n,r){e.exports=r("A")||window.STK},c:function(e,t,n,r){function _(){this.nodes={},this.el=null,this.mini=null,this.box=null,this.devt=null,this.inited=!1,this.isFold=!0,this.playType=N,this.client=i.getUniqueKey(),this.listItemsMap={},this.audio,this.uiVolume,this.uiProgress,this.list,this.listArgs={},this.nowPlaySong,this.queue,this.playedCount=0,this.queueInited=!1,this.errorTryCount=0,this.build()}var i=n("B"),s=n("C").translate,o=n("E"),u=n("G"),a=n("j"),f=n("J"),l=n("k"),c=n("M"),h=n("t"),p=n("U"),d=n("v"),v=n("V"),m=n("m")("tblog_musicpageplayer"),g=n("H"),y=n("i"),b=n("I"),w=n("w"),E=n("f"),S=i.core.json.merge,x=2,T=1,N=0,C="audio/mpeg;",k="weibo_music_player_",L={volume:.9,mute:0,client:0,playtype:N,show:1},A=i.C("audio"),O=[].slice,M=[].concat;g(_.prototype,b,{init:function(){this.audio=u(!i.core.util.browser.IE&&"canPlayType"in A&&!!A.canPlayType(C)?"HTML5":"Flash"),this.audio.ready(y(this,function(){this.list=c(this.listArgs),i.replaceNode(this.list.el,this.nodes.list),this.uiProgress=f(this.nodes.progress_range,this.nodes.progress_range_out,0).enable(!1),this.uiVolume=f(this.nodes.volume_range,this.nodes.volume_range_out,1),this.uiLrc=l(),i.replaceNode(this.uiLrc.el,this.nodes.lrc),this.uiInfo=h(),i.replaceNode(this.uiInfo.el,this.nodes.info),this.inited=!0,this.bind(),this.initStorage(),this.bindStorage()}))},initStorage:function(e){return i.foreach(L,y(this,function(e,t){storageKey=k+t,a.has(storageKey,y(this,function(n){n||a.set(storageKey,e),a.get(storageKey,y(this,function(e){try{switch(t){case"volume":this.audio.volume(e),this.uiVolume.set(this.audio.volume());break;case"mute":this.audio.mute(!!(e|0));break;case"playtype":this.setPlayType(e|0);break;case"show":e==1?this.show():this.hide(),m.send(e==1?"open":"close")}}catch(n){}}))}))})),this},load:function(e){this.listArgs.page_id=e.page_id,this.inited?this.list.loaded&&(this.listArgs.page_id=this.list.page_id=e.page_id,this.list.load()):a.get(k+"lastsong",y(this,function(e){if(e)try{e=i.strToJson(e),e.object_id.toString,e.photo.toString,this.listArgs.firstSongidOnce=e.object_id,this.nodes.mini_photo.src=e.photo.replace(/^https:|^http:/,""),this.init()}catch(t){this.init()}else this.init()}))},build:function(){return nodeList=i.builder(s(v)).list,i.foreach(nodeList,y(this,function(e,t){this.nodes[t]=e[0]})),this.box=this.nodes.box,this.mini=this.nodes.mini,this.el=this.nodes.player,E.box=this.box,this},bindStorage:function(){a.on(k+"volume",y(this,this.onStorageVolumeSet)),a.on(k+"mute",y(this,this.onStorageMuteSet)),a.on(k+"client",y(this,this.onStorageClientSet)),a.on(k+"playtype",y(this,this.onStoragePlayTypeSet)),a.on(k+"show",y(this,this.onStorageShowSet))},bind:function(){return this.devt=i.delegatedEvent(this.box),this.devt.add("toggle_play","click",y(this,this.togglePlay)),this.devt.add("next","click",y(this,this.playNext)),this.devt.add("prev","click",y(this,this.playPrev)),this.devt.add("like","click",y(this,this.onNowPlayingLike)),this.devt.add("share","click",y(this,this.onNowPlayingShare)),this.devt.add("show","click",y(this,this.show)),this.devt.add("hide","click",y(this,this.hide)),this.devt.add("show_confirm","click",y(this,this.showConfirm)),this.devt.add("hide_confirm","click",y(this,this.hideConfirm)),this.devt.add("play_type_select","click",y(this,this.setPlayType)),this.devt.add("toggle_mute","click",y(this,this.toggleMute)),this.devt.add("toggle_fold","click",y(this,this.toggleFold)),this.devt.add("toggle_lrc","click",y(this,this.toggleLrc)),this.devt.add("toggle_list","click",y(this,this.toggleList)),this.audio.on("timeupdate",y(this,this.onAudioTimeUpdate)),this.audio.on("play",y(this,this.onAudioPlay)),this.audio.on("pause",y(this,this.onAudioPause)),this.audio.on("ended",y(this,this.onAudioEnded)),this.audio.on("mute",y(this,this.onAudioMute)),this.audio.on("load",y(this,function(){this.audio.play()})),this.audio.on("play",y(this,this._time_onAudioPlay)),this.audio.on("pause",y(this,this._time_onAudioPauseOrEnd)),this.audio.on("ended",y(this,this._time_onAudioPauseOrEnd)),this.audio.on("error",y(this,this.onAudioError)),this.uiProgress.on("dragEnd",y(this,this.onProgressDragEnd)),this.uiProgress.on("draging",y(this,this.onProgressDraging)),this.uiVolume.on("set",y(this,this.onVolumeSet)),this.uiVolume.on("draging",y(this,this.onVolumeDraging)),this.uiVolume.on("dragEnd",y(this,this.onVolumeDragEnd)),this.list.on("select",y(this,this.onListSelect)),this.list.on("like",y(this,this.onListLike)),this.list.on("share",y(this,this.onListShare)),this.list.on("show",y(this,this.onListShow)),this.list.on("hide",y(this,this.onListHide)),this.list.on("showTip",y(this,this.onShowTip)),this.uiLrc.on("show",y(this,this.onLrcShow)),this.uiLrc.on("hide",y(this,this.onLrcHide)),this.nodes.mini_photo.onerror=y(this,function(){this.nodes.mini_photo.src="//mu1.sinaimg.cn/images/weiyinyue.music.sina.com.cn.png"}),this.on("fold",y(this,this.onToggleFold)),i.addEvent(this.nodes.progress_range_out,"mousemove",y(this,this.onProgressMouseMove)),i.addEvent(this.nodes.progress_range_out,"mouseout",y(this,this.onProgressMouseOut)),i.addEvent(document,"click",y(this,this.onDocumentClick)),this},resetNowPlay:function(){this.audio.ready(y(this,function(){this.audio.load("")})),this.nowPlaySong=undefined,this.uiLrc.reset(),this.uiInfo.render(),this.uiProgress.set(0),this.uiProgress.enable(!1),this.nodes.time.innerHTML="00 : 00"},resetPlayer:function(){this.resetNowPlay()},playAnimate:function(e){var t=document.documentElement.clientHeight,n,r;this.isFold?(n=i.sizzle(".mask",this.mini)[0],r={x:n.getBoundingClientRect().left+n.offsetWidth/2,y:t-n.getBoundingClientRect().top-n.offsetHeight/2-15}):(n=i.sizzle(".ico_list",this.el)[0],r={x:n.getBoundingClientRect().left+n.offsetWidth/2,y:t-n.getBoundingClientRect().top-20}),w(r,e)},showTip:function(e,t){var n;this.isFold?(n=i.sizzle(".mask",this.mini)[0],p.setContent(e).showByTarget(n,{appendTo:this.mini})):(n=i.sizzle(t,this.el)[0],p.setContent(e).showByTarget(n,{appendTo:this.el}))},playSong:function(e,t){this.show(),this.playAnimate(y(this,function(){this.list.add(e,{isPlay:!0,extraSend:t})}))},playSongByObjectId:function(e,t){this.show(),this.playAnimate(y(this,function(){this.list.addWithObjectId(e,{isPlay:!0,extraSend:t})}))},playWithSong:function(e,t){if(!e)return;this.playWithSongLastSongId=e.object_id;var n=y(this,function(){if(this.playWithSongLastSongId!=e.object_id)return;try{t?this.resetPlayer():(this.playedCount++,this.audio.ready(y(this,function(){this.audio.load(e.mp3_url.replace(/^https:|^http:/,"")+(e.mp3_url.indexOf("?")==-1?"?":"&")+"_ts="+(new Date).getTime())}))),this.nowPlaySong=e,this.renderSong(e),m.send("total_play"),this.playedCount===1&&(this.toggleFold(!1),m.send("first_play")),delete this._suda_playedOver60Pst_sended}catch(n){setTimeout(y(this,function(){this.playNext(),this.showTip("播放失败，自动切换下一首",".ico_ctrl.ico_list")}),1e3)}});e.mp3_url?o.token({object_id:e.object_id},function(t){g(e,t),n()}):o.info({object_id:e.object_id},function(t){g(e,t),n()})},playPrev:function(){var e;switch(this.playType){case T:e=this.list.getSong("prev");break;case x:e=this.list.getSong("random");break;case N:e=this.list.getSong("prev")}this.playWithSong(e),this.list.toCurrentTab()},playNext:function(){var e;switch(this.playType){case T:e=this.list.getSong("next");break;case x:e=this.list.getSong("random");break;case N:e=this.list.getSong("next")}this.playWithSong(e),this.list.toCurrentTab()},renderSong:function(e){this.uiProgress.enable(!0),this.uiLrc.load(e.lyric_info),this.uiInfo.render(e),this.nodes.mini_photo.src=e.photo.replace(/^https:|^http:/,""),a.set(k+"lastsong",i.jsonToStr({object_id:e.object_id,photo:e.photo.replace(/^https:|^http:/,"")})),"is_like"in e&&(this.nodes.like.setAttribute("title",e.is_like?s("#L{取消赞}"):s("#L{赞}")),i[e.is_like?"removeClassName":"addClassName"](this.nodes.like,"ico_like"),i[e.is_like?"addClassName":"removeClassName"](this.nodes.like,"ico_unlike"))},setPlayType:function(e){if(typeof e!="number"){var t=e.el;e={play_type_select_loop:N,play_type_select_solo:T,play_type_select_rand:x}[t.getAttribute("node-type")]}switch(e){case N:this.playType=N;break;case T:this.playType=T;break;case x:this.playType=x;break;default:this.playType=N}i.foreach([["ico_loop",s("#L{列表循环}")],["ico_solo",s("#L{单曲循环}")],["ico_rand",s("#L{随机播放}")]],y(this,function(e,t){var n=t===this.playType?i.addClassName:i.removeClassName;n(this.nodes.play_type,e[0]),t===this.playType&&(this.nodes.play_type.title=e[1])})),a.set(k+"playtype",this.playType)},showPlayTypeSelect:function(){this.nodes.play_type_select.style.display="",this.nodes.play_type_select.appendChild(this.nodes[["play_type_select_loop","play_type_select_solo","play_type_select_rand"][this.playType]])},hidePlayTypeSelect:function(){this.nodes.play_type_select.style.display="none"},showConfirm:function(){this.nodes.confirm.style.display=""},hideConfirm:function(){this.nodes.confirm.style.display="none"},show:function(){this.hideConfirm(),this.box.style.display==="none"&&(this.box.style.display="",a.set(k+"show",1))},hide:function(){this.hideConfirm(),this.box.style.display!="none"&&(this.box.style.display="none",this.audio.pause(),a.set(k+"show",0))},onAudioTimeUpdate:function(e,t,n){this.errorTryCount=0;var r=d(n-t),i=d(n);this.nodes.time._lasttime=r,this.nodes.time._duration=i,this.nodes.time.innerHTML=r,this.uiProgress.set(t/n),this.uiLrc.setCurrentByTime(t*1e3,n*1e3),this._suda_playedOver60Pst(t,n),this._suda_sendPlayDuration(this.nowPlaySong.object_id,n|0)},onAudioPlay:function(e){this.show(),this.nodes.toggle_play.className="ico_ctrl ico_play ico_pause",this.nodes.mini_toggle_play.className="mini_btn_area playing_state",this.nodes.toggle_play.title=s("#L{暂停}"),a.set(k+"client",this.client)},onAudioPause:function(e){this.nodes.toggle_play.className="ico_ctrl ico_play",this.nodes.mini_toggle_play.className="mini_btn_area pause_state",this.nodes.toggle_play.title=s("#L{播放}")},onAudioEnded:function(e){var t;switch(this.playType){case T:t=this.list.getSong();break;case x:t=this.list.getSong("random");break;case N:t=this.list.getSong("next")}this.playWithSong(t)},onAudioMute:function(e,t){i[t?"addClassName":"removeClassName"](this.nodes.toggle_mute,"ico_mute"),t?this.uiVolume.setWidthoutTrigger(0):this.uiVolume.set(this.audio.volume()),a.set(k+"mute",+t)},onAudioError:function(e){if(this.audio.src()=="")return;var t=this.audio.currentTime(),n=this.audio.duration();this.errorTryCount<4&&(this.errorTryCount++,n-t<2?(this.playNext(),this.showTip("播放失败，自动切换下一首",".ico_ctrl.ico_list")):(this.playWithSong(this.nowPlaySong),setTimeout(y(this,function(){this.audio.currentTime(t)}),2e3)))},onVolumeSet:function(e,t){this.audio.volume(t)},onVolumeDraging:function(e,t){i[t===0?"addClassName":"removeClassName"](this.nodes.toggle_mute,"ico_mute"),mute=this.audio.mute(),mute?t!=0&&this.audio.mute(!1):t===0&&this.audio.mute(!0)},onVolumeDragEnd:function(e,t){a.set(k+"volume",t)},onProgressDragEnd:function(e,t){!this.audio.src()&&this.nowPlaySong&&this.playWithSong(this.nowPlaySong);var n=this.audio.duration(),r=t*n;this.audio.currentTime(this.audio.duration()*t),this.uiLrc.setCurrentByTime(r*1e3,n*1e3),m.send("click_player_bar")},onProgressDraging:function(e,t){var n=this.audio.duration(),r=t*n,i=(r/60|0).toString(),s=(r%60|0).toString();this.nodes.time_minutes.innerHTML=i.length>=2?i:"0"+i,this.nodes.time_seconds.innerHTML=s.length>=2?s:"0"+s},onLrcShow:function(){this.nodes.toggle_lrc.title=s("#L{隐藏歌词}"),this.uiLrc.nextMustSet(),this.uiLrc.setCurrentByTime(this.audio.currentTime()*1e3,this.audio.duration()*1e3),this.audio.src()&&m.send("songwords_expo")},onLrcHide:function(){this.nodes.toggle_lrc.title=s("#L{显示歌词}")},onListSelect:function(e,t,n){n=n||{};var r=n.fromRemove,i=n.fromLoad;t===undefined?this.resetPlayer():r?this.playWithSong(t,!this.audio.playing()):i?this.playWithSong(t,!0):this.playWithSong(t)},onShowTip:function(e,t,n){this.showTip(t,n)},onListLike:function(e,t){this.onLike(t)},onListShare:function(e,t){this.onShare(t)},onListShow:function(){this.nodes.toggle_list.title=s("#L{隐藏列表}"),m.send("list_expo")},onListHide:function(){this.nodes.toggle_list.title=s("#L{展开列表}")},onNowPlayingLike:function(e){this.onLike(this.nowPlaySong)},onNowPlayingShare:function(e){this.onShare(this.nowPlaySong)},onToggleFold:function(e,t){var n={fold:{left:"-690px",delay:"0s",miniLeft:"0",miniDelay:".5s"},unfold:{left:"0",delay:".3s",miniLeft:"-66px",miniDelay:"0s"}}[t?"fold":"unfold"],r=y(this,function(){this.el.style.webkitTransitionDelay=this.el.style.MozTransitionDelay=this.el.style.transitionDelay=n.delay,this.mini.style.webkitTransitionDelay=this.mini.style.MozTransitionDelay=this.mini.style.transitionDelay=n.miniDelay,this.el.style.left=n.left,this.mini.style.left=n.miniLeft});t?(this.list.hide(r),this.uiLrc.hide()):r(),t===!1&&m.send("player_expo"),t===!1&&this.audio.src()&&m.send("player_expo_play")},onStorageVolumeSet:function(e,t){this.audio.volume()!=t.value&&this.uiVolume.set(+t.value)},onStorageMuteSet:function(e,t){this.audio.mute()!=!!(t.value|0)&&this.audio.mute(!!(t.value|0))},onStorageClientSet:function(e,t){this.client!=t.value&&this.audio.pause()},onStoragePlayTypeSet:function(e,t){this.playtype!=t.value&&this.setPlayType(t.value|0)},onStorageShowSet:function(e,t){t.value==1?this.show():this.hide()},onProgressMouseMove:function(e){var t=e.clientX-this.nodes.progress_range_out.getBoundingClientRect().left,n=t/this.nodes.progress_range_out.offsetWidth;this.nodes.time_tip.style.display="",this.nodes.time_tip.style.left=t-20+"px",this.nodes.time_tip_text.innerHTML=d(this.audio.duration()*n)},onProgressMouseOut:function(e){this.nodes.time_tip.style.display="none"},onDocumentClick:function(e){var t=i.fixEvent(e).target;t===this.nodes.play_type||i.contains(this.nodes.play_type,t)?this.showPlayTypeSelect():setTimeout(y(this,function(){this.hidePlayTypeSelect()}),10)},toggleFold:function(e){this.list.loadOnce(),this.isFold=typeof e=="boolean"?e:!this.isFold,this.trigger("fold",this.isFold),typeof e!="boolean"&&m.send(this.isFold?"player_stow":"player_develop")},toggleLrc:function(e){this.uiLrc.toggle()},toggleList:function(){this.list.toggle()},togglePlay:function(){this.list.loadOnce(y(this,function(){this.nowPlaySong?this.audio.src()?this.audio[this.audio.playing()?"pause":"play"]():this.playWithSong(this.nowPlaySong):this.playWithSong(this.list.getSong())}))},toggleMute:function(){this.audio.mute(!this.audio.mute())},setLikeBySong:function(e,t){this.nowPlaySong&&e.object_id===this.nowPlaySong.object_id&&(this.nowPlaySong.is_like=t,i[t?"removeClassName":"addClassName"](this.nodes.like,"ico_like"),i[t?"addClassName":"removeClassName"](this.nodes.like,"ico_unlike"),this.nodes.like.setAttribute("title",t?s("#L{取消赞}"):s("#L{赞}"))),this.list.likeByObjectId(e.object_id,t)},onLike:function(e){o.like({object_id:e.object_id},y(this,function(t){this.setLikeBySong(e,!!t.like)}))},onShare:function(e){e.copy===undefined?this.trigger("share",e):o.shareInfo({object_id:e.object_id},y(this,function(t){e.copy=t.shareinfo||"",this.trigger("share",e)}))},_suda_playedOver60Pst:function(e,t){if(this._suda_playedOver60Pst_sended===!0)return;e/t>.6&&(m.send("play_60p"),this._suda_playedOver60Pst_sended=!0)},_suda_sendPlayDuration:function(e,t){"_suda_sendPlayDuration_cache"in this||(this._suda_sendPlayDuration_cache={}),t!=0&&!this._suda_sendPlayDuration_cache[e]&&((new Image).src="//ting.weibo.com/page/Appclient/fixab?"+i.jsonToQuery({a:e,b:t}),this._suda_sendPlayDuration_cache[e]=t)},_time_check:function(e,t,n){function r(e){if(e.end&&e.start&&e.id){var t=parseInt((e.end-e.start)/1e3);t>0&&o.time({object_id:e.id,length_play:t,source_id:e.song.source_id,_ts:e.song._ts,token:e.song.token})}}var i=+(new Date);this._timeRange===undefined&&(this._timeRange={}),this._timeRange.id!=t&&this._timeRange.start&&(this._timeRange.end||(this._timeRange.end=i),r(this._timeRange),this._timeRange={}),this._timeRange.id=t,this._timeRange.song=n;switch(e){case"start":this._timeRange.start||(this._timeRange.start=i,this._timeRange.end=null);break;case"end":this._timeRange.start&&!this._timeRange.end&&(this._timeRange.end=i)}this._timeRange.end&&this._timeRange.start&&(r(this._timeRange),this._timeRange={})},_time_onAudioPlay:function(){this._time_check("start",this.nowPlaySong.object_id,this.nowPlaySong)},_time_onAudioPauseOrEnd:function(){this._time_check("end",this.nowPlaySong.object_id,this.nowPlaySong)}}),e.exports=function(){return new _}},C:function(e,t,n,r){function o(e){o=e}function u(e){var t=[].splice.call(arguments,1,arguments.length),n=[e,s[o]||{}].concat(t),r=i.core.util.language.apply(this,n);return r}var i=n("B"),s={"zh-tw":n("d"),"zh-hk":n("D"),en:n("e")},o="zh-cn";t.translate=u,t.lang=o},d:function(e,t,n,r){e.exports={"赞":"贊","取消赞":"取消贊","列表循环":"列表循環","单曲循环":"單曲循環","随机播放":"隨機播放","暂停":"暫停","播放":"播放","显示歌词":"顯示歌詞","隐藏歌词":"隱藏歌詞","展开列表":"展開列表","隐藏列表":"隱藏列表","展开":"展開","收起":"收起","微音乐":"微音樂","抱歉，暂无歌词":"抱歉，暫無歌詞。"}},D:function(e,t,n,r){e.exports={"赞":"贊","取消赞":"取消贊","列表循环":"列表循環","单曲循环":"單曲循環","随机播放":"隨機播放","暂停":"暫停","播放":"播放","显示歌词":"顯示歌詞","隐藏歌词":"隱藏歌詞","展开列表":"展開列表","隐藏列表":"隱藏列表","展开":"展開","收起":"收起","微音乐":"微音樂","抱歉，暂无歌词":"抱歉，暫無歌詞。"}},e:function(e,t,n,r){e.exports={"赞":"Like","取消赞":"Unlike","列表循环":"Loop","单曲循环":"Repeat","随机播放":"Shuffle","暂停":"Pause","播放":"Play","显示歌词":"Unfold lyrics","隐藏歌词":"Fold lyrics","展开列表":"Unfold song list","隐藏列表":"Fold song list","展开":"Unfold musicplayer","收起":"Fold musicplayer","微音乐":"Weibo Music","抱歉，暂无歌词":"Sorry, no lyrics."}},E:function(e,t,n,r){function c(e,t){return function(n,r,i){function o(t,s){if(t){i&&i();return}var o=l[e]||function(e){return e},u=o(s,n);u.code===1?r&&r(u.data,n,s):i&&i()}n.clinet_verison=s.verison;switch(t.type){case"jsonp":a({url:t.url,varkey:t.varkey,responseName:t.responseName,args:n,onComplete:function(e){o(undefined,e)},onTimeout:function(){o("timeout")}});break;case"iframeProxy":f({url:t.url,method:t.method,params:n},o)}}}var i=n("B"),s=n("f"),o=n("F"),u=i.foreach,a=i.core.io.jsonp,f=n("g"),l={info:function(e,t){return{code:e.code,data:e.data[0]}},firstSongInfo:function(e,t){return{code:1,data:e}}};u(o,function(e,n){t[n]=c(n,e)})},f:function(e,t,n,r){e.exports={verison:"6.1.4",box:document.body}},F:function(e,t,n,r){e.exports={info:{url:"//ting.weibo.com/page/playlist/getSongInfo",method:"get",type:"iframeProxy"},token:{url:"//ting.weibo.com/page/playlist/token",method:"get",type:"iframeProxy"},add:{url:"//ting.weibo.com/page/playlist/getSongInfo",method:"get",type:"iframeProxy"},load:{url:"//ting.weibo.com/page/playlist/getTab",method:"get",type:"iframeProxy"},search:{url:"//ting.weibo.com/page/playlist/searchList",method:"get",type:"iframeProxy"},remove:{url:"//ting.weibo.com/page/playlist/deleteListen",method:"get",type:"iframeProxy"},shareInfo:{url:"//ting.weibo.com/page/playlist/getshareinfo",method:"get",type:"iframeProxy"},like:{url:"//ting.weibo.com/page/playlist/likeobject",method:"get",type:"iframeProxy"},time:{url:"//ting.weibo.com/page/playlist/writeplaytime",method:"get",type:"iframeProxy"},firstSongInfo:{url:"//rank.music.sina.com.cn/musicplayer_alipoll.json",method:"get",type:"jsonp",varkey:"callback",responseName:"musicplay_alipoll"},syncPlayList:{url:"//ting.weibo.com/page/playlist/storePlayList",method:"post",type:"iframeProxy"}}},g:function(e,t,n,r){function p(e){function t(){throw c+" load failed"}function n(){clearTimeout(p.timeoutIntrtval);var t;r.detachEvent?r.detachEvent("onload",n):r.onload=null,e(r)}var r=document.createElement("iframe");return r.style.cssText=h,r.attachEvent?r.attachEvent("onload",n):r.onload=n,r.src=c,p.timeoutIntrtval=setTimeout(t,5e3),s.box.appendChild(r)}function d(e){e=e||o,d.iframe&&e(d.iframe),d.waitingCallbacks===undefined&&(p(function(e){d.iframe=e,a(window,"message",m);while(one=d.waitingCallbacks.shift())one(d.iframe)}),d.waitingCallbacks=[]),d.waitingCallbacks.push(e)}function m(e){e=e||window.event;var t;try{t=l(e.data);if(t.from!="WEIBO_MUSIC_PLAYER")return}catch(n){return}var r=v[t.request.id];r&&(delete v[t.request.id],r(t.error,t.response))}function g(e,t){var n=e.id=u();v[n]=t,d(function(t){t.contentWindow.postMessage(f(e),"*")})}var i=n("B"),s=n("f"),o=i.funcEmpty,u=i.getUniqueKey,a=i.addEvent,f=i.jsonToStr,l=i.strToJson,c="//ting.weibo.com/public/js/jsproxy.html",h="width:0;height:0;border:0;opacity:0;position:absolute;top:-10px;left:-10px;",v={};e.exports=g},G:function(e,t,n,r){function d(e){return navigator.appName.indexOf("Microsoft")!=-1?window[e]:document[e]}function v(e){this._audio=i.C("audio"),this._audio.autoplay=!1,this._audio.preload="auto",this._audio.autobuffer=!0,this._vol=0,this._currentTime=0,this._duration=0,this._loadpst=0,this._seekable=!1,this._playing=!1,this._muted=!1,this._timer=null,this._isready=!0,this._readyfns=[],this._src="",this._bindEvents()}function m(){var e="//js.t.sinajs.cn/t5/pack/static/flash/audio5js.swf",t="__audioFlashInstance1__"+h++,n=document.body.appendChild(i.C("div")),r={playerInstance:"window.__audioFlashInstances1['"+t+"']"},o={allowscriptaccess:"always",wmode:"transparent"};n.style.cssText=";position:absolute;width:1px;height:1px;top:-10px;left:-10px;",n.innerHTML='<div id="'+t+'"></div>',s.embedSWF(e+"?ts="+((new Date).getTime()+Math.random()),t,"1","1","9.0.0",null,r,o),c[t]=this,this._audio=d(t),this._id=t,this._currentTime=0,this._vol=0,this._seekable=!1,this._playing=!1,this._muted=!1,this._duration=0,this._loadpst=0,this._isready=!1,this._readyfns=[],this._src=""}var i=n("B"),s=n("h"),o=n("H"),u=n("i"),a=n("I"),f=i.addEvent,l=i.removeEvent,c=window.__audioFlashInstances1={},h=0,p=["progress","loadstart","load","loadedmetadata","play","pause","ended","error","timeupdate","seeking","seeked","ready"];o(v.prototype,a,{isready:function(){return this._isready},ready:function(e){return this.isready()===!0?e&&e():e&&this._readyfns.push(e),this},src:function(){return this._src},load:function(e){return this._src=e,this.loadTimer=setTimeout(u(this,function(){clearTimeout(this.loadTimer),this._reset(),this._audio.setAttribute("src",this._src),this._audio.load()}),1e3),this},play:function(){return this._audio.play(),this},pause:function(){return this._audio.pause(),this},playing:function(){return this._playing},volume:function(e){return arguments.length>0?this._setVolume(e):this._getVolume()},mute:function(e){return arguments.length>0?this._setMute(e):this._getMute()},currentTime:function(e){return arguments.length>0?this._setCurrentTime(e):this._getCurrentTime()},duration:function(){return this._duration},buffered:function(){return this._loadpst},_getVolume:function(){return this._vol},_setVolume:function(e){return this._vol=Math.max(0,Math.min(1,e)),this._muted===!1&&(this._audio.volume=this._vol),this},_getMute:function(){return this._muted},_setMute:function(e){return e=!!e,this._muted=e,this._audio.volume=e?0:this._vol,this.trigger("mute",e),this},_getCurrentTime:function(){return this._currentTime},_setCurrentTime:function(e){return this._audio.currentTime=this._currentTime=e,this.trigger("timeupdate",this._currentTime,this._duration),this},_onLoadStart:function(){this.trigger("loadstart")},_onLoad:function(){if(this._seekable=!!(this._audio.seekable&&this._audio.seekable.length>0))clearInterval(this._timer),this._timer=setInterval(u(this,this._onProgress),250);this.trigger("load")},_onLoadedMetadata:function(){this.trigger("loadedmetadata")},_onPlay:function(){this._playing=!0,this.trigger("play")},_onPause:function(){this._playing=!1,this.trigger("pause")},_onEnded:function(){this._playing=!1,this.trigger("ended")},_onError:function(e){this._playing=!1,this.trigger("error",[e])},_onTimeUpdate:function(){this._audio.buffered!==null&&this._audio.buffered.length&&this.playing&&(this._currentTime=this._audio.currentTime,this._duration=this._audio.duration===Infinity?null:this._audio.duration,this.trigger("timeupdate",[this._currentTime,this._duration]))},_onProgress:function(){this._audio.buffered!==null&&this._audio.buffered.length&&this.trigger("progress",[this._loadpst=parseInt(this._audio.buffered.end(this._audio.buffered.length-1)/this._audio.duration*100,10)])},_onSeeking:function(){this.trigger("seeking")},_onSeeked:function(){this.trigger("seeked")},_clearLoadProgress:function(){return clearInterval(this._timer),this},_reset:function(){return this._clearLoadProgress(),this._seekable=!1,this._playing=!1,this._duration=0,this._currentTime=0,this._loadpst=0,this},_bindEvents:function(){this._onLoadStartBinded=u(this,this._onLoadStart),this._onLoadBinded=u(this,this._onLoad),this._onLoadedMetadataBinded=u(this,this._onLoadedMetadata),this._onPlayBinded=u(this,this._onPlay),this._onPauseBinded=u(this,this._onPause),this._onEndedBinded=u(this,this._onEnded),this._onErrorBinded=u(this,this._onError),this._onTimeUpdateBinded=u(this,this._onTimeUpdate),this._onSeekingBinded=u(this,this._onSeeking),this._onSeekedBinded=u(this,this._onSeeked),f(this._audio,"loadstart",this._onLoadStartBinded),f(this._audio,"canplay",this._onLoadBinded),f(this._audio,"loadedmetadata",this._onLoadedMetadataBinded),f(this._audio,"play",this._onPlayBinded),f(this._audio,"pause",this._onPauseBinded),f(this._audio,"ended",this._onEndedBinded),f(this._audio,"error",this._onErrorBinded),f(this._audio,"timeupdate",this._onTimeUpdateBinded),f(this._audio,"seeking",this._onSeekingBinded),f(this._audio,"seeked",this._onSeekedBinded)},_unbindEvents:function(){l(this._audio,"loadstart",this._onLoadStartBinded),l(this._audio,"canplay",this._onLoadBinded),l(this._audio,"loadedmetadata",this._onLoadedMetadataBinded),l(this._audio,"play",this._onPlayBinded),l(this._audio,"pause",this._onPauseBinded),l(this._audio,"ended",this._onEndedBinded),l(this._audio,"error",this._onErrorBinded),l(this._audio,"timeupdate",this._onTimeUpdateBinded),l(this._audio,"seeking",this._onSeekingBinded),l(this._audio,"seeked",this._onSeekedBinded)}}),o(m.prototype,a,{isready:function(){return this._isready},ready:function(e){return this.isready()===!0?e&&e():e&&this._readyfns.push(e),this},src:function(){return this._src},load:function(e){this._reset(),this._src=e,this._audio.load(this._src||"about:blank")},play:function(){return this._audio.pplay(),this},pause:function(){return this._audio.ppause(),this},playing:function(){return this._playing},volume:function(e){return arguments.length>0?this._setVolume(e):this._getVolume()},mute:function(e){return arguments.length>0?this._setMute(e):this._getMute()},currentTime:function(e){return arguments.length>0?this._setCurrentTime(e):this._getCurrentTime()},duration:function(){return this._duration},buffered:function(){return this._loadpst},_getVolume:function(){return this._vol},_setVolume:function(e){return this._vol=Math.max(0,Math.min(1,e)),this._muted===!1&&this._audio.setVolume(this._vol),this},_getCurrentTime:function(){return this._currentTime},_setCurrentTime:function(e){return this._audio.seekTo(this._currentTime=e),this},_getMute:function(){return this._muted},_setMute:function(e){return e=!!e,this._muted=e,this._audio.setVolume(e?0:this._vol),this.trigger("mute",e),this},_reset:function(){return this._seekable=!1,this._playing=!1,this._duration=0,this._currentTime=0,this._loadpst=0,this},eiReady:function(){this._audio=d(this._id),this._isready=!0,this.load(""),i.foreach(this._readyfns,u(this,function(e){e&&e()}))},eiLoadStart:function(){this.trigger("loadstart")},eiLoadedMetadata:function(){this.trigger("loadedmetadata")},eiCanPlay:function(){this.trigger("load")},eiTimeUpdate:function(e,t,n){this._currentTime=e,this._duration=t,this._seekable=n,this.trigger("timeupdate",[e,n?t:0])},eiProgress:function(e){this.trigger("progress",[this._loadpst=e])},eiLoadError:function(e){this._playing=!1,this.trigger("error",[e])},eiPlay:function(){this._playing=!0,this.trigger("play")},eiPause:function(){this._playing=!1,this.trigger("pause")},eiEnded:function(){this._playing=!1,this.trigger("ended")},eiSeeking:function(){this.trigger("seeking")},eiSeeked:function(){this.trigger("seeked")}}),e.exports=function(e){return new({HTML5:v,FLASH:m}[e.toUpperCase()])}},h:function(e,t,n,r){var i=function(){function k(){if(w)return;try{var e=f.getElementsByTagName("body")[0].appendChild(z("span"));e.parentNode.removeChild(e)}catch(t){return}w=!0;var n=h.length;for(var r=0;r<n;r++)h[r]()}function L(e){w?e():h[h.length]=e}function A(t){if(typeof a.addEventListener!=e)a.addEventListener("load",t,!1);else if(typeof f.addEventListener!=e)f.addEventListener("load",t,!1);else if(typeof a.attachEvent!=e)W(a,"onload",t);else if(typeof a.onload=="function"){var n=a.onload;a.onload=function(){n(),t()}}else a.onload=t}function O(){c?M():_()}function M(){var n=f.getElementsByTagName("body")[0],r=z(t);r.setAttribute("type",s);var i=n.appendChild(r);if(i){var o=0;(function(){if(typeof i.GetVariable!=e){var t=i.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),N.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}else if(o<10){o++,setTimeout(arguments.callee,10);return}n.removeChild(r),i=null,_()})()}else _()}function _(){var t=p.length;if(t>0)for(var n=0;n<t;n++){var r=p[n].id,i=p[n].callbackFn,s={success:!1,id:r};if(N.pv[0]>0){var o=U(r);if(o)if(X(p[n].swfVersion)&&!(N.wk&&N.wk<312))$(r,!0),i&&(s.success=!0,s.ref=D(r),i(s));else if(p[n].expressInstall&&P()){var u={};u.data=p[n].expressInstall,u.width=o.getAttribute("width")||"0",u.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(u.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(u.align=o.getAttribute("align"));var a={},f=o.getElementsByTagName("param"),l=f.length;for(var c=0;c<l;c++)f[c].getAttribute("name").toLowerCase()!="movie"&&(a[f[c].getAttribute("name")]=f[c].getAttribute("value"));H(u,a,r,i)}else B(o),i&&i(s)}else{$(r,!0);if(i){var h=D(r);h&&typeof h.SetVariable!=e&&(s.success=!0,s.ref=h),i(s)}}}}function D(n){var r=null,i=U(n);if(i&&i.nodeName=="OBJECT")if(typeof i.SetVariable!=e)r=i;else{var s=i.getElementsByTagName(t)[0];s&&(r=s)}return r}function P(){return!E&&X("6.0.65")&&(N.win||N.mac)&&!(N.wk&&N.wk<312)}function H(t,n,r,i){E=!0,y=i||null,b={success:!1,id:r};var s=U(r);if(s){s.nodeName=="OBJECT"?(m=j(s),g=null):(m=s,g=r),t.id=o;if(typeof t.width==e||!/%$/.test(t.width)&&parseInt(t.width,10)<310)t.width="310";if(typeof t.height==e||!/%$/.test(t.height)&&parseInt(t.height,10)<137)t.height="137";f.title=f.title.slice(0,47)+" - Flash Player Installation";var u=N.ie&&N.win?"ActiveX":"PlugIn",l="MMredirectURL="+a.location.toString().replace(/&/g,"%26")+"&MMplayerType="+u+"&MMdoctitle="+f.title;typeof n.flashvars!=e?n.flashvars+="&"+l:n.flashvars=l;if(N.ie&&N.win&&s.readyState!=4){var c=z("div");r+="SWFObjectNew",c.setAttribute("id",r),s.parentNode.insertBefore(c,s),s.style.display="none",function(){s.readyState==4?s.parentNode.removeChild(s):setTimeout(arguments.callee,10)}()}F(t,n,r)}}function B(e){if(N.ie&&N.win&&e.readyState!=4){var t=z("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(j(e),t),e.style.display="none",function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(j(e),e)}function j(e){var n=z("div");if(N.win&&N.ie)n.innerHTML=e.innerHTML;else{var r=e.getElementsByTagName(t)[0];if(r){var i=r.childNodes;if(i){var s=i.length;for(var o=0;o<s;o++)(i[o].nodeType!=1||i[o].nodeName!="PARAM")&&i[o].nodeType!=8&&n.appendChild(i[o].cloneNode(!0))}}}return n}function F(n,r,i){var o,u=U(i);if(N.wk&&N.wk<312)return o;if(u){typeof n.id==e&&(n.id=i);if(N.ie&&N.win){var a="";for(var f in n)n[f]!=Object.prototype[f]&&(f.toLowerCase()=="data"?r.movie=n[f]:f.toLowerCase()=="styleclass"?a+=' class="'+n[f]+'"':f.toLowerCase()!="classid"&&(a+=" "+f+'="'+n[f]+'"'));var l="";for(var c in r)r[c]!=Object.prototype[c]&&(l+='<param name="'+c+'" value="'+r[c]+'" />');u.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+l+"</object>",d[d.length]=n.id,o=U(n.id)}else{var h=z(t);h.setAttribute("type",s);for(var p in n)n[p]!=Object.prototype[p]&&(p.toLowerCase()=="styleclass"?h.setAttribute("class",n[p]):p.toLowerCase()!="classid"&&h.setAttribute(p,n[p]));for(var v in r)r[v]!=Object.prototype[v]&&v.toLowerCase()!="movie"&&I(h,v,r[v]);u.parentNode.replaceChild(h,u),o=h}}return o}function I(e,t,n){var r=z("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function q(e){var t=U(e);t&&t.nodeName=="OBJECT"&&(N.ie&&N.win?(t.style.display="none",function(){t.readyState==4?R(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function R(e){var t=U(e);if(t){for(var n in t)typeof t[n]=="function"&&(t[n]=null);t.parentNode.removeChild(t)}}function U(e){var t=null;try{t=f.getElementById(e)}catch(n){}return t}function z(e){return f.createElement(e)}function W(e,t,n){e.attachEvent(t,n),v[v.length]=[e,t,n]}function X(e){var t=N.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function V(n,r,i,s){if(N.ie&&N.mac)return;var o=f.getElementsByTagName("head")[0];if(!o)return;var u=i&&typeof i=="string"?i:"screen";s&&(S=null,x=null);if(!S||x!=u){var a=z("style");a.setAttribute("type","text/css"),a.setAttribute("media",u),S=o.appendChild(a),N.ie&&N.win&&typeof f.styleSheets!=e&&f.styleSheets.length>0&&(S=f.styleSheets[f.styleSheets.length-1]),x=u}N.ie&&N.win?S&&typeof S.addRule==t&&S.addRule(n,r):S&&typeof f.createTextNode!=e&&S.appendChild(f.createTextNode(n+" {"+r+"}"))}function $(e,t){if(!T)return;var n=t?"visible":"hidden";w&&U(e)?U(e).style.visibility=n:V("#"+e,"visibility:"+n)}function J(t){var n=/[\\\"<>\.;]/,r=n.exec(t)!=null;return r&&typeof encodeURIComponent!=e?encodeURIComponent(t):t}var e="undefined",t="object",n="Shockwave Flash",r="ShockwaveFlash.ShockwaveFlash",s="application/x-shockwave-flash",o="SWFObjectExprInst",u="onreadystatechange",a=window,f=document,l=navigator,c=!1,h=[O],p=[],d=[],v=[],m,g,y,b,w=!1,E=!1,S,x,T=!0,N=function(){var i=typeof f.getElementById!=e&&typeof f.getElementsByTagName!=e&&typeof f.createElement!=e,o=l.userAgent.toLowerCase(),u=l.platform.toLowerCase(),h=u?/win/.test(u):/win/.test(o),p=u?/mac/.test(u):/mac/.test(o),d=/webkit/.test(o)?parseFloat(o.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,v=!1,m=[0,0,0],g=null;if(typeof l.plugins!=e&&typeof l.plugins[n]==t)g=l.plugins[n].description,g&&(typeof l.mimeTypes==e||!l.mimeTypes[s]||!!l.mimeTypes[s].enabledPlugin)&&(c=!0,v=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),m[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),m[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),m[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof a.ActiveXObject!=e)try{var y=new ActiveXObject(r);y&&(g=y.GetVariable("$version"),g&&(v=!0,g=g.split(" ")[1].split(","),m=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]))}catch(b){}return{w3:i,pv:m,wk:d,ie:v,win:h,mac:p}}(),C=function(){if(!N.w3)return;(typeof f.readyState!=e&&f.readyState=="complete"||typeof f.readyState==e&&(f.getElementsByTagName("body")[0]||f.body))&&k(),w||(typeof f.addEventListener!=e&&f.addEventListener("DOMContentLoaded",k,!1),N.ie&&N.win&&(f.attachEvent(u,function(){f.readyState=="complete"&&(f.detachEvent(u,arguments.callee),k())}),a==top&&function(){if(w)return;try{f.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}k()}()),N.wk&&function(){if(w)return;if(!/loaded|complete/.test(f.readyState)){setTimeout(arguments.callee,0);return}k()}(),A(k))}(),K=function(){N.ie&&N.win&&window.attachEvent("onunload",function(){var e=v.length;for(var t=0;t<e;t++)v[t][0].detachEvent(v[t][1],v[t][2]);var n=d.length;for(var r=0;r<n;r++)q(d[r]);for(var s in N)N[s]=null;N=null;for(var o in i)i[o]=null;i=null})}();return{registerObject:function(e,t,n,r){if(N.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,p[p.length]=i,$(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(N.w3)return D(e)},embedSWF:function(n,r,i,s,o,u,a,f,l,c){var h={success:!1,id:r};N.w3&&!(N.wk&&N.wk<312)&&n&&r&&i&&s&&o?($(r,!1),L(function(){i+="",s+="";var p={};if(l&&typeof l===t)for(var d in l)p[d]=l[d];p.data=n,p.width=i,p.height=s;var v={};if(f&&typeof f===t)for(var m in f)v[m]=f[m];if(a&&typeof a===t)for(var g in a)typeof v.flashvars!=e?v.flashvars+="&"+g+"="+a[g]:v.flashvars=g+"="+a[g];if(X(o)){var y=F(p,v,r);p.id==r&&$(r,!0),h.success=!0,h.ref=y}else{if(u&&P()){p.data=u,H(p,v,r,c);return}$(r,!0)}c&&c(h)})):c&&c(h)},switchOffAutoHideShow:function(){T=!1},ua:N,getFlashPlayerVersion:function(){return{major:N.pv[0],minor:N.pv[1],release:N.pv[2]}},hasFlashPlayerVersion:X,createSWF:function(e,t,n){return N.w3?F(e,t,n):undefined},showExpressInstall:function(e,t,n,r){N.w3&&P()&&H(e,t,n,r)},removeSWF:function(e){N.w3&&q(e)},createCSS:function(e,t,n,r){N.w3&&V(e,t,n,r)},addDomLoadEvent:L,addLoadEvent:A,getQueryParamValue:function(e){var t=f.location.search||f.location.hash;if(t){/\?/.test(t)&&(t=t.split("?")[1]);if(e==null)return J(t);var n=t.split("&");for(var r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return J(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(E){var e=U(o);e&&m&&(e.parentNode.replaceChild(m,e),g&&($(g,!0),N.ie&&N.win&&(m.style.display="block")),y&&y(b)),E=!1}}}}();e.exports=i},H:function(e,t,n,r){function i(e){var t=arguments.length,n=1,r;while(n<t){r=arguments[n];for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i]);n++}return e}e.exports=i},i:function(e,t,n,r){function i(e,t){return function(){return t.apply(e,arguments)}}e.exports=i},I:function(e,t,n,r){function a(e){s(e,function(){u in e||(e[u]={})})()}var i=n("B"),s=n("i"),o=i.custEvent,u="__EVT__";e.exports={on:function(e,t){return a(this),o.define(this[u],e),o.add(this[u],e,t),this},once:function(e,t){return a(this),o.define(this[u],e),o.once(this[u],e,t),this},off:function(e,t){return a(this),o.remove(this[u],e,t),this},trigger:function(e,t){return a(this),o.fire(this[u],e,t),this}}},j:function(e,t,n,r){function o(){this._evt={},this._isIE8=!("addEventListener"in window),this._isIE8?(document.attachEvent("onstorage",s(this,this._onchangeForIE8)),this._oldValues={}):window.addEventListener("storage",s(this,this._onchange),!1)}var i=n("B"),s=n("i");o.prototype={set:function(e,t,n){n=n||i.funcEmpty,localStorage.getItem(e)!=t&&localStorage.setItem(e,t),n()},remove:function(e,t){t=t||i.funcEmpty,t(localStorage.removeItem(e,value))},get:function(e,t){t=t||i.funcEmpty,t(localStorage.getItem(e))},has:function(e,t){t=t||i.funcEmpty,t(localStorage.getItem(e)!=null&&localStorage.getItem(e)!=undefined)},on:function(e,t){this._isIE8&&(this._oldValues[e]=localStorage.getItem(e)),i.custEvent.define(this._evt,e),i.custEvent.add(this._evt,e,t)},off:function(e,t){i.custEvent.remove(this._evt,e,t)},_onchangeForIE8:function(){setTimeout(s(this,function(){var e,t,n;for(e in this._oldValues)t=this._oldValues[e],n=localStorage.getItem(e),n!=t&&(this._oldValues[e]=n,i.custEvent.fire(this._evt,e,{key:e,value:n,oldValue:t,newValue:n}))}),10)},_onchange:function(e){i.custEvent.fire(this._evt,e.key,{key:e.key,value:e.newValue,oldValue:e.oldValue,newValue:e.newValue})}},e.exports=new o},J:function(e,t,n,r){function a(e,t,n){this.rangeNode=e,this.outNode=t,this.draging=!1,this.range=n|0,this.mClinetLeft=0,this._bind(),this.drawn(),this.isEnable}var i=n("B"),s=n("H"),o=n("i"),u=n("I");s(a.prototype,{setWidthoutTrigger:function(e){return this.range=Math.max(Math.min(e,1),0),this.drawn(),this},set:function(e,t){if(t!=1&&this.draging===!0)return;return this.range=Math.max(Math.min(e,1),0),this.trigger("set",this.range),this.drawn(),this},get:function(){return this.range},_bind:function(){this._dragMouseDown=o(this,this.dragMouseDown),this._dragMouseMove=o(this,this.dragMouseMove),this._dragMouseUp=o(this,this.dragMouseUp),i.addEvent(this.outNode,"mousedown",this._dragMouseDown),i.addEvent(document,"mousemove",this._dragMouseMove),i.addEvent(document,"mouseup",this._dragMouseUp)},dragMouseDown:function(e){if(this.isEnable==0)return;e=i.fixEvent(e),this.set((e.clientX-this.outNode.getBoundingClientRect().left)/this.outNode.offsetWidth,!0),this.draging=!0,i.preventDefault(e),this.trigger("dragStart",this.range)},dragMouseMove:function(e){e=i.fixEvent(e);if(this.draging===!1)return;this.set((e.clientX-this.outNode.getBoundingClientRect().left)/this.outNode.offsetWidth,!0),this.trigger("draging",this.range)},dragMouseUp:function(e){e=i.fixEvent(e);if(this.draging===!1)return;this.draging=!1,this.mClinetLeft=0,this.set(this.rangeNode.offsetWidth/this.outNode.offsetWidth,!0),this.trigger("dragEnd",this.range)},drawn:function(){return this.rangeNode.style.width=this.range*100+"%",this},enable:function(e){return this.isEnable=e,this}},u),e.exports=function(e,t,n){return new a(e,t,n)}},k:function(e,t,n,r){function p(e,t,n){n=n||function(e){return e};if(t.length<=2)return t[0];var r=(t.length-1)/2|0,i=n(t[r]);if(i==e)return t[r];if(i<e)return p(e,t.slice(r,t.length),n);if(i>e)return p(e,t.slice(0,r+1),n)}function d(){this.nodes=i.foreach(i.builder(s(l)).list,function(e){return e[0]}),this.el=this.nodes.lrc,this.layer=this.nodes.lrc_content,this.lrc=[],this.nowCur=null,this.type=null,this.draging=!1,this._y=null,this._mt=null,this._p=15,this.__p=0,this._lastMt=null,this.layer.style.marginTop="15px",this.isCurrentByTime=!0,this._time,this._nextMustSet=!1,this.init(),this.layer.parentNode.style.cursor="pointer"}var i=n("B"),s=n("C").translate,o=n("H"),u=n("i"),a=n("I"),f=n("K"),l=n("l"),c=n("L"),h=n("m")("tblog_musicpageplayer");o(d.prototype,a,f,{init:function(){i.addEvent(this.layer.parentNode,"mousedown",u(this,this.onMouseDown)),i.addEvent(document,"mousemove",u(this,this.onMouseMove)),i.addEvent(document,"mouseup",u(this,this.onMouseUp))},onMouseDown:function(e){e=i.fixEvent(e),this.draging=!0,this.isCurrentByTime=!1,this._y=e.clientY,this._mt=parseInt(this.layer.style.marginTop,10),this.enableUserSelect(!1),this.setTanstitonMove(!1),clearTimeout(this._time),document.body.style.cursor="pointer"},onMouseMove:function(e){e=i.fixEvent(e);if(this.draging==0)return;var t=this._mt+e.clientY-this._y,n=-this.layer.offsetHeight+30;t=t>30?30:t,t=t<n?n:t,isNaN(t)||(this.layer.style.marginTop=t+"px"),this.type!="lyric"&&(this.__p=t-this._mt)},onMouseUp:function(){this.draging==1&&(this.enableUserSelect(!0),this.mouseY=null,this.type=="lyric"?this._time=setTimeout(u(this,function(){this.setTanstitonMove(!0),this.isCurrentByTime=!0,this.nextMustSet()}),1e3):(this.isCurrentByTime=!0,this._p+=this.__p),document.body.style.cursor="",h.send("songwords_drag")),this.draging=!1},enableUserSelect:function(e){i.foreach(["webkitUserSelect","MozUserSelect","MsUserSelect","userSelect"],u(this,function(t){t in document.body.style&&(document.body.style[t]=e?"":"none")}))},setTanstitonMove:function(e){this.layer.style.cssText+=e?"-webkit-transition:margin-top 0.5s ease;-moz-transition:margin-top 0.5s ease;-o-transition:margin-top 0.5s ease;transition:margin-top 0.5s ease;":"-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none;"},setCurrentByTime:function(e,t){if(!this.isShow())return;var n,r;if(this.isCurrentByTime==0)return;if(this.lrc.length===0)return;if(this.type==="lyric"){n=p(e,this.lrc,function(e){return e.time});if(this._nextMustSet===!1&&n&&n===this.nowCur)return;this._nextMustSet=!1,r=i.core.dom.position(n.el,{parent:this.layer}).t,this.layer.style.marginTop=(r-this.layer.parentNode.offsetHeight/2+n.el.offsetHeight/2)*-1+"px",this.nowCur&&i.removeClassName(this.nowCur.el,"cur_word"),this.nowCur=n,i.addClassName(this.nowCur.el,"cur_word")}else if(this.layer.offsetHeight){var s=parseInt(-this.layer.offsetHeight+30),o=parseInt(this._p-this.layer.offsetHeight*e/t);this.layer.style.marginTop=(o<s?s:o)+"px"}},load:function(e){var t,n;if(e&&e.length)if(/\[\d*:\d*((\.|\:)\d*)*\]/.test(e))t="lyric",n=c(e).lyrics;else{t="text",n=[];var r=e.split("\n"),o=r.length;i.foreach(r,function(e,t){/^\s+$/.test(e)||n.push({pst:(t+1)/o,text:e})})}else t="empty";var a;this.reset(),this.type=t,t!="empty"?(i.foreach(n,u(this,function(e,t){a=i.C("p"),a.innerHTML=e.text,a.style.cssText+="-webkit-transition:color 0.5s ease;-moz-transition:color 0.5s ease;-o-transition:color 0.5s ease;transition:color 0.5s ease;",this.type!="lyric"&&i.addClassName(a,"cur_word"),this.layer.appendChild(a),this.lrc.push({el:a,time:e.time,pst:e.pst,index:t,text:e.text})})),setTimeout(u(this,function(){this.setTanstitonMove(this.type==="lyric")}),0)):(a=i.C("p"),a.innerHTML=s("#L{抱歉，暂无歌词}"),i.addClassName(a,"cur_word"),this.layer.appendChild(a))},reset:function(){this.lrc.length=0,this.nowCur=null,this.layer.style.marginTop="15px",this._p=15;while(this.layer.childNodes[0])i.removeNode(this.layer.childNodes[0])},nextMustSet:function(){this._nextMustSet=!0}}),e.exports=function(){return new d}},K:function(e,t,n,r){var i=n("B"),s=n("i"),o,u=i.C("div");i.foreach([["WebkitAnimation","webkitAnimationEnd"],["webkitAnimation","webkitAnimationEnd"],["MozAnimation","animationend"],["OAnimation","OAnimationEnd"],["msAnimation","msAnimationEnd"],["animation","animationend"]],function(e){typeof u.style[e[0]]=="string"&&(o=e[1])}),e.exports={show:function(e){function t(){i.removeEvent(this.el,o,n),i.removeClassName(this.el,"ani-fade-in"),this._animating=!1,typeof e=="function"&&e(),this.trigger&&this.trigger("shown")}if(this._animating)return;if(this.isShow()){typeof e=="function"&&e();return}var n=s(this,t);this._animating=!0,i.addClassName(this.el,"ani-fade-in"),this.el.style.display="",this.trigger&&this.trigger("show"),o?(i.addEvent(this.el,o,n),setTimeout(n,600)):n()},hide:function(e){function t(){i.removeEvent(this.el,o,n),this.el.style.display="none",i.removeClassName(this.el,"ani-fade-out"),this._animating=!1,typeof e=="function"&&e(),this.trigger&&this.trigger("hidden")}if(this._animating)return;if(!this.isShow()){typeof e=="function"&&e();return}var n=s(this,t);this._animating=!0,i.addClassName(this.el,"ani-fade-out"),this.trigger&&this.trigger("hide"),o?(i.addEvent(this.el,o,n),setTimeout(n,600)):n()},toggle:function(e){if(this._animating)return;this.isShow()?this.hide(e):this.show(e)},isShow:function(){return this.el.style.display!="none"}}},l:function(e,t,n,r){e.exports='<div class="lyric_wrap" node-type="lrc" style="display:none">\n    <div class="lyric_bg">\n        <a href="javascript:void(0);" class="ico_ctrl ico_close" title="#L{关闭}" action-type="toggle_lrc"></a>\n        <div class="content">\n            <div class="tcol_sub" node-type="lrc_content"></div>\n        </div>\n    </div>\n</div>'},L:function(e,t,n,r){function u(e,t){s(e.split("\n"),t)}function a(e){var t=[];return s(e,function(e){e!=undefined&&t.push(e)}),t}function f(e){var t=[],n={};return s(o,function(t,r){t=e.match(new RegExp("\\["+t+":([^\\]]*)\\]","i")),n[r]=t&&t[1]||""}),u(e,function(e,n,r){e=decodeURIComponent(e),n=e.replace(/\[\d*:\d*((\.|\:)\d*)*\]/g,""),r=e.match(/\[\d*:\d*((\.|\:)\d*)*\]/g),r&&r.length&&s(r,function(e){e=e.match(/\d+/g),e=1e3*((e[0]|0)*60+(e[1]|0)+(e[2]|0)*.01),t[e]={time:e,text:n}})}),n.lyrics=a(t),n}var i=n("B"),s=i.foreach,o={title:"ti",artist:"ar",album:"al",offset:"offset",by:"by"};e.exports=f},m:function(e,t,n,r){function i(e){this.ns=e}i.prototype.send=function(e){window.SUDA&&window.SUDA.uaTrack&&window.SUDA.uaTrack(this.ns,e)},e.exports=function(e){return new i(e)}},M:function(e,t,n,r){function x(e){e=e||{},this.firstSongidOnce=e.firstSongidOnce,this.page_id=e.page_id,this.nodes=i.foreach(i.builder(s(v)).list,function(e){return e[0]}),this.el=this.nodes.list,this.devt=i.delegatedEvent(this.el),this.scrollView={},this.list=[],this.playlist,this.loaded=!1,this.syncInterval,this.init()}var i=n("B"),s=n("C").translate,o=n("E"),u=n("n"),a=n("N"),f=n("H"),l=n("i"),c=n("I"),h=n("K"),p=n("o")(),d=n("O"),v=n("q"),m=n("Q"),g=n("r"),y=n("R"),b=n("s"),w=n("S"),E="song",S="current";f(x.prototype,c,h,{init:function(){this.bind(),this.scrollView.search=d(this.nodes.list_search_box),this.nodes.list_search_box.insertBefore(this.nodes.list_search_bar,this.nodes.list_search_box.firstChild)},loadOnce:function(e){this.loaded===!1?(this.load(e),this.loaded=!0):e&&e()},bind:function(){this.devt.add("list_tab","click",l(this,this.onTabClick)),this.devt.add("list_searchBtn","click",l(this,this.onSearchBtnClick)),this.devt.add("list_select","click",l(this,this.onPlayClick)),this.devt.add("list_selectAll","click",l(this,this.onPlayAllClick)),this.devt.add("list_like","click",l(this,this.onLikeClick)),this.devt.add("list_share","click",l(this,this.onShareClick)),this.devt.add("list_remove","click",l(this,this.onRemoveClick)),this.devt.add("list_removeAll","click",l(this,this.onRemoveAllClick)),this.on("show",l(this,function(){this.toCurrentTab()})),i.addEvent(this.nodes.searchinput,"keyup",l(this,this.onSearchInputkeydown))},buildItem:function(e,t){var n=t==="search"?b:t==="rank"?w:y,r=i.builder(i.core.util.easyTemplate(s(n),e).toString()).list.list_item[0];return p.set(r,E,e),r},buildItems:function(e,t){return i.foreach([].concat(e),l(this,function(e){return this.buildItem(e,t)}))},search:function(e){this.nodes.list_search_area_loading.style.display="",this.nodes.list_search_area_empty.style.display="none",this.nodes.list_search_area.innerHTML="",this.nodes.list_search_bar.innerHTML="",setTimeout(l(this,function(){o.search({key:e},l(this,function(e){var t=this.buildItems(e,"search"),n=t.length,r;while(r=t.shift())this.nodes.list_search_area.appendChild(r);var i='<span class="music_del">#L{共%s首}</span><span class="music_del music_del_hov" action-type="list_selectAll"><span class="ico_ctrl ico_rig_ht W_f14"></span>#L{全部播放}</span>';this.nodes.list_search_bar.innerHTML=s(i,n),this.scrollView.search.reset(),e.length===0&&(this.nodes.list_search_area_empty.style.display=""),this.nodes.list_search_area_loading.style.display="none"}))}),100),this.scrolltoTab(-1)},load:function(e){var t=this.firstSongidOnce||"";this.firstSongidOnce=null,t.indexOf(":")>=0&&t.indexOf("_")>=0&&(t=t.split("_")[1]),o.load({page_id:this.page_id,first_song_id:t},l(this,function(n,r,o){var u=this.list.length>0,a=this.getCurrent()&&p.get(this.getCurrent(),E).object_id;o&&o.is_show_search==1?this.nodes.searchinput.parentNode.style.display="":this.nodes.searchinput.parentNode.style.display="none",i.foreach(this.list,function(e){i.removeNode(e.tab),i.removeNode(e.box);if(e===this.playlist)return;try{e.scroll.destory()}catch(t){}}),this.list=[],n=function(e){var t=[];return i.foreach(e,function(e){t[e.index]=e}),t}(n);var f;i.foreach(n,l(this,function(e,t){if(!e)return;var r=e.is_playlist==1,o=e.is_current==1,u,a;o&&(f=e.index);if(r&&this.playlist){this.nodes.songTitles.appendChild(this.playlist.tab),this.nodes.songlists.insertBefore(this.playlist.box,this.nodes.list_search_box),this.playlist.index=e.index,this.list.push(this.playlist);return}if(r&&e.list.length===0)for(var l=0;l<n.length;l++)if(n[l].list[0]){e.list[0]=n[l].list[0];break}if(r||e.list.length){u=i.builder(m).box.firstChild,a=i.builder(g).box.firstChild;var c=i.sizzle(".title",u)[0],h=i.sizzle("[node-type=list_bar]",a)[0],p=i.sizzle("[node-type=list_area]",a)[0];c.innerHTML=e.title;var v=this.buildItems(e.list,r?undefined:"rank"),y=v.length,b,w,E={};while(b=v.shift())w=b.getAttribute("objectid"),w in E&&(i.removeNode(E[w]),y--),p.appendChild(b),E[w]=b;if(r){var S='<span class="music_del">#L{正在播放} （<span class="nowplay">0/0</span>）</span><span class="music_del music_del_hov" action-type="list_removeAll"><span class="ico_ctrl ico_del_lite_v2"></span>#L{清空列表}</span>';h.innerHTML=s(S)}else{var S='<span class="music_del">#L{共%s首}</span><span class="music_del music_del_hov" action-type="list_selectAll"><span class="ico_ctrl ico_rig_ht W_f14"></span>#L{全部播放}</span>';h.innerHTML=s(S,y)}this.nodes.songTitles.appendChild(u),this.nodes.songlists.insertBefore(a,this.nodes.list_search_box);var x=d(a);a.insertBefore(h,a.firstChild);var T={tab:u,box:a,scroll:x,isCurrent:o,isList:r,index:e.index};this.list.push(T),r&&(this.playlist=T)}})),this.nodes.songlists.style.width=685*(this.list.length+1)+"px",this.scrolltoTab(f);var c;u?(c=i.sizzle("[objectid="+a+"]",this.playlist.box)[0],c&&this.setCurrent(c)):(c=i.sizzle("[objectid=1022:10151501_"+t+"]",this.playlist.box)[0],c||(c=i.sizzle("[node-type=list_item]",this.playlist.box)[0]),c&&(this.setCurrent(c),this.trigger("select",[p.get(c,E),{fromLoad:!0}]))),e&&e()}))},syncPlayList:function(){var e=i.foreach(i.sizzle("[node-type=list_item]",this.playlist.box),function(e){return e.getAttribute("objectid")});o.syncPlayList({object_ids:i.jsonToStr(e)})},setPlayListBarInfo:function(){this.listBarInterval===undefined&&(this.listBarInterval=setTimeout(l(this,function(){var e=i.sizzle("[node-type=list_bar] .nowplay",this.playlist.box)[0],t=i.sizzle("[node-type=list_item]",this.playlist.box),n=0;for(var r=0,s=t.length;r<s;r++)if(i.core.dom.hasClassName(t[r],S)){n=r+1;break}e.innerHTML=n+"/"+t.length,this.listBarInterval=undefined}),200))},needSyncPlayList:function(){this.syncInterval===undefined&&(this.syncInterval=setTimeout(l(this,function(){this.syncPlayList(),this.syncInterval=undefined}),200))},showAddTip:function(){var e=this.showAddTip_tip=this.showAddTip_tip||i.builder('<span class="UI_ani_mplayer"></span>').box.firstChild;e.parentNode&&e.parentNode.removeChild(e);var t=i.sizzle(".title",this.playlist.tab)[0],n=i.position(t);this.playlist.tab.appendChild(e),i.core.dom.setXY(e,{t:n.t-4,l:n.l+t.offsetWidth+5}),clearTimeout(this.showAddTip_interval),this.showAddTip_interval=setTimeout(function(){i.removeNode(e)},1600)},canAddToPlayList:function(e){return i.sizzle("[node-type=list_item]",this.playlist.box).length+e<=100?!0:(this.trigger("showTip",["播放列表超过100首上限，<br/>请删除部分歌曲后再添加",".ico_ctrl.ico_list"]),!1)},setCurrent:function(e){var t=this.getCurrent(e);t&&i.removeClassName(t,S),i.addClassName(e,S),this.setPlayListBarInfo()},getCurrent:function(){return this.playlist&&i.sizzle("[node-type=list_item].current",this.playlist.box)[0]},toCurrentTab:function(){var e=this.getCurrent();if(!e)this.scrolltoTab(0);else{var t=i.core.dom.dir.parent(e,{expr:"[node-type=list_box]"})[0],n=0;i.foreach(this.list,function(e,r){e.box===t&&(n=r)}),this.scrolltoTab(n);var r=this.list[n]&&this.list[n].scroll.scrollEl;n=0;while(e.parentNode.childNodes[n]){if(e===e.parentNode.childNodes[n])break;n++}r&&(r.scrollTop=(n-4)*e.offsetHeight)}},getSong:function(e){var t=this.getCurrent();if(!t||!i.contains(this.playlist.box,t))t=i.sizzle("[node-type=list_item]",this.playlist.box)[0];else switch(e){case"next":t=t.nextSibling||t.parentNode.firstChild;break;case"prev":t=t.previousSibling||t.parentNode.lastChild;break;case"random":var n=t.parentNode.childNodes.length;n=parseInt(Math.random()*n),t=t.parentNode.childNodes[n]}return t&&this.setCurrent(t),t?p.get(t,E):undefined},addWithObjectId:function(e,t){t=t||{};var n=t.extraSend||{},r=t.isPlay||!1;this.loadOnce(l(this,function(){var t=i.sizzle("[node-type=list_area]",this.playlist.box)[0],s=this.playlist.index;this.scrolltoTab(s),o.add(f({object_id:e},n),l(this,function(e){var n;e.length&&this.showAddTip(),i.foreach(e,l(this,function(e){var r=i.sizzle("[objectid="+e.object_id+"]",t)[0],s=this.getCurrent();s=s?s.nextSibling:t.firstChild;if(!r){if(this.canAddToPlayList(1)===!1)return;r=this.buildItem(e)}s?t.insertBefore(r,s):t.appendChild(r),n=r})),this.needSyncPlayList(),r&&n&&(this.setCurrent(n),this.trigger("select",p.get(n,E)))}))}))},add:function(e,t){e=[].concat(e),t=t||{};var n=t.extraSend||{},r=t.isPlay||!1;this.loadOnce(l(this,function(){var t,s;i.foreach(this.list,function(e,n){e.isList===!0&&(t=i.sizzle("[node-type=list_area]",e.box)[0],s=n)}),this.scrolltoTab(s),o.add(f({songids:"["+e.reverse().join(",")+"]"},n),l(this,function(e){var n;e.length&&this.showAddTip(),i.foreach(e,l(this,function(e){var r=i.sizzle("[objectid="+e.object_id+"]",t)[0],s=this.getCurrent();s=s?s.nextSibling:t.firstChild;if(!r){if(this.canAddToPlayList(1)===!1)return;r=this.buildItem(e)}s?t.insertBefore(r,s):t.appendChild(r),n=r})),this.needSyncPlayList(),r&&n&&(this.setCurrent(n),this.trigger("select",p.get(n,E))),this.setPlayListBarInfo()}))}))},likeByObjectId:function(e,t){i.foreach(i.sizzle("[likeid="+e+"]",this.el),function(e){var n=i.core.dom.dir.parent(e,{expr:"[node-type=list_item]"})[0];p.get(n,E).is_like=t,t?(i.addClassName(e,"ico_liked_lite"),i.removeClassName(e,"ico_like_lite")):(i.addClassName(e,"ico_like_lite"),i.removeClassName(e,"ico_liked_lite"))})},scrolltoTab:function(e){e==-1&&(e=this.list.length),i.foreach(this.list,function(t,n){n===e?i.addClassName(t.tab.firstChild,"title_current"):i.removeClassName(t.tab.firstChild,"title_current")}),this.nodes.songlists.style.left=-685*e+"px",this.list[e]&&this.list[e].scroll.reset()},onTabClick:function(e){var t;i.foreach(this.list,function(n,r){n.tab===e.el&&(t=r)}),t!=undefined&&this.scrolltoTab(t)},onSearchBtnClick:function(e){var t=this.nodes.searchinput.value;t.length>0&&this.search(t)},onSearchInputkeydown:function(e){var t;e=i.fixEvent(e);if(e.keyCode===13||e.keyCode===10)t=this.nodes.searchinput.value,t.length>0&&this.search(t)},onPlayClick:function(e){var t=e.el.getAttribute("action-type"),n=e.evt.target.getAttribute("action-type");if(n&&t!=n)return;var r=e.el,s=p.get(r,E),o=i.sizzle("[node-type=list_area]",this.playlist.box)[0];if(!i.contains(o,r)){this.showAddTip();var u=i.sizzle("[objectid="+s.object_id+"]",o)[0],a=this.getCurrent(),f=a?a.nextSibling:o.firstChild;if(!u){if(this.canAddToPlayList(1)===!1)return;u=this.buildItem(s)}u!=a&&(f?o.insertBefore(u,f):o.appendChild(u),this.needSyncPlayList()),r=u}this.setCurrent(r),this.trigger("select",[p.get(r,E)])},onPlayAllClick:function(e){var t=i.core.dom.dir.parent(e.el,{expr:"[node-type=list_box],[node-type=list_search_box]"})[0],n=i.sizzle("[node-type=list_item]",t),r=this.getCurrent(),s=i.sizzle("[node-type=list_area]",this.playlist.box)[0],o=r?r.nextSibling:s.firstChild;n.length&&this.showAddTip();var u;for(var a=0,f=n.length;a<f;a++){var l=p.get(n[a],E),c=i.sizzle("[objectid="+l.object_id+"]",s)[0];if(!c){if(this.canAddToPlayList(1)===!1)break;c=this.buildItem(l)}o?s.insertBefore(c,o):s.appendChild(c),a===0&&(u=c)}u&&(this.needSyncPlayList(),this.setPlayListBarInfo(),this.setCurrent(u),this.trigger("select",[p.get(u,E)]))},onRemoveClick:function(e){var t=i.core.dom.dir.parent(e.el,{expr:"[node-type=list_item]"})[0];if(i.core.dom.hasClassName(t,S))if(t.parentNode.childNodes.length===1)this.trigger("select");else{var n=this.getSong("next");n&&this.trigger("select",[n,{fromRemove:!0}])}i.removeNode(t),this.needSyncPlayList(),this.setPlayListBarInfo()},onRemoveAllClick:function(e){var t=i.core.dom.dir.parent(e.el,{expr:"[node-type=list_item]"})[0],n=i.sizzle("[node-type=list_area]",t)[0];n.innerHTML="",this.trigger("select"),this.needSyncPlayList(),this.setPlayListBarInfo()},onLikeClick:function(e){var t=i.core.dom.dir.parent(e.el,{expr:"[node-type=list_item]"})[0];this.trigger("like",p.get(t,E))},onShareClick:function(e){var t=i.core.dom.dir.parent(e.el,{expr:"[node-type=list_item]"})[0];this.trigger("share",p.get(t,E))}}),e.exports=function(e){return new x(e)}},n:function(e,t,n,r){var i=n("B");e.exports=function(e){if(!i.core.dom.isNode(e))throw"Parameter must be an HTMLEelement!";var t=[];for(var n=0,r=e.childNodes.length;n<r;n++)e.childNodes[n].nodeType==1&&t.push(e.childNodes[n]);return t}},N:function(e,t,n,r){e.exports=function(e,t,n){var r;if(e&&t){n=n||document.body;while(e&&e!=n&&!(r=e.getAttribute(t)))e=e.parentNode}return r}},o:function(e,t,n,r){function u(){this.cache={},this.expando="Data_"+o(),this.index=1}var i=n("B"),s=n("H"),o=i.core.util.getUniqueKey;u.prototype={key:function(e){var t={},n=e[this.expando];if(!n){n=this.index++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,s(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),o=this.cache[i];typeof t=="string"?o[t]=n:s(o,t)},get:function(e,t){var n=this.cache[this.key(e)];return t===undefined?n:n[t]},remove:function(e,t){var n=this.key(e),r=this.cache[n];t===undefined?this.cache[n]={}:delete r[t]}},e.exports=function(){return new u}},O:function(e,t,n,r){function b(e){function b(e){return arguments.length>0?t.content.scrollTop=e:t.content.scrollTop}function w(){return t.content.scrollHeight}function E(){return t.content.offsetHeight}function S(e){e=v(e);var t=-e.wheelDelta;isNaN(t)&&(t=e.deltaY);var n=t<0,r=t>0;(n&&b()<=0||r&&w()-b()-E()<=0)&&m(e)}function x(e){e=v(e);var n=e.target;if(e.which!==1)return;n===t.barContent?(r=!0,u=e.clientY-parseInt(t.barContent.style.top,10)/100*t.barContainer.offsetHeight):t.barContent.getBoundingClientRect().top<e.clientY?b(b()+w()*.1):b(b()-w()*.1)}function T(e){e=v(e),r===!0&&b((e.clientY-u)/t.barContainer.offsetHeight*w())}function N(e){r=!1}function C(e){return i.getStyle(e,"position")==="absolute"?!0:e===document.body?!1:e.parentNode?C(e.parentNode):!1}function k(){try{var e=s();g&&C(t.content)&&(e=0),t.content.style.width=(t.container.offsetWidth||parseInt(l(t.container,"width")))+e+"px",t.barContent.style.height=E()/w()*100+"%",t.barContent.style.top=b()/w()*100+"%",t.barContainer.style.visibility=w()<=E()?"hidden":""}catch(n){}}function L(){p(t.content,"scroll",k),p(t.barContainer,"mousedown",x),p(document,"mousemove",T),p(document,"mouseup",N),d(t.container),d(t.barContainer),clearInterval(a);while(f=t.container.firstChild)e.appendChild(f)}var t=o(c(y).list),n,r=!1,u,a;for(n in t)t.hasOwnProperty(n)&&t[n].removeAttribute("node-type");var f;while(f=e.firstChild)t.content.appendChild(f);return e.appendChild(t.container),e.appendChild(t.barContainer),h(t.content,"scroll",k),h(t.barContainer,"mousedown",x),h(document,"mousemove",T),h(document,"mouseup",N),h(t.content,"mousewheel",S),h(t.content,"DOMMouseScroll",S),a=setInterval(function(){try{t.container.scrollLeft=0}catch(e){}},1e3),k(),{reset:k,destroy:L,scrollHeight:w,scrollTop:b,offsetHeight:E,scrollEl:t.content}}var i=n("B"),s=n("p"),o=n("P"),u=i.C,a=i.addClassName,f=i.removeClassName,l=i.getStyle,c=i.builder,h=i.addEvent,p=i.removeEvent,d=i.removeNode,v=i.fixEvent,m=i.stopEvent,g=i.core.util.browser.IE6||i.core.util.browser.IE7,y='<div node-type="container" style="overflow:hidden;width:100%;height:100%;position:relative;_background:url(about:blank);"><div node-type="content" style="position:relative;height:100%;width:100%;overflow-y:scroll;overflow-x:hidden;-webkit-overflow-scrolling:touch;margin-right:-30px;padding-right:30px;"></div></div><div class="scroll_box" node-type="barContainer" style="bottom:10px;"><div class="scroll_bar" node-type="barContent" style="top:0%; height:0;"></div></div>';e.exports=b},p:function(e,t,n,r){function u(){var e=s("div"),t=s("div"),n;return e.style.cssText="width:40px;overflow:auto;height:30px;position:absolute;top:-100px;",t.style.cssText="height:35px;",document.body.insertBefore(e,document.body.firstChild).appendChild(t),n=e.offsetWidth-t.offsetWidth,o(e),e=t=null,u=function(){return n},n}var i=n("B"),s=i.C,o=i.removeNode;e.exports=u},P:function(e,t,n,r){e.exports=function(e){for(var t in e)e[t]&&e[t].length==1&&(e[t]=e[t][0]);return e}},q:function(e,t,n,r){e.exports='<div class="panel_area" node-type="list" style="display:none;">\n    <div class="title_box">\n        <div class="opt_btn">\n            <a action-type="toggle_list" href="javascript:void(0);" class="ico_ctrl ico_close" title="关闭"></a>\n        </div>\n        <ul class="ul_title" node-type="songTitles"></ul>\n        <div class="opt_box">\n            <div class="search_box">\n                <input node-type="searchinput" type="text" class="ipt_txt" placeholder="#L{搜索歌曲/歌手}">\n                <a href="javascript:void(0)" action-type="list_searchBtn" class="search_btn"><i class="ico_mplayer ico_search"></i></a>\n            </div>\n        </div>\n    </div>\n    <div class="list_area">\n        <div node-type="songlists" style="height:250px;width:685px;position:relative;left:0px;-webkit-transition:left .3s ease;-webkit-transition:left .3s ease;-moz-transition:left .3s ease;-o-transition:left .3s ease;transition:left .3s ease;">\n            <div node-type="list_search_box" style="height:100%;width:685px;float:left;overflow:hidden;position:relative;">\n                <div class="list_wrap" style="width:685px;height:auto;">\n                    <p class="p_item" node-type="list_search_bar"></p>\n                    <div class="list_box">\n                        <ul class="ul_list" node-type="list_search_area"></ul>\n                    </div>\n                    <div class="empty_box" node-type="list_search_area_loading" style="display:none" >\n                        <div style="height:30px;"></div>\n                        <p class="text" node-type="list_search_area_empty_text">努力搜索中, 请稍后...</p>\n                    </div>\n                    <div class="empty_box" node-type="list_search_area_empty" style="display:none">\n                        <i class="ico_ctrl ico_list_warn"></i>\n                        <p class="text" node-type="list_search_area_empty_text">对不起，没有找到相应结果。</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},Q:function(e,t,n,r){e.exports='<li class="li_title autocut" style="max-width:140px;" action-type="list_tab"><a href="javascript:void(0);" class="title_item">\n	<span class="title"></span>\n	<span class="ani_border"></span>\n</a></li>'},r:function(e,t,n,r){e.exports='<div node-type="list_box" list="rank" style="height:100%;width:685px;float:left;overflow:hidden;position:relative;">\n    <p class="p_item" node-type="list_bar"></p>\n    <div class="list_wrap" style="width:685px;height:auto;">\n        <div class="list_box">\n            <ul class="ul_list" node-type="list_area"></ul>\n        </div>\n    </div>\n</div>'},R:function(e,t,n,r){e.exports='<#et temp data>\n<li class="li_item" node-type="list_item" objectid="${data.object_id}" action-type="list_select">\n    <span class="music_name">${data.songname}</span>\n    <span class="singer_name">\n        <#list data.singers as singer>\n            <span>${singer.singer_name}</span>\n        </#list>\n        <#if (data.sell_url)>\n          <a href="${data.sell_url}" target="_blank" action-type="list_buy" class="ico_mplayer ico_pay">#L{购买}</a>\n        </#if>\n    </span>\n    <span class="opt_box">\n        <a href="javascript:void(0);" action-type="list_like" likeid="${data.object_id}"\n           <#if (data.is_like)>\n           class="ico_ctrl ico_liked_lite"\n           <#else>\n           class="ico_ctrl ico_like_lite"\n           </#if>\n        ></a>\n        <a href="javascript:void(0);" class="ico_ctrl ico_share_lite" action-type="list_share"></a>\n        <a href="javascript:void(0);" class="ico_ctrl ico_del_lite" action-type="list_remove"></a>\n    </span>\n</li>\n</#et>'},s:function(e,t,n,r){e.exports='<#et temp data>\n<li class="li_item" node-type="list_item" objectid="${data.object_id}" action-type="list_select">\n    <span class="music_name">${data.songname}</span>\n    <span class="singer_name">\n        <#list data.singers as singer>\n            <span>${singer.singer_name}</span>\n        </#list>\n        <#if (data.sell_url)>\n            <a href="${data.sell_url}" target="_blank" action-type="list_buy" class="ico_mplayer ico_pay">#L{购买}</a>\n        </#if>\n    </span>\n    <span class="opt_box">\n        <a href="javascript:void(0);" action-type="list_like" likeid="${data.object_id}"\n           <#if (data.is_like)>\n           class="ico_ctrl ico_liked_lite"\n           <#else>\n           class="ico_ctrl ico_like_lite" \n           </#if>\n        ></a>\n        <a href="javascript:void(0);" class="ico_ctrl ico_share_lite" action-type="list_share"></a>\n    </span>\n</li>\n</#et>'},S:function(e,t,n,r){e.exports='<#et temp data>\n<li class="li_item" node-type="list_item" objectid="${data.object_id}" action-type="list_select">\n    <span class="music_name">${data.songname}</span>\n    <span class="singer_name">\n        <#list data.singers as singer>\n            <span>${singer.singer_name}</span>\n        </#list>\n        <#if (data.sell_url)>\n       	    <a href="${data.sell_url}" target="_blank" action-type="list_buy" class="ico_mplayer ico_pay">#L{购买}</a>\n       	</#if>\n    </span>    \n    <span class="opt_box">\n        <a href="javascript:void(0);" action-type="list_like" likeid="${data.object_id}"\n           <#if (data.is_like)>\n           class="ico_ctrl ico_liked_lite"\n           <#else>\n           class="ico_ctrl ico_like_lite" \n           </#if>\n        ></a>\n        <a href="javascript:void(0);" class="ico_ctrl ico_share_lite" action-type="list_share"></a>\n    </span>\n</li>\n</#et>'},t:function(e,t,n,r){function l(){this.nodes=i.foreach(i.builder(s(a)).list,function(e){return e[0]}),this.el=this.nodes.info,this.defaultData={page_url:"//ting.weibo.com?from=page_101515_player",songname:s("#L{微音乐}"),photo:"//img.t.sinajs.cn/t5/style/images/pagecard/player/default_cover.jpg",singers:[{singer_url:"//ting.weibo.com?from=page_101515_player",singer_name:s("#L{微音乐}")}]},this.render()}var i=n("B"),s=n("C").translate,o=n("H"),u=n("i"),a=n("T"),f=n("u");o(l.prototype,{render:function(e){this.el.innerHTML=i.core.util.easyTemplate(s(f),e||this.defaultData).toString()}}),e.exports=function(){return new l}},T:function(e,t,n,r){e.exports='<div node-type="info" class="music_info"></div>'},u:function(e,t,n,r){e.exports='<#et temp data>\n<div class="music_pic">\n	<a target="_blank" href="${data.page_url}" title="${data.songname}" class="pic"><img src="${data.photo.replace(/^https:|^http:/, \'\')}"/></a>\n</div>\n<div class="music_detail">\n    <p class="name_bar">\n        <a target="_blank" class="name autocut" href="${data.page_url}" title="${data.songname}">${data.songname}</a>\n    </p>\n    <p class="author_bar autocut">\n	<#list data.singers as singer>\n        <#if (singer.singer_url) >\n        <a target="_blank" class="author tcol_sub" href="${singer.singer_url}" title="${singer.singer_name}">${singer.singer_name}</a>\n        <#else>\n        <span class="author tcol_sub" title="${singer.singer_name}">${singer.singer_name}</span>\n        </#if>\n	</#list>\n    </p>\n    <#if (data.source_name) >\n    <p class="source_bar autocut">\n    	<em class="tcol_sub">#L{来自}</em><a suda-data="key=tblog_musicpageplayer&value=source" target="_blank" href="${data.source_link}" class="source">${data.source_name}</a>\n    </p>\n    </#if>\n</div>\n</#et>'},U:function(e,t,n,r){function f(){this.el=i.builder(a).box.firstChild,this.hideDelay=1500,this.hideInterval}var i=n("B"),s=n("H"),o=n("K"),u=n("i"),a='<div class="PCD_mplayer_layer" style="position:absolute;"><div class="content"><p class="main_txt"></p><div class="layer_arrow"><span class="arrow_bor arrow_bor_b"><i class="arrow_a"></i><em class="arrow_b"></em></span></div></div></div>';s(f.prototype,o,{setContent:function(e){var t=i.sizzle(".main_txt",this.el)[0];return t&&(t.innerHTML=e),this},showByTarget:function(e,t){clearTimeout(this.hideInterval),t=t||{},this.el.style.display="",this.el.style.height="",this.el.style.width="",document.body.appendChild(this.el),this.el.style.height=this.el.offsetHeight+"px",this.el.style.width=this.el.offsetWidth+1+"px",t.appendTo?t.appendTo.appendChild(this.el):e.parentNode.insertBefore(this.el,e);var n=i.core.dom.position(e);return i.core.dom.setXY(this.el,{l:n.l+e.offsetWidth/2-27+(t.left|0),t:n.t-this.el.offsetHeight-10+(t.top|0)}),this.el.style.display="none",this.show(),this.hideInterval=setTimeout(u(this,function(){this.hide()}),this.hideDelay),this}}),e.exports=new f},v:function(e,t,n,r){function i(e){var t=(e/60|0).toString(),n=(e%60|0).toString();return t=t.length>=2?t:"0"+t,n=n.length>=2?n:"0"+n,[t,n].join(" : ")}e.exports=i},V:function(e,t,n,r){e.exports='<div i-am-music-player node-type="box">\n<div class="PCD_mplayer_layer" style="position:fixed;bottom:90px;;left:30px;display:none;" node-type="confirm">\n    <div class="content">\n        <p class="main_txt"><span class="txt">#L{确认要隐藏播放器吗？}</span></p>\n        <p class="sub_txt S_txt2">#L{隐藏后点击页面任意播放按钮即可再次出现}</p>\n        <div class="btn">\n            <a href="javascript:void(0);" action-type="hide" class="btn_a" suda-data="key=tblog_musicpageplayer&value=click_close">#L{确认}</a>\n            <a href="javascript:void(0);" action-type="hide_confirm" class="btn_b">#L{取消}</a>\n        </div>\n        <div class="layer_arrow"><span class="arrow_bor arrow_bor_b"><i class="arrow_a"></i><em class="arrow_b"></em></span></div>\n    </div>\n</div>\n<div class="PCD_mplayer clearfix" node-type="mini" style="-webkit-transition:left .3s ease;-moz-transition:left .3s ease;-o-transition:left .3s ease;-ms-transition:left .3s ease;transition:left .3s ease;position:fixed;bottom:33px;left:0;z-index:9999;">\n    <div class="mini clearfix">\n        <div class="mini_panel_area">\n            <a href="javascript:void(0)" class="mini_btn_area pause_state" node-type="mini_toggle_play" action-type="toggle_play">\n                <i class="ico_ctrl ico_mini_state"></i>\n                <span class="mask"></span>\n                <img node-type="mini_photo" src="//img.t.sinajs.cn/t5/style/images/pagecard/player/default_cover.jpg" class="pic">\n            </a>\n        </div>\n        <a href="javascript:void(0)" class="mini_fold_ctrl_area" action-type="toggle_fold">\n            <i class="ico_ctrl ico_unfold"></i>\n        </a>\n        <a href="javascript:void(0);" action-type="show_confirm" class="ico_ctrl ico_close" title="#L{关闭}"></a>\n    </div>\n</div>\n<div class="PCD_mplayer PCD_mplayer_v2 clearfix" node-type="player" style="-webkit-transition:left .5s ease;-moz-transition:left .5s ease;-o-transition:left .5s ease;-ms-transition:left .5s ease;transition:left .5s ease;position:fixed;bottom:20px;left:-690px;z-index:9999;">\n    <div class="player_bg" node-type="">\n        <div node-type="list"></div>\n        <div class="unfold_area">\n            <div class="unfold_bg">\n                <div class="time_wrap">\n                    <div class="time_bar" node-type="progress_range_out">\n                        <div class="cur_time_bg" style="width:%;" node-type="progress_range">\n                            <a class="cur_time" href="javascript:void(0);" title="#L{进度}"></a>\n                        </div>\n                    </div>\n                    <div class="time_count tcol_sub" node-type="time"><em>00</em>:<em>00</em></div>\n                    <div class="layer_time" style="top:-20px; left:200px;z-index:1;pointer-events:none;display:none;" node-type="time_tip">\n                        <div class="content">\n                            <i class="ico_ctrl ico_time_arrow"></i>\n                            <span node-type="time_tip_text">00:00</span>\n                        </div>\n                    </div>\n                 </div>\n                <div class="main_panel clearfix">\n                    <div class="music_info" node-type="info"></div>\n                    <div class="contrl_panel">\n                        <p class="layer_loop" style="display:none;" node-type="play_type_select">\n                                <a href="javascript:void(0);" title="#L{随机播放}" class="ico_ctrl ico_rand" node-type="play_type_select_rand" action-type="play_type_select"></a>\n                                <a href="javascript:void(0);" title="#L{单曲循环}" class="ico_ctrl ico_solo" node-type="play_type_select_solo" action-type="play_type_select"></a>\n                                <a href="javascript:void(0);" title="#L{列表循环}" class="ico_ctrl ico_loop" node-type="play_type_select_loop" action-type="play_type_select"></a>\n                            </p>\n                        <div class="contrl_bar clearfix">   \n                            <div class="base_ctrl">\n                                <a href="javascript:void(0);" class="ico_ctrl ico_prev" action-type="prev" title="#L{上一首}"></a>\n                                <a href="javascript:void(0);" class="ico_ctrl ico_play" node-type="toggle_play" action-type="toggle_play" title="#L{播放/暂停}"></a>\n                                <a href="javascript:void(0);" class="ico_ctrl ico_next" action-type="next" title="#L{下一首}"></a>\n                                <a href="javascript:void(0);" class="ico_ctrl ico_loop" node-type="play_type" action-type="play_type"></a>\n                            </div>\n                            <div class="vol_ctrl">\n                                <a href="javascript:void(0);" class="ico_ctrl ico_vol" title="#L{音量}" action-type="toggle_mute" node-type="toggle_mute"></a>\n                                <div class="ctrl_bar" node-type="volume_range_out">\n                                    <div class="cur_vol cur_volmute" style="width:0%" node-type="volume_range">\n                                        <a href="javascript:void(0);" class="ico_ctrl ico_curvol" title="#L{音量调节}"></a>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="opt_ctrl clearfix">\n                                <a href="javascript:void(0);" class="ico_ctrl ico_like" action-type="like" node-type="like"></a>\n                                <a href="javascript:void(0);" class="ico_ctrl ico_share" action-type="share" title="#L{分享}"></a>\n                                <a href="javascript:void(0);" class="ico_ctrl ico_list" node-type="toggle_list" title="#L{展开列表}" action-type="toggle_list"></a>\n                                <a href="javascript:void(0);" class="ico_lyric ico_lyric_open" node-type="toggle_lrc" action-type="toggle_lrc" title="#L{显示歌词}">词</a>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="fold_ctrl_area" title="#L{展开}" action-type="toggle_fold" node-type="toggle_fold"><div class="mask"><a href="javascript:void(0);" class="ico_ctrl ico_unfold ico_fold"></a></div></div>\n        <div node-type="lrc"></div>\n    </div>\n</div>\n</div>'},w:function(e,t,n,r){function a(e){return Math.pow(e,2)}function f(e){return Math.sqrt(e,2)}function l(e,t,n){var r=e.y,i=t.y,o=n;return f(2*(o-r)/s)+f(2*(o-i)/s)}function c(e,t,n){var r=e.x,i=e.y,o=t.x,u=t.y,l=n;return function(e){function t(e){return i+ -0.5*s*a(e)+f(2*s*(l-i))*e}function n(e){return r-(r-o)*e/(f(2*(l-i)/s)+f(2*(l-u)/s))}return{x:n(e),y:t(e)}}}function h(e,t,n){function d(){var t=(Date.now()-h)/1e3,r=a(t);t<=f?(p.style.left=r.x+"px",p.style.bottom=r.y+"px",setTimeout(d,1/o*1e3),Math.abs(f-t)<.05&&u&&(p.style.opacity=0)):(p.style.left=e.x+"px",p.style.bottom=e.y+"px",setTimeout(function(){p.parentNode&&p.parentNode.removeChild(p),n&&n()},700),u&&(p.style.opacity=0))}var r=document.documentElement.clientHeight,i={x:t.clientX,y:r-t.clientY},s=20,a=c(i,e,Math.max(i.y,e.y)+s),f=l(i,e,Math.max(i.y,e.y)+s),h=Date.now(),p=document.createElement("div");p.style.cssText='-webkit-transition:opacity .5s ease;-moz-transition:opacity .5s ease;-o-transition:opacity .5s ease;transition:opacity .5s ease; opacity:1; width:30px; height:30px; background:url("//js.t.sinajs.cn/t5/pack/static/musicplayer/musicicon.png") center center no-repeat; margin:-15px 0 0 -15px; position:fixed;-webkit-transform:translateZ(0);-moz-transform:translateZ(0);-o-transform:translateZ(0);transform:translateZ(0);z-index:9999;bottom:0px;left:0px;',document.body.appendChild(p),d()}var i=n("B"),s=2500,o=70,u=function(){var e=document.body.style,t=e.WebkitTransition!==undefined?"WebkitTransition":e.webkitTransition!==undefined?"webkitTransition":e.MozTransition!==undefined?"MozTransition":e.OTransition!==undefined?"OTransition":e.msTransition!==undefined?"msTransition":e.transition!==undefined?"transition":!1;return t}();e.exports=function(e,t){var n=i.getEvent();n&&h(e,n,t)}},W:function(e,t,n,r){function o(e,t,n){n=n||function(){};var r=function(e,t){var n=s[e]||(s[e]={loaded:!1,list:[]});return n.loaded?(t(e),!1):(n.list.push(t),n.list.length>1?!1:!0)},o=function(e){var t=s[e].list;for(var n=0;n<t.length;n++)t[n](e);s[e].loaded=!0,delete s[e].list};if(!r(e,n))return;var u=i.C("link");u.setAttribute("rel","Stylesheet"),u.setAttribute("type","text/css"),u.setAttribute("charset","utf-8"),u.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(u);var a=i.C("div");a.id=t,i.core.util.hideContainer.appendChild(a);var f=3e3,l=function(){if(parseInt(i.core.dom.getStyle(a,"height"))==42){i.core.util.hideContainer.removeChild(a),o(e);return}--f>0?setTimeout(l,10):(i.log(e+"timeout!"),i.core.util.hideContainer.removeChild(a),delete s[e])};setTimeout(l,50)}var i=n("B"),s={};e.exports=o}});