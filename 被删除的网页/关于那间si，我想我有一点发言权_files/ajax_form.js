!function(n){function i(i,t){t.onAjaxStart(i),n.isFunction(t.onAjaxStart)&&t.onAjaxStart(i);var a=t.method||i.attr("method")||"post",c=t.url||i.attr("action");n.ajax({type:a.toLocaleUpperCase(),url:c,data:o(i),dataType:"json"}).done(function(o){n.isFunction(t.onAjaxEnd)&&t.onAjaxEnd(i),n.isFunction(t.onAjaxSuccess)&&t.onAjaxSuccess(o,i),n.isFunction(t.isSuccess)&&t.isSuccess(o,i)?n.isFunction(t.onSuccess)&&t.onSuccess(o,i):n.isFunction(t.onError)&&t.onError(o,i)}).fail(function(o){n.isFunction(t.onAjaxEnd)&&t.onAjaxEnd(i),n.isFunction(t.onAjaxError)&&t.onAjaxError(o,i)})}function o(i){var o={};return i.find("[name]").each(function(i,t){var a=n(t),c=a.attr("name"),e="",s=!0;switch(a.attr("type")){case"checkbox":s=a.is(":checked"),e=a.val();break;case"radio":e=a.filter(":checked").val();break;default:e=a.val()}s&&(o[c]=e)}),o}var t=window.dui||{},a={form:null,method:null,url:null,validate:function(n){return!0},disable:function(i,o){o=o||"";var t=n(document.body);t.find("#mask").remove(),t.append('<div id="mask"><div>'+o+"</div></div>")},enable:function(i){n(document.body).find("#mask").remove()},onAjaxStart:function(n){this.disable(n)},onAjaxEnd:function(n){this.enable(n)},onAjaxError:function(n,i){i.find(".field-tips").html("出错了，请再试一次~")},onAjaxSuccess:function(n,i){i.find(".field-tips").html("")},isSuccess:function(n,i){return!0},onError:null,onSuccess:null,onData:null},c=function(i){this._config=n.extend(!0,{},a,i)};c.prototype={init:function(){var o=n(this._config.form),t=this._config;return o.on("submit",function(){return n.isFunction(t.validate)&&t.validate(o)&&i(o,t),!1}),this},updateConfig:function(i){return this._config=n.extend(!0,{},this._config,i),this},disable:function(i){var o=n(this._config.form);n.isFunction(this._config.disable)&&this._config.disable(o,i)},enable:function(i){var o=n(this._config.form);n.isFunction(this._config.enable)&&this._config.enable(o,i)}},t.AjaxForm=c,window.dui=t}(jQuery);