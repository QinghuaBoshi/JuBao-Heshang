!function(n){function a(a,o,e){location.hash=o,n.isFunction(a.customNavigate)?a.customNavigate(a,o,e):n(a.pageSelector).hide().filter("[data-id="+o+"]").show(),n.isFunction(a.onNavigate)&&a.onNavigate(a.currentPage,o)}function o(o,e){n.isFunction(o.onHashChange)&&o.onHashChange(e),a(o,location.hash)}function e(a){if("onhashchange"in window)n(window).on("hashchange",function(n){o(a,n)});else{var e=window.location,t=e.href,i=e.hash;setInterval(function(){var n=e.href,h=e.hash;h!=i&&"function"==typeof window.onhashchange&&(o(a,{type:"hashchange",oldURL:t,newURL:n}),t=n,i=h)})}}var t=/https?:\/\/.*douban.[com|fm]/,i=window.dui||{},h={pageSelector:".page",currentPage:null,defaultPage:"#popup_login",onHashChange:null,onNavigate:null,customNavigate:null},s=!1,c={init:function(o){s||(s=!0,o=n.extend({},h,o),e(o),location.hash?a(o,location.hash,!0):a(o,o.defaultPage,!0))},LOGIN_HEIGHT:382,REGISTER_HEIGHT:480,setParentIframe:function(a){window.top&&window.top.postMessage({type:"resize",data:{height:a,width:n("body").width()}},"*"),window.name&&t.test(window.name)&&window.top.postMessage(a,window.name)}};i.SimpleRouter=c,window.dui=i}(jQuery);